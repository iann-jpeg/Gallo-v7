import{c as e,i as s,k as a,r,j as t,t as i}from"./index-CLBnbEHD.js";import{B as l}from"./button-BlFb8XfN.js";import{L as n,I as c}from"./label-BNStf_RC.js";import{C as d,d as m,a as o,b as x}from"./card-CgCI3yzn.js";import{T as h,a as p,b as u,c as j}from"./tabs-DN_SIUqy.js";import{H as N,F as v}from"./Footer-DDsg2OGn.js";import{S as y}from"./shield-DtAeQuR9.js";import{L as g}from"./lock-Bn89Vx1W.js";import{C as f}from"./credit-card-CQOfWmbU.js";import"./index-D9sHvFAb.js";import"./index-BwW2dtZR.js";import"./index-Dhn-e7cv.js";
/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b=e("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]),P=()=>{const e=s(),[P]=a(),[w,S]=r.useState(!1),[C,E]=r.useState({policyNumber:P.get("policy")||"",clientName:"",amount:P.get("amount")||"",paymentMethod:"mpesa",phoneNumber:"",cardNumber:"",expiryDate:"",cvv:"",email:"",billingPhone:""});return w?t.jsxs("div",{className:"h-screen",children:[t.jsx(N,{}),t.jsx("main",{className:"py-16",children:t.jsx("div",{className:"max-w-2xl mx-auto px-4 text-center",children:t.jsx(d,{children:t.jsxs(m,{className:"p-12",children:[t.jsx("div",{className:"animate-spin w-16 h-16 border-4 border-accent border-t-transparent rounded-full mx-auto mb-6"}),t.jsx("h2",{className:"text-2xl font-bold text-primary mb-4",children:"Processing your payment..."}),t.jsx("p",{className:"text-muted-foreground",children:"Please wait while we process your payment. Do not close this window."})]})})})}),t.jsx(v,{})]}):t.jsxs("div",{className:"h-screen",children:[t.jsx(N,{}),t.jsx("main",{className:"py-16 bg-secondary/30",children:t.jsxs("div",{className:"max-w-4xl mx-auto px-4",children:[t.jsxs("div",{className:"text-center mb-8",children:[t.jsx("h1",{className:"text-3xl font-bold text-primary mb-4",children:"Secure Payment Portal"}),t.jsxs("div",{className:"flex items-center justify-center space-x-4 text-sm text-muted-foreground",children:[t.jsxs("div",{className:"flex items-center space-x-1",children:[t.jsx(y,{className:"h-4 w-4 text-green-600"}),t.jsx("span",{children:"Secure Payment"})]}),t.jsxs("div",{className:"flex items-center space-x-1",children:[t.jsx(g,{className:"h-4 w-4 text-green-600"}),t.jsx("span",{children:"SSL Protected"})]})]})]}),t.jsxs("div",{className:"grid lg:grid-cols-3 gap-8",children:[t.jsx("div",{className:"lg:col-span-1",children:t.jsxs(d,{children:[t.jsx(o,{children:t.jsx(x,{className:"text-lg",children:"Policy Information"})}),t.jsxs(m,{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx(n,{className:"text-sm font-medium",children:"Policy Number"}),t.jsx("p",{className:"text-lg font-mono",children:C.policyNumber||"POL-2024-001"})]}),t.jsxs("div",{children:[t.jsx(n,{className:"text-sm font-medium",children:"Amount Due"}),t.jsxs("p",{className:"text-2xl font-bold text-accent",children:["KES ",C.amount||"15,000"]})]}),t.jsx("div",{className:"pt-4 border-t",children:t.jsx("p",{className:"text-sm text-muted-foreground",children:"You are making a secure payment to Galloways Insurance Agency"})})]})]})}),t.jsx("div",{className:"lg:col-span-2",children:t.jsxs(d,{children:[t.jsx(o,{children:t.jsx(x,{className:"text-xl",children:"Payment Details"})}),t.jsx(m,{children:t.jsxs("form",{onSubmit:async s=>{if(s.preventDefault(),S(!0),!C.clientName||!C.amount||!C.email)return i({title:"Validation Error",description:"Please fill in all required fields.",variant:"destructive"}),void S(!1);try{if("mpesa"===C.paymentMethod){if(!C.phoneNumber)return i({title:"Validation Error",description:"Please provide a valid phone number for M-PESA payment.",variant:"destructive"}),void S(!1);const s=await void 0;if(!s.success)throw new Error(s.message||"Failed to initiate M-PESA payment");await void 0,i({title:"Payment Initiated",description:"Please check your phone and enter your M-PESA PIN to complete the payment."}),setTimeout(()=>{const a=s.data.checkoutRequestId;e(`/payment-success?ref=${a}&amount=${C.amount}`)},2e3)}else{if(!C.cardNumber||!C.expiryDate||!C.cvv)return i({title:"Validation Error",description:"Please fill in all card details.",variant:"destructive"}),void S(!1);await void 0,await new Promise(e=>setTimeout(e,2e3));const s=`TXN${Date.now()}`;e(`/payment-success?ref=${s}&amount=${C.amount}`)}}catch(a){i({title:"Payment Failed",description:a.message||"Failed to process payment. Please try again.",variant:"destructive"}),e("/payment-failure")}finally{S(!1)}},className:"space-y-6",children:[t.jsxs("div",{className:"space-y-4",children:[t.jsx("h3",{className:"font-semibold text-primary",children:"Client Information"}),t.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[t.jsxs("div",{className:"space-y-2",children:[t.jsx(n,{htmlFor:"clientName",children:"Client Name *"}),t.jsx(c,{id:"clientName",value:C.clientName,onChange:e=>E(s=>({...s,clientName:e.target.value})),placeholder:"Enter full name",required:!0})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx(n,{htmlFor:"amount",children:"Amount (KES) *"}),t.jsx(c,{id:"amount",type:"number",value:C.amount,onChange:e=>E(s=>({...s,amount:e.target.value})),placeholder:"15000",required:!0})]})]})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsx("h3",{className:"font-semibold text-primary",children:"Payment Method"}),t.jsxs(h,{value:C.paymentMethod,onValueChange:e=>E(s=>({...s,paymentMethod:e})),children:[t.jsxs(p,{className:"grid w-full grid-cols-2",children:[t.jsxs(u,{value:"mpesa",className:"flex items-center space-x-2",children:[t.jsx(b,{className:"h-4 w-4"}),t.jsx("span",{children:"M-PESA"})]}),t.jsxs(u,{value:"card",className:"flex items-center space-x-2",children:[t.jsx(f,{className:"h-4 w-4"}),t.jsx("span",{children:"Card"})]})]}),t.jsx(j,{value:"mpesa",className:"space-y-4",children:t.jsxs("div",{className:"space-y-2",children:[t.jsx(n,{htmlFor:"phoneNumber",children:"Phone Number *"}),t.jsx(c,{id:"phoneNumber",value:C.phoneNumber,onChange:e=>E(s=>({...s,phoneNumber:e.target.value})),placeholder:"254700123456",required:!0}),t.jsx("p",{className:"text-sm text-muted-foreground",children:"You will receive an STK push notification to complete the payment"})]})}),t.jsxs(j,{value:"card",className:"space-y-4",children:[t.jsxs("div",{className:"space-y-2",children:[t.jsx(n,{htmlFor:"cardNumber",children:"Card Number *"}),t.jsx(c,{id:"cardNumber",value:C.cardNumber,onChange:e=>E(s=>({...s,cardNumber:e.target.value})),placeholder:"1234 5678 9012 3456",required:!0})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{className:"space-y-2",children:[t.jsx(n,{htmlFor:"expiryDate",children:"Expiry Date *"}),t.jsx(c,{id:"expiryDate",value:C.expiryDate,onChange:e=>E(s=>({...s,expiryDate:e.target.value})),placeholder:"MM/YY",required:!0})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx(n,{htmlFor:"cvv",children:"CVV *"}),t.jsx(c,{id:"cvv",value:C.cvv,onChange:e=>E(s=>({...s,cvv:e.target.value})),placeholder:"123",maxLength:3,required:!0})]})]})]})]})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsx("h3",{className:"font-semibold text-primary",children:"Billing Details"}),t.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[t.jsxs("div",{className:"space-y-2",children:[t.jsx(n,{htmlFor:"email",children:"Email Address *"}),t.jsx(c,{id:"email",type:"email",value:C.email,onChange:e=>E(s=>({...s,email:e.target.value})),placeholder:"client@example.com",required:!0})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx(n,{htmlFor:"billingPhone",children:"Phone Number *"}),t.jsx(c,{id:"billingPhone",value:C.billingPhone,onChange:e=>E(s=>({...s,billingPhone:e.target.value})),placeholder:"254700123456",required:!0})]})]})]}),t.jsxs("div",{className:"pt-6 border-t",children:[t.jsxs(l,{type:"submit",className:"w-full bg-accent hover:bg-accent/90 text-accent-foreground text-lg py-6",disabled:w,children:[t.jsx(g,{className:"h-5 w-5 mr-2"}),"Confirm & Pay KES ",C.amount||"15,000"]}),t.jsx("p",{className:"text-xs text-muted-foreground text-center mt-4",children:"By proceeding, you agree to our terms and conditions. Your payment is secured with 256-bit SSL encryption."})]})]})})]})})]})]})}),t.jsx(v,{})]})};export{P as default};
