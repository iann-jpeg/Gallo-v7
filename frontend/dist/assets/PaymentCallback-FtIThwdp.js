import{j as e}from"./vendor-query-6aI7gcTg.js";import{f as s,u as a,r as t}from"./vendor-react-B1NQUE71.js";import{M as n,C as l,B as c,N as i,a1 as r}from"./admin-BHZr55t6.js";import{aJ as o,Q as m,V as d}from"./vendor-ui-D1ltsK8g.js";function u(){const[u]=s(),x=a(),[f,p]=t.useState("loading"),[h,j]=t.useState("Verifying payment..."),y=u.get("reference"),v=u.get("trxref");return t.useEffect(()=>{(async()=>{var e;const s=y||v;if(!s)return p("failed"),void j("Payment reference not found");try{const a=await r.verifyPayment(s);a.success&&"success"===a.data.status?(p("success"),j("Payment completed successfully! You will receive a confirmation email shortly.")):(p("failed"),j((null==(e=a.data)?void 0:e.message)||a.error||"Payment verification failed"))}catch(a){p("failed"),j("Failed to verify payment status")}})()},[y,v]),e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsx(n,{}),e.jsx("main",{className:"pt-20 pb-20 px-4",children:e.jsx("div",{className:"max-w-2xl mx-auto",children:e.jsxs(l,{className:"p-8 text-center",children:["loading"===f&&e.jsxs(e.Fragment,{children:[e.jsx(o,{className:"w-16 h-16 mx-auto mb-4 animate-spin text-primary"}),e.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Verifying Payment"}),e.jsx("p",{className:"text-muted-foreground",children:h})]}),"success"===f&&e.jsxs(e.Fragment,{children:[e.jsx(m,{className:"w-16 h-16 mx-auto mb-4 text-green-500"}),e.jsx("h2",{className:"text-2xl font-bold mb-4 text-green-600",children:"Payment Successful!"}),e.jsx("p",{className:"text-muted-foreground mb-6",children:h}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(c,{className:"w-full",onClick:()=>x("/diaspora"),children:"Back to Diaspora Services"}),e.jsx(c,{variant:"outline",className:"w-full",onClick:()=>{const e=encodeURIComponent(`Hello! I have successfully completed payment with reference: ${y||v}. I would like to schedule my diaspora consultation.`);window.open(`https://wa.me/+254712345678?text=${e}`,"_blank")},children:"Schedule Consultation via WhatsApp"})]})]}),"failed"===f&&e.jsxs(e.Fragment,{children:[e.jsx(d,{className:"w-16 h-16 mx-auto mb-4 text-red-500"}),e.jsx("h2",{className:"text-2xl font-bold mb-4 text-red-600",children:"Payment Failed"}),e.jsx("p",{className:"text-muted-foreground mb-6",children:h}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(c,{className:"w-full",onClick:()=>x("/diaspora"),children:"Try Again"}),e.jsx(c,{variant:"outline",className:"w-full",onClick:()=>{const e=encodeURIComponent("Hello! I'm having trouble with payment for diaspora consultation. Could you please help me?");window.open(`https://wa.me/+254712345678?text=${e}`,"_blank")},children:"Get Help via WhatsApp"})]})]})]})})}),e.jsx(i,{})]})}export{u as default};
