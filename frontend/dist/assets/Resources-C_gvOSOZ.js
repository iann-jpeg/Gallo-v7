import{c as e,r as s,i as t,u as a,j as l}from"./index-Yi0H68r-.js";import{C as i,a as r,b as c,d as n}from"./card-Bi376wbI.js";import{B as o}from"./button-B8C6kXNy.js";import{B as d}from"./badge-DV_1gHrv.js";import{T as m,a as x,b as h,c as u}from"./tabs-WkobFijy.js";import{H as p,F as j}from"./Footer-CCuMHFXU.js";import{F as N}from"./file-text-jaa-Cnm3.js";import{L as g,D as f,C as y,a as v}from"./log-out-K0I45WnB.js";import{U as b}from"./users-iAC6fuPX.js";import{S as w}from"./shield-Ct_Qk_89.js";import{M as C}from"./message-square-B5JaFTLo.js";import{B as S}from"./building-DOVdWmQk.js";import{C as D,G as k}from"./globe-CerNK7wx.js";import{C as R}from"./credit-card-COXjqGBM.js";import"./index-BNP9kUYh.js";import"./index-Bl4NmbRC.js";import"./index-CV9nu4DY.js";
/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P=e("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),A=()=>{const[e,A]=s.useState(null),[L,E]=s.useState(null),[M,I]=s.useState(!0),[T,q]=s.useState({totalClaims:0,totalQuotes:0,totalConsultations:0,totalOutsourcingRequests:0,totalPayments:0,totalDiasporaRequests:0,totalUsers:0,pendingClaims:0,activePolicies:0,monthlyRevenue:0,conversionRate:0,totalSubmissions:0,allSubmissions:{claims:[],outsourcing:[],consultations:[],payments:[],diaspora:[]}}),[F,O]=s.useState([]),[U,$]=s.useState(""),[_,Q]=s.useState("all"),V=t(),{toast:B}=a();s.useEffect(()=>{G()},[]);const G=async()=>{try{if(!localStorage.getItem("auth_token"))return void V("/auth");const e=await void 0;if(!e.success||!e.data||!["ADMIN","SUPER_ADMIN"].includes(e.data.role))return B({title:"Access Denied",description:"You don't have permission to access this page.",variant:"destructive"}),void V("/");E({id:e.data.id,full_name:e.data.name,role:e.data.role,email:e.data.email}),A(e),await K()}catch(e){B({title:"Authentication Error",description:"Please log in to access the admin dashboard.",variant:"destructive"}),V("/auth")}finally{I(!1)}},K=async()=>{try{const[e,s]=await Promise.all([void 0,void 0]);e.success&&e.data?(q(e.data),e.data.isRealTime?B({title:"Dashboard Updated",description:"Real-time data from database loaded successfully."}):e.data.isMockData&&B({title:"Demo Data Mode",description:e.message||"Using demo data due to database connectivity.",variant:"default"})):q(e.data||{}),s.success&&s.data?O(s.data):O([])}catch(e){B({title:"Error",description:"Failed to load dashboard data. Using offline mode.",variant:"destructive"}),q({totalClaims:0,totalQuotes:0,totalConsultations:0,totalOutsourcingRequests:0,totalPayments:0,totalDiasporaRequests:0,totalUsers:0,pendingClaims:0,activePolicies:0,monthlyRevenue:0,conversionRate:0,totalSubmissions:0,allSubmissions:{claims:[],outsourcing:[],consultations:[],payments:[],diaspora:[]}}),O([])}},z=e=>new Date(e).toLocaleDateString(),H=e=>{switch(null==e?void 0:e.toLowerCase()){case"pending":return"bg-yellow-100 text-yellow-800";case"approved":case"completed":return"bg-green-100 text-green-800";case"rejected":case"cancelled":return"bg-red-100 text-red-800";case"in_progress":case"processing":return"bg-blue-100 text-blue-800";default:return"bg-gray-100 text-gray-800"}};if(M)return l.jsxs("div",{className:"h-screen bg-background",children:[l.jsx(p,{}),l.jsx("div",{className:"flex items-center justify-center h-96",children:l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto"}),l.jsx("p",{className:"mt-4 text-muted-foreground",children:"Loading dashboard..."})]})}),l.jsx(j,{})]});const W=({title:e,value:s,icon:t,trend:a})=>l.jsx(i,{children:l.jsx(n,{className:"p-6",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:e}),l.jsx("p",{className:"text-2xl font-bold",children:s}),a&&l.jsx("p",{className:"text-xs text-muted-foreground",children:a})]}),l.jsx("div",{className:"text-muted-foreground",children:t})]})})}),Y=({title:e,value:s,icon:t,change:a,color:r="primary"})=>l.jsx(i,{children:l.jsx(n,{className:"p-6",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:e}),l.jsx("p",{className:"text-2xl font-bold",children:s}),a&&l.jsxs("p",{className:"text-xs "+(a>=0?"text-green-600":"text-red-600"),children:[a>=0?"+":"",a,"% from last month"]})]}),l.jsx(t,{className:`h-8 w-8 text-${r}`})]})})}),J=({title:e,description:s,icon:t,onClick:a})=>l.jsx(i,{className:"cursor-pointer hover:shadow-md transition-shadow",onClick:a,children:l.jsx(n,{className:"p-6",children:l.jsxs("div",{className:"flex items-center space-x-4",children:[l.jsx(t,{className:"h-8 w-8 text-primary"}),l.jsxs("div",{className:"flex-1",children:[l.jsx("h3",{className:"font-semibold",children:e}),l.jsx("p",{className:"text-sm text-muted-foreground",children:s})]}),l.jsx(v,{className:"h-5 w-5 text-muted-foreground"})]})})}),X=[{name:"Contractors All Risk Proposal",category:"Contractors",url:"/resources/contractors-all-risk-proposal.pdf",type:"form"},{name:"Personal Accident Proposal Form",category:"Claims",url:"/resources/personal-accident-proposal.pdf",type:"form"},{name:"Livestock Insurance Form",category:"Livestock",url:"/resources/livestock-insurance-form.pdf",type:"form",description:"Covers loss of insured livestock due to specified risks."},{name:"Veterinary Insurance Form",category:"Veterinary",url:"/resources/veterinary-insurance-form.pdf",type:"form",description:"Supports coverage for veterinary costs."},{name:"Medical - Individual",category:"Medical",url:"/resources/medical-individual-form.pdf",type:"form",description:"For individual health policy applications."},{name:"Medical - Group",category:"Medical",url:"/resources/medical-group-form.pdf",type:"form",description:"For group health insurance applications."}].filter(e=>("all"===_||e.category===_)&&(e.name.toLowerCase().includes(U.toLowerCase())||e.description&&e.description.toLowerCase().includes(U.toLowerCase())));return l.jsxs("div",{className:"h-screen bg-background",children:[l.jsx(p,{}),l.jsxs("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[l.jsxs("section",{className:"mb-12",children:[l.jsx("h1",{className:"text-3xl font-bold mb-4 text-primary",children:"Resources"}),l.jsx("p",{className:"text-muted-foreground mb-6",children:"Download forms, PDFs, and documents for claims, quotes, and insurance products. Use the search and category filter for quick access."}),l.jsxs("div",{className:"flex flex-col md:flex-row gap-4 mb-6",children:[l.jsx("input",{type:"text",placeholder:"Search resources...",value:U,onChange:e=>$(e.target.value),className:"border rounded px-4 py-2 w-full md:w-1/2"}),l.jsxs("select",{value:_,onChange:e=>Q(e.target.value),className:"border rounded px-4 py-2 w-full md:w-1/4",children:[l.jsx("option",{value:"all",children:"All Categories"}),l.jsx("option",{value:"Contractors",children:"Contractors"}),l.jsx("option",{value:"Claims",children:"Claims"}),l.jsx("option",{value:"Livestock",children:"Livestock"}),l.jsx("option",{value:"Veterinary",children:"Veterinary"}),l.jsx("option",{value:"Medical",children:"Medical"})]})]}),l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:X.length>0?X.map((e,s)=>l.jsxs(i,{className:"p-6 flex flex-col justify-between",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"text-lg font-semibold mb-2",children:e.name}),e.description&&l.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:e.description}),l.jsx("span",{className:"inline-block bg-primary/10 text-primary px-2 py-1 rounded text-xs mb-2",children:e.category})]}),l.jsx("a",{href:e.url,download:!0,className:"mt-4 px-4 py-2 bg-primary text-white rounded hover:bg-primary/90 text-center font-medium",children:"Download"})]},s)):l.jsx("p",{className:"text-muted-foreground col-span-3",children:"No resources found for your search."})})]}),l.jsx("div",{className:"bg-primary text-primary-foreground py-4",children:l.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-2xl font-bold",children:"Admin Dashboard"}),l.jsxs("p",{className:"text-sm opacity-90",children:["Welcome back, ",null==L?void 0:L.full_name]})]}),l.jsxs("div",{className:"flex items-center space-x-4",children:[l.jsxs(o,{variant:"outline",size:"sm",onClick:async()=>{try{if(!localStorage.getItem("auth_token"))throw new Error("No authentication token found");if(!(await void 0).success)throw new Error("Failed to generate PDF report");const e=`Dashboard Report - ${(new Date).toISOString().split("T")[0]}\n\nThis is a sample PDF export.\nIn a full implementation, this would contain:\n- User statistics\n- Claims data\n- Revenue reports\n- Activity summaries\n\nGenerated on: ${(new Date).toLocaleString()}\n`,s=new Blob([e],{type:"text/plain"}),t=window.URL.createObjectURL(s),a=document.createElement("a");a.href=t,a.download=`dashboard-report-${(new Date).toISOString().split("T")[0]}.txt`,document.body.appendChild(a),a.click(),window.URL.revokeObjectURL(t),document.body.removeChild(a),B({title:"Success",description:"Report downloaded successfully!"})}catch(e){B({title:"Error",description:"Failed to export PDF report. Please try again.",variant:"destructive"})}},className:"flex items-center gap-2",children:[l.jsx(N,{className:"h-4 w-4"}),"Export PDF Report"]}),l.jsx(d,{variant:"secondary",children:null==L?void 0:L.role}),l.jsxs(o,{variant:"secondary",size:"sm",onClick:()=>{localStorage.removeItem("auth_token"),V("/")},children:[l.jsx(g,{className:"h-4 w-4 mr-2"}),"Sign Out"]})]})]})})}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[l.jsx(W,{title:"Total Claims",value:T.totalClaims,icon:l.jsx(N,{className:"h-6 w-6"}),trend:"+12%"}),l.jsx(W,{title:"Total Quotes",value:T.totalQuotes,icon:l.jsx(f,{className:"h-6 w-6"}),trend:"+8%"}),l.jsx(W,{title:"Consultations",value:T.totalConsultations,icon:l.jsx(b,{className:"h-6 w-6"}),trend:"+15%"}),l.jsx(W,{title:"Pending Claims",value:T.pendingClaims,icon:l.jsx(P,{className:"h-6 w-6"}),trend:"-5%"})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-8",children:[l.jsx(W,{title:"Outsourcing Requests",value:T.totalOutsourcingRequests,icon:l.jsx(N,{className:"h-6 w-6"})}),l.jsx(W,{title:"Payments",value:T.totalPayments,icon:l.jsx(f,{className:"h-6 w-6"})}),l.jsx(W,{title:"Diaspora Requests",value:T.totalDiasporaRequests,icon:l.jsx(b,{className:"h-6 w-6"})})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8",children:[l.jsx(Y,{title:"Monthly Revenue",value:`KES ${T.monthlyRevenue.toLocaleString()}`,icon:f,change:15,color:"green-600"}),l.jsx(Y,{title:"Conversion Rate",value:`${T.conversionRate}%`,icon:y,change:2,color:"purple-600"})]}),l.jsxs("div",{className:"mb-8",children:[l.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Quick Actions"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[l.jsx(J,{title:"Manage Leads",description:"View and update lead status",icon:b,onClick:()=>{}}),l.jsx(J,{title:"Policy Overview",description:"Track active policies and renewals",icon:w,onClick:()=>{}}),l.jsx(J,{title:"Claims Review",description:"Process pending claims",icon:N,onClick:()=>{}}),l.jsx(J,{title:"Payment Tracking",description:"Monitor payments and transactions",icon:f,onClick:()=>{}}),l.jsx(J,{title:"Client Communications",description:"Send notifications and updates",icon:C,onClick:()=>{}}),l.jsx(J,{title:"Resource Library",description:"Manage documents and materials",icon:N,onClick:()=>{}})]})]}),l.jsxs(m,{defaultValue:"claims",className:"w-full",children:[l.jsxs(x,{className:"grid w-full grid-cols-5",children:[l.jsx(h,{value:"claims",children:"Claims"}),l.jsx(h,{value:"outsourcing",children:"Outsourcing"}),l.jsx(h,{value:"consultations",children:"Consultations"}),l.jsx(h,{value:"payments",children:"Payments"}),l.jsx(h,{value:"diaspora",children:"Diaspora"})]}),l.jsx(u,{value:"claims",className:"mt-6",children:l.jsxs(i,{children:[l.jsx(r,{children:l.jsxs(c,{className:"flex items-center gap-2",children:[l.jsx(N,{className:"h-5 w-5"}),"All Claims (",T.allSubmissions.claims.length,")"]})}),l.jsx(n,{children:T.allSubmissions.claims.length>0?l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"w-full text-sm",children:[l.jsx("thead",{children:l.jsxs("tr",{className:"border-b",children:[l.jsx("th",{className:"text-left p-2",children:"ID"}),l.jsx("th",{className:"text-left p-2",children:"Policy Number"}),l.jsx("th",{className:"text-left p-2",children:"Client Email"}),l.jsx("th",{className:"text-left p-2",children:"Incident Type"}),l.jsx("th",{className:"text-left p-2",children:"Amount"}),l.jsx("th",{className:"text-left p-2",children:"Status"}),l.jsx("th",{className:"text-left p-2",children:"Date"})]})}),l.jsx("tbody",{children:T.allSubmissions.claims.map(e=>{var s;return l.jsxs("tr",{className:"border-b hover:bg-gray-50",children:[l.jsx("td",{className:"p-2",children:e.id}),l.jsx("td",{className:"p-2",children:e.policyNumber}),l.jsx("td",{className:"p-2",children:e.clientEmail}),l.jsx("td",{className:"p-2",children:e.incidentType}),l.jsxs("td",{className:"p-2",children:["KSh ",null==(s=e.claimAmount)?void 0:s.toLocaleString()]}),l.jsx("td",{className:"p-2",children:l.jsx("span",{className:`px-2 py-1 rounded text-xs ${H(e.status)}`,children:e.status})}),l.jsx("td",{className:"p-2",children:z(e.createdAt)})]},e.id)})})]})}):l.jsx("p",{className:"text-gray-500 text-center py-8",children:"No claims submitted yet."})})]})}),l.jsx(u,{value:"outsourcing",className:"mt-6",children:l.jsxs(i,{children:[l.jsx(r,{children:l.jsxs(c,{className:"flex items-center gap-2",children:[l.jsx(S,{className:"h-5 w-5"}),"All Outsourcing Requests (",T.allSubmissions.outsourcing.length,")"]})}),l.jsx(n,{children:T.allSubmissions.outsourcing.length>0?l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"w-full text-sm",children:[l.jsx("thead",{children:l.jsxs("tr",{className:"border-b",children:[l.jsx("th",{className:"text-left p-2",children:"ID"}),l.jsx("th",{className:"text-left p-2",children:"Company"}),l.jsx("th",{className:"text-left p-2",children:"Contact Email"}),l.jsx("th",{className:"text-left p-2",children:"Service Type"}),l.jsx("th",{className:"text-left p-2",children:"Budget Range"}),l.jsx("th",{className:"text-left p-2",children:"Status"}),l.jsx("th",{className:"text-left p-2",children:"Date"})]})}),l.jsx("tbody",{children:T.allSubmissions.outsourcing.map(e=>l.jsxs("tr",{className:"border-b hover:bg-gray-50",children:[l.jsx("td",{className:"p-2",children:e.id}),l.jsx("td",{className:"p-2",children:e.companyName}),l.jsx("td",{className:"p-2",children:e.contactEmail}),l.jsx("td",{className:"p-2",children:e.serviceType}),l.jsx("td",{className:"p-2",children:e.budgetRange}),l.jsx("td",{className:"p-2",children:l.jsx("span",{className:`px-2 py-1 rounded text-xs ${H(e.status)}`,children:e.status})}),l.jsx("td",{className:"p-2",children:z(e.createdAt)})]},e.id))})]})}):l.jsx("p",{className:"text-gray-500 text-center py-8",children:"No outsourcing requests submitted yet."})})]})}),l.jsx(u,{value:"consultations",className:"mt-6",children:l.jsxs(i,{children:[l.jsx(r,{children:l.jsxs(c,{className:"flex items-center gap-2",children:[l.jsx(D,{className:"h-5 w-5"}),"All Consultations (",T.allSubmissions.consultations.length,")"]})}),l.jsx(n,{children:T.allSubmissions.consultations.length>0?l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"w-full text-sm",children:[l.jsx("thead",{children:l.jsxs("tr",{className:"border-b",children:[l.jsx("th",{className:"text-left p-2",children:"ID"}),l.jsx("th",{className:"text-left p-2",children:"Name"}),l.jsx("th",{className:"text-left p-2",children:"Email"}),l.jsx("th",{className:"text-left p-2",children:"Service"}),l.jsx("th",{className:"text-left p-2",children:"Preferred Date"}),l.jsx("th",{className:"text-left p-2",children:"Status"}),l.jsx("th",{className:"text-left p-2",children:"Submitted"})]})}),l.jsx("tbody",{children:T.allSubmissions.consultations.map(e=>l.jsxs("tr",{className:"border-b hover:bg-gray-50",children:[l.jsx("td",{className:"p-2",children:e.id}),l.jsx("td",{className:"p-2",children:e.fullName}),l.jsx("td",{className:"p-2",children:e.email}),l.jsx("td",{className:"p-2",children:e.serviceType}),l.jsx("td",{className:"p-2",children:e.preferredDate?z(e.preferredDate):"N/A"}),l.jsx("td",{className:"p-2",children:l.jsx("span",{className:`px-2 py-1 rounded text-xs ${H(e.status)}`,children:e.status})}),l.jsx("td",{className:"p-2",children:z(e.createdAt)})]},e.id))})]})}):l.jsx("p",{className:"text-gray-500 text-center py-8",children:"No consultations scheduled yet."})})]})}),l.jsx(u,{value:"payments",className:"mt-6",children:l.jsxs(i,{children:[l.jsx(r,{children:l.jsxs(c,{className:"flex items-center gap-2",children:[l.jsx(R,{className:"h-5 w-5"}),"All Payments (",T.allSubmissions.payments.length,")"]})}),l.jsx(n,{children:T.allSubmissions.payments.length>0?l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"w-full text-sm",children:[l.jsx("thead",{children:l.jsxs("tr",{className:"border-b",children:[l.jsx("th",{className:"text-left p-2",children:"ID"}),l.jsx("th",{className:"text-left p-2",children:"Policy Number"}),l.jsx("th",{className:"text-left p-2",children:"Client Email"}),l.jsx("th",{className:"text-left p-2",children:"Amount"}),l.jsx("th",{className:"text-left p-2",children:"Payment Method"}),l.jsx("th",{className:"text-left p-2",children:"Status"}),l.jsx("th",{className:"text-left p-2",children:"Date"})]})}),l.jsx("tbody",{children:T.allSubmissions.payments.map(e=>{var s;return l.jsxs("tr",{className:"border-b hover:bg-gray-50",children:[l.jsx("td",{className:"p-2",children:e.id}),l.jsx("td",{className:"p-2",children:e.policyNumber}),l.jsx("td",{className:"p-2",children:e.clientEmail}),l.jsxs("td",{className:"p-2",children:["KSh ",null==(s=e.amount)?void 0:s.toLocaleString()]}),l.jsx("td",{className:"p-2",children:e.paymentMethod}),l.jsx("td",{className:"p-2",children:l.jsx("span",{className:`px-2 py-1 rounded text-xs ${H(e.status)}`,children:e.status})}),l.jsx("td",{className:"p-2",children:z(e.createdAt)})]},e.id)})})]})}):l.jsx("p",{className:"text-gray-500 text-center py-8",children:"No payments recorded yet."})})]})}),l.jsx(u,{value:"diaspora",className:"mt-6",children:l.jsxs(i,{children:[l.jsx(r,{children:l.jsxs(c,{className:"flex items-center gap-2",children:[l.jsx(k,{className:"h-5 w-5"}),"All Diaspora Requests (",T.allSubmissions.diaspora.length,")"]})}),l.jsx(n,{children:T.allSubmissions.diaspora.length>0?l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"w-full text-sm",children:[l.jsx("thead",{children:l.jsxs("tr",{className:"border-b",children:[l.jsx("th",{className:"text-left p-2",children:"ID"}),l.jsx("th",{className:"text-left p-2",children:"Name"}),l.jsx("th",{className:"text-left p-2",children:"Email"}),l.jsx("th",{className:"text-left p-2",children:"Country"}),l.jsx("th",{className:"text-left p-2",children:"Service Type"}),l.jsx("th",{className:"text-left p-2",children:"Status"}),l.jsx("th",{className:"text-left p-2",children:"Date"})]})}),l.jsx("tbody",{children:T.allSubmissions.diaspora.map(e=>l.jsxs("tr",{className:"border-b hover:bg-gray-50",children:[l.jsx("td",{className:"p-2",children:e.id}),l.jsx("td",{className:"p-2",children:e.fullName}),l.jsx("td",{className:"p-2",children:e.email}),l.jsx("td",{className:"p-2",children:e.currentCountry}),l.jsx("td",{className:"p-2",children:e.serviceType}),l.jsx("td",{className:"p-2",children:l.jsx("span",{className:`px-2 py-1 rounded text-xs ${H(e.status)}`,children:e.status})}),l.jsx("td",{className:"p-2",children:z(e.createdAt)})]},e.id))})]})}):l.jsx("p",{className:"text-gray-500 text-center py-8",children:"No diaspora requests submitted yet."})})]})})]})]}),l.jsx(j,{})]})};export{A as default};
