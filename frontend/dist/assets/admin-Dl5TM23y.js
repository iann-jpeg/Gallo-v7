var e=Object.defineProperty,t=(t,s,n)=>((t,s,n)=>s in t?e(t,s,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[s]=n)(t,"symbol"!=typeof s?s+"":s,n);import{r as s,R as n,a,v as r,b as i,g as o,c as l,L as c,u as d}from"./vendor-react-B1NQUE71.js";import{j as u}from"./vendor-query-6aI7gcTg.js";import{X as h,M as m,F as p,T as f,L as g,P as x,a as v,b as y,C as b,c as w,d as j,e as N,f as S,D as _,U as k,g as C,h as E,S as T,i as R,B as P,j as D,k as A,G as O,l as I,m as M,R as L,n as $,o as U,p as F,q,r as z,E as B,s as W,t as H,u as K,v as V,w as G,x as J,y as Y,z as Q,A as X,H as Z,I as ee,J as te,K as se,N as ne,O as ae,Q as re,V as ie,W as oe,Y as le,Z as ce,_ as de,$ as ue,a0 as he,a1 as me,a2 as pe,a3 as fe,a4 as ge,a5 as xe,a6 as ve,a7 as ye,a8 as be,a9 as we}from"./vendor-ui-B9couhbc.js";const je={},Ne=function(e,t,s){let n=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const e=document.querySelector("meta[property=csp-nonce]"),s=(null==e?void 0:e.nonce)||(null==e?void 0:e.getAttribute("nonce"));n=Promise.allSettled(t.map(e=>{if((e=function(e){return"/"+e}(e))in je)return;je[e]=!0;const t=e.endsWith(".css"),n=t?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${e}"]${n}`))return;const a=document.createElement("link");return a.rel=t?"stylesheet":"modulepreload",t||(a.as="script"),a.crossOrigin="",a.href=e,s&&a.setAttribute("nonce",s),document.head.appendChild(a),t?new Promise((t,s)=>{a.addEventListener("load",t),a.addEventListener("error",()=>s(new Error(`Unable to preload CSS for ${e}`)))}):void 0}))}function a(e){const t=new Event("vite:preloadError",{cancelable:!0});if(t.payload=e,window.dispatchEvent(t),!t.defaultPrevented)throw e}return n.then(t=>{for(const e of t||[])"rejected"===e.status&&a(e.reason);return e().catch(a)})};let Se=0;const _e=new Map,ke=e=>{if(_e.has(e))return;const t=setTimeout(()=>{_e.delete(e),Re({type:"REMOVE_TOAST",toastId:e})},1e6);_e.set(e,t)},Ce=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{const{toastId:s}=t;return s?ke(s):e.toasts.forEach(e=>{ke(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===s||void 0===s?{...e,open:!1}:e)}}case"REMOVE_TOAST":return void 0===t.toastId?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},Ee=[];let Te={toasts:[]};function Re(e){Te=Ce(Te,e),Ee.forEach(e=>{e(Te)})}function Pe({...e}){const t=(Se=(Se+1)%Number.MAX_SAFE_INTEGER,Se.toString()),s=()=>Re({type:"DISMISS_TOAST",toastId:t});return Re({type:"ADD_TOAST",toast:{...e,id:t,open:!0,onOpenChange:e=>{e||s()}}}),{id:t,dismiss:s,update:e=>Re({type:"UPDATE_TOAST",toast:{...e,id:t}})}}function De(){const[e,t]=s.useState(Te);return s.useEffect(()=>(Ee.push(t),()=>{const e=Ee.indexOf(t);e>-1&&Ee.splice(e,1)}),[e]),{...e,toast:Pe,dismiss:e=>Re({type:"DISMISS_TOAST",toastId:e})}}function Ae(e,t,{checkForDefaultPrevented:s=!0}={}){return function(n){if(null==e||e(n),!1===s||!n.defaultPrevented)return null==t?void 0:t(n)}}function Oe(e,t){if("function"==typeof e)return e(t);null!=e&&(e.current=t)}function Ie(...e){return t=>{let s=!1;const n=e.map(e=>{const n=Oe(e,t);return s||"function"!=typeof n||(s=!0),n});if(s)return()=>{for(let t=0;t<n.length;t++){const s=n[t];"function"==typeof s?s():Oe(e[t],null)}}}}function Me(...e){return s.useCallback(Ie(...e),e)}function Le(e,t=[]){let n=[];const a=()=>{const t=n.map(e=>s.createContext(e));return function(n){const a=(null==n?void 0:n[e])||t;return s.useMemo(()=>({[`__scope${e}`]:{...n,[e]:a}}),[n,a])}};return a.scopeName=e,[function(t,a){const r=s.createContext(a),i=n.length;n=[...n,a];const o=t=>{var n;const{scope:a,children:o,...l}=t,c=(null==(n=null==a?void 0:a[e])?void 0:n[i])||r,d=s.useMemo(()=>l,Object.values(l));return u.jsx(c.Provider,{value:d,children:o})};return o.displayName=t+"Provider",[o,function(n,o){var l;const c=(null==(l=null==o?void 0:o[e])?void 0:l[i])||r,d=s.useContext(c);if(d)return d;if(void 0!==a)return a;throw new Error(`\`${n}\` must be used within \`${t}\``)}]},$e(a,...t)]}function $e(...e){const t=e[0];if(1===e.length)return t;const n=()=>{const n=e.map(e=>({useScope:e(),scopeName:e.scopeName}));return function(e){const a=n.reduce((t,{useScope:s,scopeName:n})=>({...t,...s(e)[`__scope${n}`]}),{});return s.useMemo(()=>({[`__scope${t.scopeName}`]:a}),[a])}};return n.scopeName=t.scopeName,n}function Ue(e){const t=qe(e),n=s.forwardRef((e,n)=>{const{children:a,...r}=e,i=s.Children.toArray(a),o=i.find(We);if(o){const e=o.props.children,a=i.map(t=>t===o?s.Children.count(e)>1?s.Children.only(null):s.isValidElement(e)?e.props.children:null:t);return u.jsx(t,{...r,ref:n,children:s.isValidElement(e)?s.cloneElement(e,void 0,a):null})}return u.jsx(t,{...r,ref:n,children:a})});return n.displayName=`${e}.Slot`,n}var Fe=Ue("Slot");function qe(e){const t=s.forwardRef((e,t)=>{const{children:n,...a}=e;if(s.isValidElement(n)){const e=function(e){var t,s;let n=null==(t=Object.getOwnPropertyDescriptor(e.props,"ref"))?void 0:t.get,a=n&&"isReactWarning"in n&&n.isReactWarning;if(a)return e.ref;if(n=null==(s=Object.getOwnPropertyDescriptor(e,"ref"))?void 0:s.get,a=n&&"isReactWarning"in n&&n.isReactWarning,a)return e.props.ref;return e.props.ref||e.ref}(n),r=function(e,t){const s={...t};for(const n in t){const a=e[n],r=t[n];/^on[A-Z]/.test(n)?a&&r?s[n]=(...e)=>{const t=r(...e);return a(...e),t}:a&&(s[n]=a):"style"===n?s[n]={...a,...r}:"className"===n&&(s[n]=[a,r].filter(Boolean).join(" "))}return{...e,...s}}(a,n.props);return n.type!==s.Fragment&&(r.ref=t?Ie(t,e):e),s.cloneElement(n,r)}return s.Children.count(n)>1?s.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var ze=Symbol("radix.slottable");function Be(e){const t=({children:e})=>u.jsx(u.Fragment,{children:e});return t.displayName=`${e}.Slottable`,t.__radixId=ze,t}function We(e){return s.isValidElement(e)&&"function"==typeof e.type&&"__radixId"in e.type&&e.type.__radixId===ze}function He(e){const t=e+"CollectionProvider",[s,a]=Le(t),[r,i]=s(t,{collectionRef:{current:null},itemMap:new Map}),o=e=>{const{scope:t,children:s}=e,a=n.useRef(null),i=n.useRef(new Map).current;return u.jsx(r,{scope:t,itemMap:i,collectionRef:a,children:s})};o.displayName=t;const l=e+"CollectionSlot",c=Ue(l),d=n.forwardRef((e,t)=>{const{scope:s,children:n}=e,a=Me(t,i(l,s).collectionRef);return u.jsx(c,{ref:a,children:n})});d.displayName=l;const h=e+"CollectionItemSlot",m="data-radix-collection-item",p=Ue(h),f=n.forwardRef((e,t)=>{const{scope:s,children:a,...r}=e,o=n.useRef(null),l=Me(t,o),c=i(h,s);return n.useEffect(()=>(c.itemMap.set(o,{ref:o,...r}),()=>{c.itemMap.delete(o)})),u.jsx(p,{[m]:"",ref:l,children:a})});return f.displayName=h,[{Provider:o,Slot:d,ItemSlot:f},function(t){const s=i(e+"CollectionConsumer",t);return n.useCallback(()=>{const e=s.collectionRef.current;if(!e)return[];const t=Array.from(e.querySelectorAll(`[${m}]`));return Array.from(s.itemMap.values()).sort((e,s)=>t.indexOf(e.ref.current)-t.indexOf(s.ref.current))},[s.collectionRef,s.itemMap])},a]}var Ke=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((e,t)=>{const n=Ue(`Primitive.${t}`),a=s.forwardRef((e,s)=>{const{asChild:a,...r}=e,i=a?n:t;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),u.jsx(i,{...r,ref:s})});return a.displayName=`Primitive.${t}`,{...e,[t]:a}},{});function Ve(e,t){e&&a.flushSync(()=>e.dispatchEvent(t))}function Ge(e){const t=s.useRef(e);return s.useEffect(()=>{t.current=e}),s.useMemo(()=>(...e)=>{var s;return null==(s=t.current)?void 0:s.call(t,...e)},[])}var Je,Ye="dismissableLayer.update",Qe="dismissableLayer.pointerDownOutside",Xe="dismissableLayer.focusOutside",Ze=s.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),et=s.forwardRef((e,t)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:a,onPointerDownOutside:r,onFocusOutside:i,onInteractOutside:o,onDismiss:l,...c}=e,d=s.useContext(Ze),[h,m]=s.useState(null),p=(null==h?void 0:h.ownerDocument)??(null==globalThis?void 0:globalThis.document),[,f]=s.useState({}),g=Me(t,e=>m(e)),x=Array.from(d.layers),[v]=[...d.layersWithOutsidePointerEventsDisabled].slice(-1),y=x.indexOf(v),b=h?x.indexOf(h):-1,w=d.layersWithOutsidePointerEventsDisabled.size>0,j=b>=y,N=function(e,t=(null==globalThis?void 0:globalThis.document)){const n=Ge(e),a=s.useRef(!1),r=s.useRef(()=>{});return s.useEffect(()=>{const e=e=>{if(e.target&&!a.current){let s=function(){nt(Qe,n,a,{discrete:!0})};const a={originalEvent:e};"touch"===e.pointerType?(t.removeEventListener("click",r.current),r.current=s,t.addEventListener("click",r.current,{once:!0})):s()}else t.removeEventListener("click",r.current);a.current=!1},s=window.setTimeout(()=>{t.addEventListener("pointerdown",e)},0);return()=>{window.clearTimeout(s),t.removeEventListener("pointerdown",e),t.removeEventListener("click",r.current)}},[t,n]),{onPointerDownCapture:()=>a.current=!0}}(e=>{const t=e.target,s=[...d.branches].some(e=>e.contains(t));j&&!s&&(null==r||r(e),null==o||o(e),e.defaultPrevented||null==l||l())},p),S=function(e,t=(null==globalThis?void 0:globalThis.document)){const n=Ge(e),a=s.useRef(!1);return s.useEffect(()=>{const e=e=>{if(e.target&&!a.current){nt(Xe,n,{originalEvent:e},{discrete:!1})}};return t.addEventListener("focusin",e),()=>t.removeEventListener("focusin",e)},[t,n]),{onFocusCapture:()=>a.current=!0,onBlurCapture:()=>a.current=!1}}(e=>{const t=e.target;[...d.branches].some(e=>e.contains(t))||(null==i||i(e),null==o||o(e),e.defaultPrevented||null==l||l())},p);return function(e,t=(null==globalThis?void 0:globalThis.document)){const n=Ge(e);s.useEffect(()=>{const e=e=>{"Escape"===e.key&&n(e)};return t.addEventListener("keydown",e,{capture:!0}),()=>t.removeEventListener("keydown",e,{capture:!0})},[n,t])}(e=>{b===d.layers.size-1&&(null==a||a(e),!e.defaultPrevented&&l&&(e.preventDefault(),l()))},p),s.useEffect(()=>{if(h)return n&&(0===d.layersWithOutsidePointerEventsDisabled.size&&(Je=p.body.style.pointerEvents,p.body.style.pointerEvents="none"),d.layersWithOutsidePointerEventsDisabled.add(h)),d.layers.add(h),st(),()=>{n&&1===d.layersWithOutsidePointerEventsDisabled.size&&(p.body.style.pointerEvents=Je)}},[h,p,n,d]),s.useEffect(()=>()=>{h&&(d.layers.delete(h),d.layersWithOutsidePointerEventsDisabled.delete(h),st())},[h,d]),s.useEffect(()=>{const e=()=>f({});return document.addEventListener(Ye,e),()=>document.removeEventListener(Ye,e)},[]),u.jsx(Ke.div,{...c,ref:g,style:{pointerEvents:w?j?"auto":"none":void 0,...e.style},onFocusCapture:Ae(e.onFocusCapture,S.onFocusCapture),onBlurCapture:Ae(e.onBlurCapture,S.onBlurCapture),onPointerDownCapture:Ae(e.onPointerDownCapture,N.onPointerDownCapture)})});et.displayName="DismissableLayer";var tt=s.forwardRef((e,t)=>{const n=s.useContext(Ze),a=s.useRef(null),r=Me(t,a);return s.useEffect(()=>{const e=a.current;if(e)return n.branches.add(e),()=>{n.branches.delete(e)}},[n.branches]),u.jsx(Ke.div,{...e,ref:r})});function st(){const e=new CustomEvent(Ye);document.dispatchEvent(e)}function nt(e,t,s,{discrete:n}){const a=s.originalEvent.target,r=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:s});t&&a.addEventListener(e,t,{once:!0}),n?Ve(a,r):a.dispatchEvent(r)}tt.displayName="DismissableLayerBranch";var at=et,rt=tt,it=(null==globalThis?void 0:globalThis.document)?s.useLayoutEffect:()=>{},ot=s.forwardRef((e,t)=>{var n;const{container:a,...i}=e,[o,l]=s.useState(!1);it(()=>l(!0),[]);const c=a||o&&(null==(n=null==globalThis?void 0:globalThis.document)?void 0:n.body);return c?r.createPortal(u.jsx(Ke.div,{...i,ref:t}),c):null});ot.displayName="Portal";var lt=e=>{const{present:t,children:n}=e,a=function(e){const[t,n]=s.useState(),a=s.useRef(null),r=s.useRef(e),i=s.useRef("none"),o=e?"mounted":"unmounted",[l,c]=function(e,t){return s.useReducer((e,s)=>t[e][s]??e,e)}(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return s.useEffect(()=>{const e=ct(a.current);i.current="mounted"===l?e:"none"},[l]),it(()=>{const t=a.current,s=r.current;if(s!==e){const n=i.current,a=ct(t);if(e)c("MOUNT");else if("none"===a||"none"===(null==t?void 0:t.display))c("UNMOUNT");else{c(s&&n!==a?"ANIMATION_OUT":"UNMOUNT")}r.current=e}},[e,c]),it(()=>{if(t){let e;const s=t.ownerDocument.defaultView??window,n=n=>{const i=ct(a.current).includes(n.animationName);if(n.target===t&&i&&(c("ANIMATION_END"),!r.current)){const n=t.style.animationFillMode;t.style.animationFillMode="forwards",e=s.setTimeout(()=>{"forwards"===t.style.animationFillMode&&(t.style.animationFillMode=n)})}},o=e=>{e.target===t&&(i.current=ct(a.current))};return t.addEventListener("animationstart",o),t.addEventListener("animationcancel",n),t.addEventListener("animationend",n),()=>{s.clearTimeout(e),t.removeEventListener("animationstart",o),t.removeEventListener("animationcancel",n),t.removeEventListener("animationend",n)}}c("ANIMATION_END")},[t,c]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:s.useCallback(e=>{a.current=e?getComputedStyle(e):null,n(e)},[])}}(t),r="function"==typeof n?n({present:a.isPresent}):s.Children.only(n),i=Me(a.ref,function(e){var t,s;let n=null==(t=Object.getOwnPropertyDescriptor(e.props,"ref"))?void 0:t.get,a=n&&"isReactWarning"in n&&n.isReactWarning;if(a)return e.ref;if(n=null==(s=Object.getOwnPropertyDescriptor(e,"ref"))?void 0:s.get,a=n&&"isReactWarning"in n&&n.isReactWarning,a)return e.props.ref;return e.props.ref||e.ref}(r));return"function"==typeof n||a.isPresent?s.cloneElement(r,{ref:i}):null};function ct(e){return(null==e?void 0:e.animationName)||"none"}lt.displayName="Presence";var dt=i[" useInsertionEffect ".trim().toString()]||it;function ut({prop:e,defaultProp:t,onChange:n=()=>{},caller:a}){const[r,i,o]=function({defaultProp:e,onChange:t}){const[n,a]=s.useState(e),r=s.useRef(n),i=s.useRef(t);return dt(()=>{i.current=t},[t]),s.useEffect(()=>{var e;r.current!==n&&(null==(e=i.current)||e.call(i,n),r.current=n)},[n,r]),[n,a,i]}({defaultProp:t,onChange:n}),l=void 0!==e,c=l?e:r;{const t=s.useRef(void 0!==e);s.useEffect(()=>{const e=t.current;if(e!==l){}t.current=l},[l,a])}const d=s.useCallback(t=>{var s;if(l){const n=function(e){return"function"==typeof e}(t)?t(e):t;n!==e&&(null==(s=o.current)||s.call(o,n))}else i(t)},[l,e,i,o]);return[c,d]}var ht=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),mt=s.forwardRef((e,t)=>u.jsx(Ke.span,{...e,ref:t,style:{...ht,...e.style}}));mt.displayName="VisuallyHidden";var pt=mt;function ft(e){var t,s,n="";if("string"==typeof e||"number"==typeof e)n+=e;else if("object"==typeof e)if(Array.isArray(e)){var a=e.length;for(t=0;t<a;t++)e[t]&&(s=ft(e[t]))&&(n&&(n+=" "),n+=s)}else for(s in e)e[s]&&(n&&(n+=" "),n+=s);return n}function gt(){for(var e,t,s=0,n="",a=arguments.length;s<a;s++)(e=arguments[s])&&(t=ft(e))&&(n&&(n+=" "),n+=t);return n}const xt=e=>"boolean"==typeof e?`${e}`:0===e?"0":e,vt=gt,yt=(e,t)=>s=>{var n;if(null==(null==t?void 0:t.variants))return vt(e,null==s?void 0:s.class,null==s?void 0:s.className);const{variants:a,defaultVariants:r}=t,i=Object.keys(a).map(e=>{const t=null==s?void 0:s[e],n=null==r?void 0:r[e];if(null===t)return null;const i=xt(t)||xt(n);return a[e][i]}),o=s&&Object.entries(s).reduce((e,t)=>{let[s,n]=t;return void 0===n||(e[s]=n),e},{}),l=null==t||null===(n=t.compoundVariants)||void 0===n?void 0:n.reduce((e,t)=>{let{class:s,className:n,...a}=t;return Object.entries(a).every(e=>{let[t,s]=e;return Array.isArray(s)?s.includes({...r,...o}[t]):{...r,...o}[t]===s})?[...e,s,n]:e},[]);return vt(e,i,l,null==s?void 0:s.class,null==s?void 0:s.className)},bt=e=>{const t=St(e),{conflictingClassGroups:s,conflictingClassGroupModifiers:n}=e;return{getClassGroupId:e=>{const s=e.split("-");return""===s[0]&&1!==s.length&&s.shift(),wt(s,t)||Nt(e)},getConflictingClassGroupIds:(e,t)=>{const a=s[e]||[];return t&&n[e]?[...a,...n[e]]:a}}},wt=(e,t)=>{var s;if(0===e.length)return t.classGroupId;const n=e[0],a=t.nextPart.get(n),r=a?wt(e.slice(1),a):void 0;if(r)return r;if(0===t.validators.length)return;const i=e.join("-");return null==(s=t.validators.find(({validator:e})=>e(i)))?void 0:s.classGroupId},jt=/^\[(.+)\]$/,Nt=e=>{if(jt.test(e)){const t=jt.exec(e)[1],s=null==t?void 0:t.substring(0,t.indexOf(":"));if(s)return"arbitrary.."+s}},St=e=>{const{theme:t,prefix:s}=e,n={nextPart:new Map,validators:[]};return Et(Object.entries(e.classGroups),s).forEach(([e,s])=>{_t(s,n,e,t)}),n},_t=(e,t,s,n)=>{e.forEach(e=>{if("string"==typeof e){return void((""===e?t:kt(t,e)).classGroupId=s)}if("function"==typeof e)return Ct(e)?void _t(e(n),t,s,n):void t.validators.push({validator:e,classGroupId:s});Object.entries(e).forEach(([e,a])=>{_t(a,kt(t,e),s,n)})})},kt=(e,t)=>{let s=e;return t.split("-").forEach(e=>{s.nextPart.has(e)||s.nextPart.set(e,{nextPart:new Map,validators:[]}),s=s.nextPart.get(e)}),s},Ct=e=>e.isThemeGetter,Et=(e,t)=>t?e.map(([e,s])=>[e,s.map(e=>"string"==typeof e?t+e:"object"==typeof e?Object.fromEntries(Object.entries(e).map(([e,s])=>[t+e,s])):e)]):e,Tt=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,s=new Map,n=new Map;const a=(a,r)=>{s.set(a,r),t++,t>e&&(t=0,n=s,s=new Map)};return{get(e){let t=s.get(e);return void 0!==t?t:void 0!==(t=n.get(e))?(a(e,t),t):void 0},set(e,t){s.has(e)?s.set(e,t):a(e,t)}}},Rt=e=>{const{separator:t,experimentalParseClassName:s}=e,n=1===t.length,a=t[0],r=t.length,i=e=>{const s=[];let i,o=0,l=0;for(let u=0;u<e.length;u++){let c=e[u];if(0===o){if(c===a&&(n||e.slice(u,u+r)===t)){s.push(e.slice(l,u)),l=u+r;continue}if("/"===c){i=u;continue}}"["===c?o++:"]"===c&&o--}const c=0===s.length?e:e.substring(l),d=c.startsWith("!");return{modifiers:s,hasImportantModifier:d,baseClassName:d?c.substring(1):c,maybePostfixModifierPosition:i&&i>l?i-l:void 0}};return s?e=>s({className:e,parseClassName:i}):i},Pt=e=>{if(e.length<=1)return e;const t=[];let s=[];return e.forEach(e=>{"["===e[0]?(t.push(...s.sort(),e),s=[]):s.push(e)}),t.push(...s.sort()),t},Dt=/\s+/;function At(){let e,t,s=0,n="";for(;s<arguments.length;)(e=arguments[s++])&&(t=Ot(e))&&(n&&(n+=" "),n+=t);return n}const Ot=e=>{if("string"==typeof e)return e;let t,s="";for(let n=0;n<e.length;n++)e[n]&&(t=Ot(e[n]))&&(s&&(s+=" "),s+=t);return s};function It(e,...t){let s,n,a,r=function(o){const l=t.reduce((e,t)=>t(e),e());return s=(e=>({cache:Tt(e.cacheSize),parseClassName:Rt(e),...bt(e)}))(l),n=s.cache.get,a=s.cache.set,r=i,i(o)};function i(e){const t=n(e);if(t)return t;const r=((e,t)=>{const{parseClassName:s,getClassGroupId:n,getConflictingClassGroupIds:a}=t,r=[],i=e.trim().split(Dt);let o="";for(let l=i.length-1;l>=0;l-=1){const e=i[l],{modifiers:t,hasImportantModifier:c,baseClassName:d,maybePostfixModifierPosition:u}=s(e);let h=Boolean(u),m=n(h?d.substring(0,u):d);if(!m){if(!h){o=e+(o.length>0?" "+o:o);continue}if(m=n(d),!m){o=e+(o.length>0?" "+o:o);continue}h=!1}const p=Pt(t).join(":"),f=c?p+"!":p,g=f+m;if(r.includes(g))continue;r.push(g);const x=a(m,h);for(let s=0;s<x.length;++s){const e=x[s];r.push(f+e)}o=e+(o.length>0?" "+o:o)}return o})(e,s);return a(e,r),r}return function(){return r(At.apply(null,arguments))}}const Mt=e=>{const t=t=>t[e]||[];return t.isThemeGetter=!0,t},Lt=/^\[(?:([a-z-]+):)?(.+)\]$/i,$t=/^\d+\/\d+$/,Ut=new Set(["px","full","screen"]),Ft=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,qt=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,zt=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,Bt=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,Wt=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Ht=e=>Vt(e)||Ut.has(e)||$t.test(e),Kt=e=>is(e,"length",os),Vt=e=>Boolean(e)&&!Number.isNaN(Number(e)),Gt=e=>is(e,"number",Vt),Jt=e=>Boolean(e)&&Number.isInteger(Number(e)),Yt=e=>e.endsWith("%")&&Vt(e.slice(0,-1)),Qt=e=>Lt.test(e),Xt=e=>Ft.test(e),Zt=new Set(["length","size","percentage"]),es=e=>is(e,Zt,ls),ts=e=>is(e,"position",ls),ss=new Set(["image","url"]),ns=e=>is(e,ss,ds),as=e=>is(e,"",cs),rs=()=>!0,is=(e,t,s)=>{const n=Lt.exec(e);return!!n&&(n[1]?"string"==typeof t?n[1]===t:t.has(n[1]):s(n[2]))},os=e=>qt.test(e)&&!zt.test(e),ls=()=>!1,cs=e=>Bt.test(e),ds=e=>Wt.test(e),us=It(()=>{const e=Mt("colors"),t=Mt("spacing"),s=Mt("blur"),n=Mt("brightness"),a=Mt("borderColor"),r=Mt("borderRadius"),i=Mt("borderSpacing"),o=Mt("borderWidth"),l=Mt("contrast"),c=Mt("grayscale"),d=Mt("hueRotate"),u=Mt("invert"),h=Mt("gap"),m=Mt("gradientColorStops"),p=Mt("gradientColorStopPositions"),f=Mt("inset"),g=Mt("margin"),x=Mt("opacity"),v=Mt("padding"),y=Mt("saturate"),b=Mt("scale"),w=Mt("sepia"),j=Mt("skew"),N=Mt("space"),S=Mt("translate"),_=()=>["auto",Qt,t],k=()=>[Qt,t],C=()=>["",Ht,Kt],E=()=>["auto",Vt,Qt],T=()=>["","0",Qt],R=()=>[Vt,Qt];return{cacheSize:500,separator:":",theme:{colors:[rs],spacing:[Ht,Kt],blur:["none","",Xt,Qt],brightness:R(),borderColor:[e],borderRadius:["none","","full",Xt,Qt],borderSpacing:k(),borderWidth:C(),contrast:R(),grayscale:T(),hueRotate:R(),invert:T(),gap:k(),gradientColorStops:[e],gradientColorStopPositions:[Yt,Kt],inset:_(),margin:_(),opacity:R(),padding:k(),saturate:R(),scale:R(),sepia:T(),skew:R(),space:k(),translate:k()},classGroups:{aspect:[{aspect:["auto","square","video",Qt]}],container:["container"],columns:[{columns:[Xt]}],"break-after":[{"break-after":["auto","avoid","all","avoid-page","page","left","right","column"]}],"break-before":[{"break-before":["auto","avoid","all","avoid-page","page","left","right","column"]}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top",Qt]}],overflow:[{overflow:["auto","hidden","clip","visible","scroll"]}],"overflow-x":[{"overflow-x":["auto","hidden","clip","visible","scroll"]}],"overflow-y":[{"overflow-y":["auto","hidden","clip","visible","scroll"]}],overscroll:[{overscroll:["auto","contain","none"]}],"overscroll-x":[{"overscroll-x":["auto","contain","none"]}],"overscroll-y":[{"overscroll-y":["auto","contain","none"]}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[f]}],"inset-x":[{"inset-x":[f]}],"inset-y":[{"inset-y":[f]}],start:[{start:[f]}],end:[{end:[f]}],top:[{top:[f]}],right:[{right:[f]}],bottom:[{bottom:[f]}],left:[{left:[f]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Jt,Qt]}],basis:[{basis:_()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",Qt]}],grow:[{grow:T()}],shrink:[{shrink:T()}],order:[{order:["first","last","none",Jt,Qt]}],"grid-cols":[{"grid-cols":[rs]}],"col-start-end":[{col:["auto",{span:["full",Jt,Qt]},Qt]}],"col-start":[{"col-start":E()}],"col-end":[{"col-end":E()}],"grid-rows":[{"grid-rows":[rs]}],"row-start-end":[{row:["auto",{span:[Jt,Qt]},Qt]}],"row-start":[{"row-start":E()}],"row-end":[{"row-end":E()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",Qt]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",Qt]}],gap:[{gap:[h]}],"gap-x":[{"gap-x":[h]}],"gap-y":[{"gap-y":[h]}],"justify-content":[{justify:["normal","start","end","center","between","around","evenly","stretch"]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal","start","end","center","between","around","evenly","stretch","baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":["start","end","center","between","around","evenly","stretch","baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[v]}],px:[{px:[v]}],py:[{py:[v]}],ps:[{ps:[v]}],pe:[{pe:[v]}],pt:[{pt:[v]}],pr:[{pr:[v]}],pb:[{pb:[v]}],pl:[{pl:[v]}],m:[{m:[g]}],mx:[{mx:[g]}],my:[{my:[g]}],ms:[{ms:[g]}],me:[{me:[g]}],mt:[{mt:[g]}],mr:[{mr:[g]}],mb:[{mb:[g]}],ml:[{ml:[g]}],"space-x":[{"space-x":[N]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[N]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",Qt,t]}],"min-w":[{"min-w":[Qt,t,"min","max","fit"]}],"max-w":[{"max-w":[Qt,t,"none","full","min","max","fit","prose",{screen:[Xt]},Xt]}],h:[{h:[Qt,t,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[Qt,t,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[Qt,t,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[Qt,t,"auto","min","max","fit"]}],"font-size":[{text:["base",Xt,Kt]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",Gt]}],"font-family":[{font:[rs]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",Qt]}],"line-clamp":[{"line-clamp":["none",Vt,Gt]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Ht,Qt]}],"list-image":[{"list-image":["none",Qt]}],"list-style-type":[{list:["none","disc","decimal",Qt]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[x]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[x]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:["solid","dashed","dotted","double","none","wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Ht,Kt]}],"underline-offset":[{"underline-offset":["auto",Ht,Qt]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:k()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Qt]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Qt]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[x]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top",ts]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",es]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},ns]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[p]}],"gradient-via-pos":[{via:[p]}],"gradient-to-pos":[{to:[p]}],"gradient-from":[{from:[m]}],"gradient-via":[{via:[m]}],"gradient-to":[{to:[m]}],rounded:[{rounded:[r]}],"rounded-s":[{"rounded-s":[r]}],"rounded-e":[{"rounded-e":[r]}],"rounded-t":[{"rounded-t":[r]}],"rounded-r":[{"rounded-r":[r]}],"rounded-b":[{"rounded-b":[r]}],"rounded-l":[{"rounded-l":[r]}],"rounded-ss":[{"rounded-ss":[r]}],"rounded-se":[{"rounded-se":[r]}],"rounded-ee":[{"rounded-ee":[r]}],"rounded-es":[{"rounded-es":[r]}],"rounded-tl":[{"rounded-tl":[r]}],"rounded-tr":[{"rounded-tr":[r]}],"rounded-br":[{"rounded-br":[r]}],"rounded-bl":[{"rounded-bl":[r]}],"border-w":[{border:[o]}],"border-w-x":[{"border-x":[o]}],"border-w-y":[{"border-y":[o]}],"border-w-s":[{"border-s":[o]}],"border-w-e":[{"border-e":[o]}],"border-w-t":[{"border-t":[o]}],"border-w-r":[{"border-r":[o]}],"border-w-b":[{"border-b":[o]}],"border-w-l":[{"border-l":[o]}],"border-opacity":[{"border-opacity":[x]}],"border-style":[{border:["solid","dashed","dotted","double","none","hidden"]}],"divide-x":[{"divide-x":[o]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[o]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[x]}],"divide-style":[{divide:["solid","dashed","dotted","double","none"]}],"border-color":[{border:[a]}],"border-color-x":[{"border-x":[a]}],"border-color-y":[{"border-y":[a]}],"border-color-s":[{"border-s":[a]}],"border-color-e":[{"border-e":[a]}],"border-color-t":[{"border-t":[a]}],"border-color-r":[{"border-r":[a]}],"border-color-b":[{"border-b":[a]}],"border-color-l":[{"border-l":[a]}],"divide-color":[{divide:[a]}],"outline-style":[{outline:["","solid","dashed","dotted","double","none"]}],"outline-offset":[{"outline-offset":[Ht,Qt]}],"outline-w":[{outline:[Ht,Kt]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:C()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[x]}],"ring-offset-w":[{"ring-offset":[Ht,Kt]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",Xt,as]}],"shadow-color":[{shadow:[rs]}],opacity:[{opacity:[x]}],"mix-blend":[{"mix-blend":["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity","plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"]}],filter:[{filter:["","none"]}],blur:[{blur:[s]}],brightness:[{brightness:[n]}],contrast:[{contrast:[l]}],"drop-shadow":[{"drop-shadow":["","none",Xt,Qt]}],grayscale:[{grayscale:[c]}],"hue-rotate":[{"hue-rotate":[d]}],invert:[{invert:[u]}],saturate:[{saturate:[y]}],sepia:[{sepia:[w]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[s]}],"backdrop-brightness":[{"backdrop-brightness":[n]}],"backdrop-contrast":[{"backdrop-contrast":[l]}],"backdrop-grayscale":[{"backdrop-grayscale":[c]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[d]}],"backdrop-invert":[{"backdrop-invert":[u]}],"backdrop-opacity":[{"backdrop-opacity":[x]}],"backdrop-saturate":[{"backdrop-saturate":[y]}],"backdrop-sepia":[{"backdrop-sepia":[w]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[i]}],"border-spacing-x":[{"border-spacing-x":[i]}],"border-spacing-y":[{"border-spacing-y":[i]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",Qt]}],duration:[{duration:R()}],ease:[{ease:["linear","in","out","in-out",Qt]}],delay:[{delay:R()}],animate:[{animate:["none","spin","ping","pulse","bounce",Qt]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[b]}],"scale-x":[{"scale-x":[b]}],"scale-y":[{"scale-y":[b]}],rotate:[{rotate:[Jt,Qt]}],"translate-x":[{"translate-x":[S]}],"translate-y":[{"translate-y":[S]}],"skew-x":[{"skew-x":[j]}],"skew-y":[{"skew-y":[j]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Qt]}],accent:[{accent:["auto",e]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Qt]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":k()}],"scroll-mx":[{"scroll-mx":k()}],"scroll-my":[{"scroll-my":k()}],"scroll-ms":[{"scroll-ms":k()}],"scroll-me":[{"scroll-me":k()}],"scroll-mt":[{"scroll-mt":k()}],"scroll-mr":[{"scroll-mr":k()}],"scroll-mb":[{"scroll-mb":k()}],"scroll-ml":[{"scroll-ml":k()}],"scroll-p":[{"scroll-p":k()}],"scroll-px":[{"scroll-px":k()}],"scroll-py":[{"scroll-py":k()}],"scroll-ps":[{"scroll-ps":k()}],"scroll-pe":[{"scroll-pe":k()}],"scroll-pt":[{"scroll-pt":k()}],"scroll-pr":[{"scroll-pr":k()}],"scroll-pb":[{"scroll-pb":k()}],"scroll-pl":[{"scroll-pl":k()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Qt]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[Ht,Kt,Gt]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}});function hs(...e){return us(gt(e))}var ms=Array(12).fill(0),ps=({visible:e,className:t})=>n.createElement("div",{className:["sonner-loading-wrapper",t].filter(Boolean).join(" "),"data-visible":e},n.createElement("div",{className:"sonner-spinner"},ms.map((e,t)=>n.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${t}`})))),fs=n.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},n.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),gs=n.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},n.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),xs=n.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},n.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),vs=n.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},n.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),ys=n.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},n.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),n.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),bs=1,ws=new class{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{let t=this.subscribers.indexOf(e);this.subscribers.splice(t,1)}),this.publish=e=>{this.subscribers.forEach(t=>t(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var t;let{message:s,...n}=e,a="number"==typeof(null==e?void 0:e.id)||(null==(t=e.id)?void 0:t.length)>0?e.id:bs++,r=this.toasts.find(e=>e.id===a),i=void 0===e.dismissible||e.dismissible;return this.dismissedToasts.has(a)&&this.dismissedToasts.delete(a),r?this.toasts=this.toasts.map(t=>t.id===a?(this.publish({...t,...e,id:a,title:s}),{...t,...e,id:a,dismissible:i,title:s}):t):this.addToast({title:s,...n,dismissible:i,id:a}),a},this.dismiss=e=>(this.dismissedToasts.add(e),e||this.toasts.forEach(e=>{this.subscribers.forEach(t=>t({id:e.id,dismiss:!0}))}),this.subscribers.forEach(t=>t({id:e,dismiss:!0})),e),this.message=(e,t)=>this.create({...t,message:e}),this.error=(e,t)=>this.create({...t,message:e,type:"error"}),this.success=(e,t)=>this.create({...t,type:"success",message:e}),this.info=(e,t)=>this.create({...t,type:"info",message:e}),this.warning=(e,t)=>this.create({...t,type:"warning",message:e}),this.loading=(e,t)=>this.create({...t,type:"loading",message:e}),this.promise=(e,t)=>{if(!t)return;let s;void 0!==t.loading&&(s=this.create({...t,promise:e,type:"loading",message:t.loading,description:"function"!=typeof t.description?t.description:void 0}));let a,r=e instanceof Promise?e:e(),i=void 0!==s,o=r.then(async e=>{if(a=["resolve",e],n.isValidElement(e))i=!1,this.create({id:s,type:"default",message:e});else if(js(e)&&!e.ok){i=!1;let n="function"==typeof t.error?await t.error(`HTTP error! status: ${e.status}`):t.error,a="function"==typeof t.description?await t.description(`HTTP error! status: ${e.status}`):t.description;this.create({id:s,type:"error",message:n,description:a})}else if(void 0!==t.success){i=!1;let n="function"==typeof t.success?await t.success(e):t.success,a="function"==typeof t.description?await t.description(e):t.description;this.create({id:s,type:"success",message:n,description:a})}}).catch(async e=>{if(a=["reject",e],void 0!==t.error){i=!1;let n="function"==typeof t.error?await t.error(e):t.error,a="function"==typeof t.description?await t.description(e):t.description;this.create({id:s,type:"error",message:n,description:a})}}).finally(()=>{var e;i&&(this.dismiss(s),s=void 0),null==(e=t.finally)||e.call(t)}),l=()=>new Promise((e,t)=>o.then(()=>"reject"===a[0]?t(a[1]):e(a[1])).catch(t));return"string"!=typeof s&&"number"!=typeof s?{unwrap:l}:Object.assign(s,{unwrap:l})},this.custom=(e,t)=>{let s=(null==t?void 0:t.id)||bs++;return this.create({jsx:e(s),id:s,...t}),s},this.getActiveToasts=()=>this.toasts.filter(e=>!this.dismissedToasts.has(e.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}},js=e=>e&&"object"==typeof e&&"ok"in e&&"boolean"==typeof e.ok&&"status"in e&&"number"==typeof e.status,Ns=(e,t)=>{let s=(null==t?void 0:t.id)||bs++;return ws.addToast({title:e,...t,id:s}),s},Ss=Object.assign(Ns,{success:ws.success,info:ws.info,warning:ws.warning,error:ws.error,custom:ws.custom,message:ws.message,promise:ws.promise,dismiss:ws.dismiss,loading:ws.loading},{getHistory:()=>ws.toasts,getToasts:()=>ws.getActiveToasts()});function _s(e){return void 0!==e.label}!function(e,{insertAt:t}={}){if("undefined"==typeof document)return;let s=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css","top"===t&&s.firstChild?s.insertBefore(n,s.firstChild):s.appendChild(n),n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e))}(':where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999;transition:transform .4s ease}:where([data-sonner-toaster][data-lifted="true"]){transform:translateY(-10px)}@media (hover: none) and (pointer: coarse){:where([data-sonner-toaster][data-lifted="true"]){transform:none}}:where([data-sonner-toaster][data-x-position="right"]){right:var(--offset-right)}:where([data-sonner-toaster][data-x-position="left"]){left:var(--offset-left)}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:var(--offset-top)}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:var(--offset-bottom)}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast] [data-close-button]{background:var(--gray1)}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:-50%;right:-50%;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y, 0px)) translate(var(--swipe-amount-x, 0px));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-bg-hover: hsl(0, 0%, 12%);--normal-border: hsl(0, 0%, 20%);--normal-border-hover: hsl(0, 0%, 25%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}\n');var ks=3,Cs=14;function Es(...e){return e.filter(Boolean).join(" ")}var Ts=e=>{var t,a,r,i,o,l,c,d,u,h,m;let{invert:p,toast:f,unstyled:g,interacting:x,setHeights:v,visibleToasts:y,heights:b,index:w,toasts:j,expanded:N,removeToast:S,defaultRichColors:_,closeButton:k,style:C,cancelButtonStyle:E,actionButtonStyle:T,className:R="",descriptionClassName:P="",duration:D,position:A,gap:O,loadingIcon:I,expandByDefault:M,classNames:L,icons:$,closeButtonAriaLabel:U="Close toast",pauseWhenPageIsHidden:F}=e,[q,z]=n.useState(null),[B,W]=n.useState(null),[H,K]=n.useState(!1),[V,G]=n.useState(!1),[J,Y]=n.useState(!1),[Q,X]=n.useState(!1),[Z,ee]=n.useState(!1),[te,se]=n.useState(0),[ne,ae]=n.useState(0),re=n.useRef(f.duration||D||4e3),ie=n.useRef(null),oe=n.useRef(null),le=0===w,ce=w+1<=y,de=f.type,ue=!1!==f.dismissible,he=f.className||"",me=f.descriptionClassName||"",pe=n.useMemo(()=>b.findIndex(e=>e.toastId===f.id)||0,[b,f.id]),fe=n.useMemo(()=>{var e;return null!=(e=f.closeButton)?e:k},[f.closeButton,k]),ge=n.useMemo(()=>f.duration||D||4e3,[f.duration,D]),xe=n.useRef(0),ve=n.useRef(0),ye=n.useRef(0),be=n.useRef(null),[we,je]=A.split("-"),Ne=n.useMemo(()=>b.reduce((e,t,s)=>s>=pe?e:e+t.height,0),[b,pe]),Se=(()=>{let[e,t]=n.useState(document.hidden);return n.useEffect(()=>{let e=()=>{t(document.hidden)};return document.addEventListener("visibilitychange",e),()=>window.removeEventListener("visibilitychange",e)},[]),e})(),_e=f.invert||p,ke="loading"===de;ve.current=n.useMemo(()=>pe*O+Ne,[pe,Ne]),n.useEffect(()=>{re.current=ge},[ge]),n.useEffect(()=>{K(!0)},[]),n.useEffect(()=>{let e=oe.current;if(e){let t=e.getBoundingClientRect().height;return ae(t),v(e=>[{toastId:f.id,height:t,position:f.position},...e]),()=>v(e=>e.filter(e=>e.toastId!==f.id))}},[v,f.id]),n.useLayoutEffect(()=>{if(!H)return;let e=oe.current,t=e.style.height;e.style.height="auto";let s=e.getBoundingClientRect().height;e.style.height=t,ae(s),v(e=>e.find(e=>e.toastId===f.id)?e.map(e=>e.toastId===f.id?{...e,height:s}:e):[{toastId:f.id,height:s,position:f.position},...e])},[H,f.title,f.description,v,f.id]);let Ce=n.useCallback(()=>{G(!0),se(ve.current),v(e=>e.filter(e=>e.toastId!==f.id)),setTimeout(()=>{S(f)},200)},[f,S,v,ve]);return n.useEffect(()=>{if(f.promise&&"loading"===de||f.duration===1/0||"loading"===f.type)return;let e;return N||x||F&&Se?(()=>{if(ye.current<xe.current){let e=(new Date).getTime()-xe.current;re.current=re.current-e}ye.current=(new Date).getTime()})():re.current!==1/0&&(xe.current=(new Date).getTime(),e=setTimeout(()=>{var e;null==(e=f.onAutoClose)||e.call(f,f),Ce()},re.current)),()=>clearTimeout(e)},[N,x,f,de,F,Se,Ce]),n.useEffect(()=>{f.delete&&Ce()},[Ce,f.delete]),n.createElement("li",{tabIndex:0,ref:oe,className:Es(R,he,null==L?void 0:L.toast,null==(t=null==f?void 0:f.classNames)?void 0:t.toast,null==L?void 0:L.default,null==L?void 0:L[de],null==(a=null==f?void 0:f.classNames)?void 0:a[de]),"data-sonner-toast":"","data-rich-colors":null!=(r=f.richColors)?r:_,"data-styled":!(f.jsx||f.unstyled||g),"data-mounted":H,"data-promise":!!f.promise,"data-swiped":Z,"data-removed":V,"data-visible":ce,"data-y-position":we,"data-x-position":je,"data-index":w,"data-front":le,"data-swiping":J,"data-dismissible":ue,"data-type":de,"data-invert":_e,"data-swipe-out":Q,"data-swipe-direction":B,"data-expanded":!!(N||M&&H),style:{"--index":w,"--toasts-before":w,"--z-index":j.length-w,"--offset":`${V?te:ve.current}px`,"--initial-height":M?"auto":`${ne}px`,...C,...f.style},onDragEnd:()=>{Y(!1),z(null),be.current=null},onPointerDown:e=>{ke||!ue||(ie.current=new Date,se(ve.current),e.target.setPointerCapture(e.pointerId),"BUTTON"!==e.target.tagName&&(Y(!0),be.current={x:e.clientX,y:e.clientY}))},onPointerUp:()=>{var e,t,s,n;if(Q||!ue)return;be.current=null;let a=Number((null==(e=oe.current)?void 0:e.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),r=Number((null==(t=oe.current)?void 0:t.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),i=(new Date).getTime()-(null==(s=ie.current)?void 0:s.getTime()),o="x"===q?a:r,l=Math.abs(o)/i;if(Math.abs(o)>=20||l>.11)return se(ve.current),null==(n=f.onDismiss)||n.call(f,f),W("x"===q?a>0?"right":"left":r>0?"down":"up"),Ce(),X(!0),void ee(!1);Y(!1),z(null)},onPointerMove:t=>{var s,n,a,r;if(!be.current||!ue||(null==(s=window.getSelection())?void 0:s.toString().length)>0)return;let i=t.clientY-be.current.y,o=t.clientX-be.current.x,l=null!=(n=e.swipeDirections)?n:function(e){let[t,s]=e.split("-"),n=[];return t&&n.push(t),s&&n.push(s),n}(A);!q&&(Math.abs(o)>1||Math.abs(i)>1)&&z(Math.abs(o)>Math.abs(i)?"x":"y");let c={x:0,y:0};"y"===q?(l.includes("top")||l.includes("bottom"))&&(l.includes("top")&&i<0||l.includes("bottom")&&i>0)&&(c.y=i):"x"===q&&(l.includes("left")||l.includes("right"))&&(l.includes("left")&&o<0||l.includes("right")&&o>0)&&(c.x=o),(Math.abs(c.x)>0||Math.abs(c.y)>0)&&ee(!0),null==(a=oe.current)||a.style.setProperty("--swipe-amount-x",`${c.x}px`),null==(r=oe.current)||r.style.setProperty("--swipe-amount-y",`${c.y}px`)}},fe&&!f.jsx?n.createElement("button",{"aria-label":U,"data-disabled":ke,"data-close-button":!0,onClick:ke||!ue?()=>{}:()=>{var e;Ce(),null==(e=f.onDismiss)||e.call(f,f)},className:Es(null==L?void 0:L.closeButton,null==(i=null==f?void 0:f.classNames)?void 0:i.closeButton)},null!=(o=null==$?void 0:$.close)?o:ys):null,f.jsx||s.isValidElement(f.title)?f.jsx?f.jsx:"function"==typeof f.title?f.title():f.title:n.createElement(n.Fragment,null,de||f.icon||f.promise?n.createElement("div",{"data-icon":"",className:Es(null==L?void 0:L.icon,null==(l=null==f?void 0:f.classNames)?void 0:l.icon)},f.promise||"loading"===f.type&&!f.icon?f.icon||(null!=$&&$.loading?n.createElement("div",{className:Es(null==L?void 0:L.loader,null==(Ee=null==f?void 0:f.classNames)?void 0:Ee.loader,"sonner-loader"),"data-visible":"loading"===de},$.loading):I?n.createElement("div",{className:Es(null==L?void 0:L.loader,null==(Te=null==f?void 0:f.classNames)?void 0:Te.loader,"sonner-loader"),"data-visible":"loading"===de},I):n.createElement(ps,{className:Es(null==L?void 0:L.loader,null==(Re=null==f?void 0:f.classNames)?void 0:Re.loader),visible:"loading"===de})):null,"loading"!==f.type?f.icon||(null==$?void 0:$[de])||(e=>{switch(e){case"success":return fs;case"info":return xs;case"warning":return gs;case"error":return vs;default:return null}})(de):null):null,n.createElement("div",{"data-content":"",className:Es(null==L?void 0:L.content,null==(c=null==f?void 0:f.classNames)?void 0:c.content)},n.createElement("div",{"data-title":"",className:Es(null==L?void 0:L.title,null==(d=null==f?void 0:f.classNames)?void 0:d.title)},"function"==typeof f.title?f.title():f.title),f.description?n.createElement("div",{"data-description":"",className:Es(P,me,null==L?void 0:L.description,null==(u=null==f?void 0:f.classNames)?void 0:u.description)},"function"==typeof f.description?f.description():f.description):null),s.isValidElement(f.cancel)?f.cancel:f.cancel&&_s(f.cancel)?n.createElement("button",{"data-button":!0,"data-cancel":!0,style:f.cancelButtonStyle||E,onClick:e=>{var t,s;_s(f.cancel)&&ue&&(null==(s=(t=f.cancel).onClick)||s.call(t,e),Ce())},className:Es(null==L?void 0:L.cancelButton,null==(h=null==f?void 0:f.classNames)?void 0:h.cancelButton)},f.cancel.label):null,s.isValidElement(f.action)?f.action:f.action&&_s(f.action)?n.createElement("button",{"data-button":!0,"data-action":!0,style:f.actionButtonStyle||T,onClick:e=>{var t,s;_s(f.action)&&(null==(s=(t=f.action).onClick)||s.call(t,e),!e.defaultPrevented&&Ce())},className:Es(null==L?void 0:L.actionButton,null==(m=null==f?void 0:f.classNames)?void 0:m.actionButton)},f.action.label):null));var Ee,Te,Re};function Rs(){if("undefined"==typeof window||"undefined"==typeof document)return"ltr";let e=document.documentElement.getAttribute("dir");return"auto"!==e&&e?e:window.getComputedStyle(document.documentElement).direction}function Ps(e,t){let s={};return[e,t].forEach((e,t)=>{let n=1===t,a=n?"--mobile-offset":"--offset",r=n?"16px":"32px";function i(e){["top","right","bottom","left"].forEach(t=>{s[`${a}-${t}`]="number"==typeof e?`${e}px`:e})}"number"==typeof e||"string"==typeof e?i(e):"object"==typeof e?["top","right","bottom","left"].forEach(t=>{void 0===e[t]?s[`${a}-${t}`]=r:s[`${a}-${t}`]="number"==typeof e[t]?`${e[t]}px`:e[t]}):i(r)}),s}var Ds=s.forwardRef(function(e,t){let{invert:s,position:a="bottom-right",hotkey:i=["altKey","KeyT"],expand:o,closeButton:l,className:c,offset:d,mobileOffset:u,theme:h="light",richColors:m,duration:p,style:f,visibleToasts:g=ks,toastOptions:x,dir:v=Rs(),gap:y=Cs,loadingIcon:b,icons:w,containerAriaLabel:j="Notifications",pauseWhenPageIsHidden:N}=e,[S,_]=n.useState([]),k=n.useMemo(()=>Array.from(new Set([a].concat(S.filter(e=>e.position).map(e=>e.position)))),[S,a]),[C,E]=n.useState([]),[T,R]=n.useState(!1),[P,D]=n.useState(!1),[A,O]=n.useState("system"!==h?h:"undefined"!=typeof window&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),I=n.useRef(null),M=i.join("+").replace(/Key/g,"").replace(/Digit/g,""),L=n.useRef(null),$=n.useRef(!1),U=n.useCallback(e=>{_(t=>{var s;return null!=(s=t.find(t=>t.id===e.id))&&s.delete||ws.dismiss(e.id),t.filter(({id:t})=>t!==e.id)})},[]);return n.useEffect(()=>ws.subscribe(e=>{e.dismiss?_(t=>t.map(t=>t.id===e.id?{...t,delete:!0}:t)):setTimeout(()=>{r.flushSync(()=>{_(t=>{let s=t.findIndex(t=>t.id===e.id);return-1!==s?[...t.slice(0,s),{...t[s],...e},...t.slice(s+1)]:[e,...t]})})})}),[]),n.useEffect(()=>{if("system"!==h)return void O(h);if("system"===h&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?O("dark"):O("light")),"undefined"==typeof window)return;let e=window.matchMedia("(prefers-color-scheme: dark)");try{e.addEventListener("change",({matches:e})=>{O(e?"dark":"light")})}catch(t){e.addListener(({matches:e})=>{try{O(e?"dark":"light")}catch(t){}})}},[h]),n.useEffect(()=>{S.length<=1&&R(!1)},[S]),n.useEffect(()=>{let e=e=>{var t,s;i.every(t=>e[t]||e.code===t)&&(R(!0),null==(t=I.current)||t.focus()),"Escape"===e.code&&(document.activeElement===I.current||null!=(s=I.current)&&s.contains(document.activeElement))&&R(!1)};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[i]),n.useEffect(()=>{if(I.current)return()=>{L.current&&(L.current.focus({preventScroll:!0}),L.current=null,$.current=!1)}},[I.current]),n.createElement("section",{ref:t,"aria-label":`${j} ${M}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},k.map((t,a)=>{var r;let[i,h]=t.split("-");return S.length?n.createElement("ol",{key:t,dir:"auto"===v?Rs():v,tabIndex:-1,ref:I,className:c,"data-sonner-toaster":!0,"data-theme":A,"data-y-position":i,"data-lifted":T&&S.length>1&&!o,"data-x-position":h,style:{"--front-toast-height":`${(null==(r=C[0])?void 0:r.height)||0}px`,"--width":"356px","--gap":`${y}px`,...f,...Ps(d,u)},onBlur:e=>{$.current&&!e.currentTarget.contains(e.relatedTarget)&&($.current=!1,L.current&&(L.current.focus({preventScroll:!0}),L.current=null))},onFocus:e=>{e.target instanceof HTMLElement&&"false"===e.target.dataset.dismissible||$.current||($.current=!0,L.current=e.relatedTarget)},onMouseEnter:()=>R(!0),onMouseMove:()=>R(!0),onMouseLeave:()=>{P||R(!1)},onDragEnd:()=>R(!1),onPointerDown:e=>{e.target instanceof HTMLElement&&"false"===e.target.dataset.dismissible||D(!0)},onPointerUp:()=>D(!1)},S.filter(e=>!e.position&&0===a||e.position===t).map((a,r)=>{var i,c;return n.createElement(Ts,{key:a.id,icons:w,index:r,toast:a,defaultRichColors:m,duration:null!=(i=null==x?void 0:x.duration)?i:p,className:null==x?void 0:x.className,descriptionClassName:null==x?void 0:x.descriptionClassName,invert:s,visibleToasts:g,closeButton:null!=(c=null==x?void 0:x.closeButton)?c:l,interacting:P,position:t,style:null==x?void 0:x.style,unstyled:null==x?void 0:x.unstyled,classNames:null==x?void 0:x.classNames,cancelButtonStyle:null==x?void 0:x.cancelButtonStyle,actionButtonStyle:null==x?void 0:x.actionButtonStyle,removeToast:U,toasts:S.filter(e=>e.position==a.position),heights:C.filter(e=>e.position==a.position),setHeights:E,expandByDefault:o,gap:y,loadingIcon:b,expanded:T,pauseWhenPageIsHidden:N,swipeDirections:e.swipeDirections})})):null}))}),As=i[" useId ".trim().toString()]||(()=>{}),Os=0;function Is(e){const[t,n]=s.useState(As());return it(()=>{n(e=>e??String(Os++))},[e]),t?`radix-${t}`:""}const Ms=["top","right","bottom","left"],Ls=Math.min,$s=Math.max,Us=Math.round,Fs=Math.floor,qs=e=>({x:e,y:e}),zs={left:"right",right:"left",bottom:"top",top:"bottom"},Bs={start:"end",end:"start"};function Ws(e,t,s){return $s(e,Ls(t,s))}function Hs(e,t){return"function"==typeof e?e(t):e}function Ks(e){return e.split("-")[0]}function Vs(e){return e.split("-")[1]}function Gs(e){return"x"===e?"y":"x"}function Js(e){return"y"===e?"height":"width"}const Ys=new Set(["top","bottom"]);function Qs(e){return Ys.has(Ks(e))?"y":"x"}function Xs(e){return Gs(Qs(e))}function Zs(e){return e.replace(/start|end/g,e=>Bs[e])}const en=["left","right"],tn=["right","left"],sn=["top","bottom"],nn=["bottom","top"];function an(e,t,s,n){const a=Vs(e);let r=function(e,t,s){switch(e){case"top":case"bottom":return s?t?tn:en:t?en:tn;case"left":case"right":return t?sn:nn;default:return[]}}(Ks(e),"start"===s,n);return a&&(r=r.map(e=>e+"-"+a),t&&(r=r.concat(r.map(Zs)))),r}function rn(e){return e.replace(/left|right|bottom|top/g,e=>zs[e])}function on(e){return"number"!=typeof e?function(e){return{top:0,right:0,bottom:0,left:0,...e}}(e):{top:e,right:e,bottom:e,left:e}}function ln(e){const{x:t,y:s,width:n,height:a}=e;return{width:n,height:a,top:s,left:t,right:t+n,bottom:s+a,x:t,y:s}}function cn(e,t,s){let{reference:n,floating:a}=e;const r=Qs(t),i=Xs(t),o=Js(i),l=Ks(t),c="y"===r,d=n.x+n.width/2-a.width/2,u=n.y+n.height/2-a.height/2,h=n[o]/2-a[o]/2;let m;switch(l){case"top":m={x:d,y:n.y-a.height};break;case"bottom":m={x:d,y:n.y+n.height};break;case"right":m={x:n.x+n.width,y:u};break;case"left":m={x:n.x-a.width,y:u};break;default:m={x:n.x,y:n.y}}switch(Vs(t)){case"start":m[i]-=h*(s&&c?-1:1);break;case"end":m[i]+=h*(s&&c?-1:1)}return m}async function dn(e,t){var s;void 0===t&&(t={});const{x:n,y:a,platform:r,rects:i,elements:o,strategy:l}=e,{boundary:c="clippingAncestors",rootBoundary:d="viewport",elementContext:u="floating",altBoundary:h=!1,padding:m=0}=Hs(t,e),p=on(m),f=o[h?"floating"===u?"reference":"floating":u],g=ln(await r.getClippingRect({element:null==(s=await(null==r.isElement?void 0:r.isElement(f)))||s?f:f.contextElement||await(null==r.getDocumentElement?void 0:r.getDocumentElement(o.floating)),boundary:c,rootBoundary:d,strategy:l})),x="floating"===u?{x:n,y:a,width:i.floating.width,height:i.floating.height}:i.reference,v=await(null==r.getOffsetParent?void 0:r.getOffsetParent(o.floating)),y=await(null==r.isElement?void 0:r.isElement(v))&&await(null==r.getScale?void 0:r.getScale(v))||{x:1,y:1},b=ln(r.convertOffsetParentRelativeRectToViewportRelativeRect?await r.convertOffsetParentRelativeRectToViewportRelativeRect({elements:o,rect:x,offsetParent:v,strategy:l}):x);return{top:(g.top-b.top+p.top)/y.y,bottom:(b.bottom-g.bottom+p.bottom)/y.y,left:(g.left-b.left+p.left)/y.x,right:(b.right-g.right+p.right)/y.x}}function un(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function hn(e){return Ms.some(t=>e[t]>=0)}const mn=new Set(["left","top"]);function pn(){return"undefined"!=typeof window}function fn(e){return vn(e)?(e.nodeName||"").toLowerCase():"#document"}function gn(e){var t;return(null==e||null==(t=e.ownerDocument)?void 0:t.defaultView)||window}function xn(e){var t;return null==(t=(vn(e)?e.ownerDocument:e.document)||window.document)?void 0:t.documentElement}function vn(e){return!!pn()&&(e instanceof Node||e instanceof gn(e).Node)}function yn(e){return!!pn()&&(e instanceof Element||e instanceof gn(e).Element)}function bn(e){return!!pn()&&(e instanceof HTMLElement||e instanceof gn(e).HTMLElement)}function wn(e){return!(!pn()||"undefined"==typeof ShadowRoot)&&(e instanceof ShadowRoot||e instanceof gn(e).ShadowRoot)}const jn=new Set(["inline","contents"]);function Nn(e){const{overflow:t,overflowX:s,overflowY:n,display:a}=In(e);return/auto|scroll|overlay|hidden|clip/.test(t+n+s)&&!jn.has(a)}const Sn=new Set(["table","td","th"]);function _n(e){return Sn.has(fn(e))}const kn=[":popover-open",":modal"];function Cn(e){return kn.some(t=>{try{return e.matches(t)}catch(s){return!1}})}const En=["transform","translate","scale","rotate","perspective"],Tn=["transform","translate","scale","rotate","perspective","filter"],Rn=["paint","layout","strict","content"];function Pn(e){const t=Dn(),s=yn(e)?In(e):e;return En.some(e=>!!s[e]&&"none"!==s[e])||!!s.containerType&&"normal"!==s.containerType||!t&&!!s.backdropFilter&&"none"!==s.backdropFilter||!t&&!!s.filter&&"none"!==s.filter||Tn.some(e=>(s.willChange||"").includes(e))||Rn.some(e=>(s.contain||"").includes(e))}function Dn(){return!("undefined"==typeof CSS||!CSS.supports)&&CSS.supports("-webkit-backdrop-filter","none")}const An=new Set(["html","body","#document"]);function On(e){return An.has(fn(e))}function In(e){return gn(e).getComputedStyle(e)}function Mn(e){return yn(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function Ln(e){if("html"===fn(e))return e;const t=e.assignedSlot||e.parentNode||wn(e)&&e.host||xn(e);return wn(t)?t.host:t}function $n(e){const t=Ln(e);return On(t)?e.ownerDocument?e.ownerDocument.body:e.body:bn(t)&&Nn(t)?t:$n(t)}function Un(e,t,s){var n;void 0===t&&(t=[]),void 0===s&&(s=!0);const a=$n(e),r=a===(null==(n=e.ownerDocument)?void 0:n.body),i=gn(a);if(r){const e=Fn(i);return t.concat(i,i.visualViewport||[],Nn(a)?a:[],e&&s?Un(e):[])}return t.concat(a,Un(a,[],s))}function Fn(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function qn(e){const t=In(e);let s=parseFloat(t.width)||0,n=parseFloat(t.height)||0;const a=bn(e),r=a?e.offsetWidth:s,i=a?e.offsetHeight:n,o=Us(s)!==r||Us(n)!==i;return o&&(s=r,n=i),{width:s,height:n,$:o}}function zn(e){return yn(e)?e:e.contextElement}function Bn(e){const t=zn(e);if(!bn(t))return qs(1);const s=t.getBoundingClientRect(),{width:n,height:a,$:r}=qn(t);let i=(r?Us(s.width):s.width)/n,o=(r?Us(s.height):s.height)/a;return i&&Number.isFinite(i)||(i=1),o&&Number.isFinite(o)||(o=1),{x:i,y:o}}const Wn=qs(0);function Hn(e){const t=gn(e);return Dn()&&t.visualViewport?{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}:Wn}function Kn(e,t,s,n){void 0===t&&(t=!1),void 0===s&&(s=!1);const a=e.getBoundingClientRect(),r=zn(e);let i=qs(1);t&&(n?yn(n)&&(i=Bn(n)):i=Bn(e));const o=function(e,t,s){return void 0===t&&(t=!1),!(!s||t&&s!==gn(e))&&t}(r,s,n)?Hn(r):qs(0);let l=(a.left+o.x)/i.x,c=(a.top+o.y)/i.y,d=a.width/i.x,u=a.height/i.y;if(r){const e=gn(r),t=n&&yn(n)?gn(n):n;let s=e,a=Fn(s);for(;a&&n&&t!==s;){const e=Bn(a),t=a.getBoundingClientRect(),n=In(a),r=t.left+(a.clientLeft+parseFloat(n.paddingLeft))*e.x,i=t.top+(a.clientTop+parseFloat(n.paddingTop))*e.y;l*=e.x,c*=e.y,d*=e.x,u*=e.y,l+=r,c+=i,s=gn(a),a=Fn(s)}}return ln({width:d,height:u,x:l,y:c})}function Vn(e,t){const s=Mn(e).scrollLeft;return t?t.left+s:Kn(xn(e)).left+s}function Gn(e,t,s){void 0===s&&(s=!1);const n=e.getBoundingClientRect();return{x:n.left+t.scrollLeft-(s?0:Vn(e,n)),y:n.top+t.scrollTop}}const Jn=new Set(["absolute","fixed"]);function Yn(e,t,s){let n;if("viewport"===t)n=function(e,t){const s=gn(e),n=xn(e),a=s.visualViewport;let r=n.clientWidth,i=n.clientHeight,o=0,l=0;if(a){r=a.width,i=a.height;const e=Dn();(!e||e&&"fixed"===t)&&(o=a.offsetLeft,l=a.offsetTop)}return{width:r,height:i,x:o,y:l}}(e,s);else if("document"===t)n=function(e){const t=xn(e),s=Mn(e),n=e.ownerDocument.body,a=$s(t.scrollWidth,t.clientWidth,n.scrollWidth,n.clientWidth),r=$s(t.scrollHeight,t.clientHeight,n.scrollHeight,n.clientHeight);let i=-s.scrollLeft+Vn(e);const o=-s.scrollTop;return"rtl"===In(n).direction&&(i+=$s(t.clientWidth,n.clientWidth)-a),{width:a,height:r,x:i,y:o}}(xn(e));else if(yn(t))n=function(e,t){const s=Kn(e,!0,"fixed"===t),n=s.top+e.clientTop,a=s.left+e.clientLeft,r=bn(e)?Bn(e):qs(1);return{width:e.clientWidth*r.x,height:e.clientHeight*r.y,x:a*r.x,y:n*r.y}}(t,s);else{const s=Hn(e);n={x:t.x-s.x,y:t.y-s.y,width:t.width,height:t.height}}return ln(n)}function Qn(e,t){const s=Ln(e);return!(s===t||!yn(s)||On(s))&&("fixed"===In(s).position||Qn(s,t))}function Xn(e,t,s){const n=bn(t),a=xn(t),r="fixed"===s,i=Kn(e,!0,r,t);let o={scrollLeft:0,scrollTop:0};const l=qs(0);function c(){l.x=Vn(a)}if(n||!n&&!r)if(("body"!==fn(t)||Nn(a))&&(o=Mn(t)),n){const e=Kn(t,!0,r,t);l.x=e.x+t.clientLeft,l.y=e.y+t.clientTop}else a&&c();r&&!n&&a&&c();const d=!a||n||r?qs(0):Gn(a,o);return{x:i.left+o.scrollLeft-l.x-d.x,y:i.top+o.scrollTop-l.y-d.y,width:i.width,height:i.height}}function Zn(e){return"static"===In(e).position}function ea(e,t){if(!bn(e)||"fixed"===In(e).position)return null;if(t)return t(e);let s=e.offsetParent;return xn(e)===s&&(s=s.ownerDocument.body),s}function ta(e,t){const s=gn(e);if(Cn(e))return s;if(!bn(e)){let t=Ln(e);for(;t&&!On(t);){if(yn(t)&&!Zn(t))return t;t=Ln(t)}return s}let n=ea(e,t);for(;n&&_n(n)&&Zn(n);)n=ea(n,t);return n&&On(n)&&Zn(n)&&!Pn(n)?s:n||function(e){let t=Ln(e);for(;bn(t)&&!On(t);){if(Pn(t))return t;if(Cn(t))return null;t=Ln(t)}return null}(e)||s}const sa={convertOffsetParentRelativeRectToViewportRelativeRect:function(e){let{elements:t,rect:s,offsetParent:n,strategy:a}=e;const r="fixed"===a,i=xn(n),o=!!t&&Cn(t.floating);if(n===i||o&&r)return s;let l={scrollLeft:0,scrollTop:0},c=qs(1);const d=qs(0),u=bn(n);if((u||!u&&!r)&&(("body"!==fn(n)||Nn(i))&&(l=Mn(n)),bn(n))){const e=Kn(n);c=Bn(n),d.x=e.x+n.clientLeft,d.y=e.y+n.clientTop}const h=!i||u||r?qs(0):Gn(i,l,!0);return{width:s.width*c.x,height:s.height*c.y,x:s.x*c.x-l.scrollLeft*c.x+d.x+h.x,y:s.y*c.y-l.scrollTop*c.y+d.y+h.y}},getDocumentElement:xn,getClippingRect:function(e){let{element:t,boundary:s,rootBoundary:n,strategy:a}=e;const r=[..."clippingAncestors"===s?Cn(t)?[]:function(e,t){const s=t.get(e);if(s)return s;let n=Un(e,[],!1).filter(e=>yn(e)&&"body"!==fn(e)),a=null;const r="fixed"===In(e).position;let i=r?Ln(e):e;for(;yn(i)&&!On(i);){const t=In(i),s=Pn(i);s||"fixed"!==t.position||(a=null),(r?!s&&!a:!s&&"static"===t.position&&a&&Jn.has(a.position)||Nn(i)&&!s&&Qn(e,i))?n=n.filter(e=>e!==i):a=t,i=Ln(i)}return t.set(e,n),n}(t,this._c):[].concat(s),n],i=r[0],o=r.reduce((e,s)=>{const n=Yn(t,s,a);return e.top=$s(n.top,e.top),e.right=Ls(n.right,e.right),e.bottom=Ls(n.bottom,e.bottom),e.left=$s(n.left,e.left),e},Yn(t,i,a));return{width:o.right-o.left,height:o.bottom-o.top,x:o.left,y:o.top}},getOffsetParent:ta,getElementRects:async function(e){const t=this.getOffsetParent||ta,s=this.getDimensions,n=await s(e.floating);return{reference:Xn(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:n.width,height:n.height}}},getClientRects:function(e){return Array.from(e.getClientRects())},getDimensions:function(e){const{width:t,height:s}=qn(e);return{width:t,height:s}},getScale:Bn,isElement:yn,isRTL:function(e){return"rtl"===In(e).direction}};function na(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function aa(e,t,s,n){void 0===n&&(n={});const{ancestorScroll:a=!0,ancestorResize:r=!0,elementResize:i="function"==typeof ResizeObserver,layoutShift:o="function"==typeof IntersectionObserver,animationFrame:l=!1}=n,c=zn(e),d=a||r?[...c?Un(c):[],...Un(t)]:[];d.forEach(e=>{a&&e.addEventListener("scroll",s,{passive:!0}),r&&e.addEventListener("resize",s)});const u=c&&o?function(e,t){let s,n=null;const a=xn(e);function r(){var e;clearTimeout(s),null==(e=n)||e.disconnect(),n=null}return function i(o,l){void 0===o&&(o=!1),void 0===l&&(l=1),r();const c=e.getBoundingClientRect(),{left:d,top:u,width:h,height:m}=c;if(o||t(),!h||!m)return;const p={rootMargin:-Fs(u)+"px "+-Fs(a.clientWidth-(d+h))+"px "+-Fs(a.clientHeight-(u+m))+"px "+-Fs(d)+"px",threshold:$s(0,Ls(1,l))||1};let f=!0;function g(t){const n=t[0].intersectionRatio;if(n!==l){if(!f)return i();n?i(!1,n):s=setTimeout(()=>{i(!1,1e-7)},1e3)}1!==n||na(c,e.getBoundingClientRect())||i(),f=!1}try{n=new IntersectionObserver(g,{...p,root:a.ownerDocument})}catch(x){n=new IntersectionObserver(g,p)}n.observe(e)}(!0),r}(c,s):null;let h,m=-1,p=null;i&&(p=new ResizeObserver(e=>{let[n]=e;n&&n.target===c&&p&&(p.unobserve(t),cancelAnimationFrame(m),m=requestAnimationFrame(()=>{var e;null==(e=p)||e.observe(t)})),s()}),c&&!l&&p.observe(c),p.observe(t));let f=l?Kn(e):null;return l&&function t(){const n=Kn(e);f&&!na(f,n)&&s();f=n,h=requestAnimationFrame(t)}(),s(),()=>{var e;d.forEach(e=>{a&&e.removeEventListener("scroll",s),r&&e.removeEventListener("resize",s)}),null==u||u(),null==(e=p)||e.disconnect(),p=null,l&&cancelAnimationFrame(h)}}const ra=function(e){return void 0===e&&(e=0),{name:"offset",options:e,async fn(t){var s,n;const{x:a,y:r,placement:i,middlewareData:o}=t,l=await async function(e,t){const{placement:s,platform:n,elements:a}=e,r=await(null==n.isRTL?void 0:n.isRTL(a.floating)),i=Ks(s),o=Vs(s),l="y"===Qs(s),c=mn.has(i)?-1:1,d=r&&l?-1:1,u=Hs(t,e);let{mainAxis:h,crossAxis:m,alignmentAxis:p}="number"==typeof u?{mainAxis:u,crossAxis:0,alignmentAxis:null}:{mainAxis:u.mainAxis||0,crossAxis:u.crossAxis||0,alignmentAxis:u.alignmentAxis};return o&&"number"==typeof p&&(m="end"===o?-1*p:p),l?{x:m*d,y:h*c}:{x:h*c,y:m*d}}(t,e);return i===(null==(s=o.offset)?void 0:s.placement)&&null!=(n=o.arrow)&&n.alignmentOffset?{}:{x:a+l.x,y:r+l.y,data:{...l,placement:i}}}}},ia=function(e){return void 0===e&&(e={}),{name:"shift",options:e,async fn(t){const{x:s,y:n,placement:a}=t,{mainAxis:r=!0,crossAxis:i=!1,limiter:o={fn:e=>{let{x:t,y:s}=e;return{x:t,y:s}}},...l}=Hs(e,t),c={x:s,y:n},d=await dn(t,l),u=Qs(Ks(a)),h=Gs(u);let m=c[h],p=c[u];if(r){const e="y"===h?"bottom":"right";m=Ws(m+d["y"===h?"top":"left"],m,m-d[e])}if(i){const e="y"===u?"bottom":"right";p=Ws(p+d["y"===u?"top":"left"],p,p-d[e])}const f=o.fn({...t,[h]:m,[u]:p});return{...f,data:{x:f.x-s,y:f.y-n,enabled:{[h]:r,[u]:i}}}}}},oa=function(e){return void 0===e&&(e={}),{name:"flip",options:e,async fn(t){var s,n;const{placement:a,middlewareData:r,rects:i,initialPlacement:o,platform:l,elements:c}=t,{mainAxis:d=!0,crossAxis:u=!0,fallbackPlacements:h,fallbackStrategy:m="bestFit",fallbackAxisSideDirection:p="none",flipAlignment:f=!0,...g}=Hs(e,t);if(null!=(s=r.arrow)&&s.alignmentOffset)return{};const x=Ks(a),v=Qs(o),y=Ks(o)===o,b=await(null==l.isRTL?void 0:l.isRTL(c.floating)),w=h||(y||!f?[rn(o)]:function(e){const t=rn(e);return[Zs(e),t,Zs(t)]}(o)),j="none"!==p;!h&&j&&w.push(...an(o,f,p,b));const N=[o,...w],S=await dn(t,g),_=[];let k=(null==(n=r.flip)?void 0:n.overflows)||[];if(d&&_.push(S[x]),u){const e=function(e,t,s){void 0===s&&(s=!1);const n=Vs(e),a=Xs(e),r=Js(a);let i="x"===a?n===(s?"end":"start")?"right":"left":"start"===n?"bottom":"top";return t.reference[r]>t.floating[r]&&(i=rn(i)),[i,rn(i)]}(a,i,b);_.push(S[e[0]],S[e[1]])}if(k=[...k,{placement:a,overflows:_}],!_.every(e=>e<=0)){var C,E;const e=((null==(C=r.flip)?void 0:C.index)||0)+1,t=N[e];if(t){if(!("alignment"===u&&v!==Qs(t))||k.every(e=>e.overflows[0]>0&&Qs(e.placement)===v))return{data:{index:e,overflows:k},reset:{placement:t}}}let s=null==(E=k.filter(e=>e.overflows[0]<=0).sort((e,t)=>e.overflows[1]-t.overflows[1])[0])?void 0:E.placement;if(!s)switch(m){case"bestFit":{var T;const e=null==(T=k.filter(e=>{if(j){const t=Qs(e.placement);return t===v||"y"===t}return!0}).map(e=>[e.placement,e.overflows.filter(e=>e>0).reduce((e,t)=>e+t,0)]).sort((e,t)=>e[1]-t[1])[0])?void 0:T[0];e&&(s=e);break}case"initialPlacement":s=o}if(a!==s)return{reset:{placement:s}}}return{}}}},la=function(e){return void 0===e&&(e={}),{name:"size",options:e,async fn(t){var s,n;const{placement:a,rects:r,platform:i,elements:o}=t,{apply:l=()=>{},...c}=Hs(e,t),d=await dn(t,c),u=Ks(a),h=Vs(a),m="y"===Qs(a),{width:p,height:f}=r.floating;let g,x;"top"===u||"bottom"===u?(g=u,x=h===(await(null==i.isRTL?void 0:i.isRTL(o.floating))?"start":"end")?"left":"right"):(x=u,g="end"===h?"top":"bottom");const v=f-d.top-d.bottom,y=p-d.left-d.right,b=Ls(f-d[g],v),w=Ls(p-d[x],y),j=!t.middlewareData.shift;let N=b,S=w;if(null!=(s=t.middlewareData.shift)&&s.enabled.x&&(S=y),null!=(n=t.middlewareData.shift)&&n.enabled.y&&(N=v),j&&!h){const e=$s(d.left,0),t=$s(d.right,0),s=$s(d.top,0),n=$s(d.bottom,0);m?S=p-2*(0!==e||0!==t?e+t:$s(d.left,d.right)):N=f-2*(0!==s||0!==n?s+n:$s(d.top,d.bottom))}await l({...t,availableWidth:S,availableHeight:N});const _=await i.getDimensions(o.floating);return p!==_.width||f!==_.height?{reset:{rects:!0}}:{}}}},ca=function(e){return void 0===e&&(e={}),{name:"hide",options:e,async fn(t){const{rects:s}=t,{strategy:n="referenceHidden",...a}=Hs(e,t);switch(n){case"referenceHidden":{const e=un(await dn(t,{...a,elementContext:"reference"}),s.reference);return{data:{referenceHiddenOffsets:e,referenceHidden:hn(e)}}}case"escaped":{const e=un(await dn(t,{...a,altBoundary:!0}),s.floating);return{data:{escapedOffsets:e,escaped:hn(e)}}}default:return{}}}}},da=e=>({name:"arrow",options:e,async fn(t){const{x:s,y:n,placement:a,rects:r,platform:i,elements:o,middlewareData:l}=t,{element:c,padding:d=0}=Hs(e,t)||{};if(null==c)return{};const u=on(d),h={x:s,y:n},m=Xs(a),p=Js(m),f=await i.getDimensions(c),g="y"===m,x=g?"top":"left",v=g?"bottom":"right",y=g?"clientHeight":"clientWidth",b=r.reference[p]+r.reference[m]-h[m]-r.floating[p],w=h[m]-r.reference[m],j=await(null==i.getOffsetParent?void 0:i.getOffsetParent(c));let N=j?j[y]:0;N&&await(null==i.isElement?void 0:i.isElement(j))||(N=o.floating[y]||r.floating[p]);const S=b/2-w/2,_=N/2-f[p]/2-1,k=Ls(u[x],_),C=Ls(u[v],_),E=k,T=N-f[p]-C,R=N/2-f[p]/2+S,P=Ws(E,R,T),D=!l.arrow&&null!=Vs(a)&&R!==P&&r.reference[p]/2-(R<E?k:C)-f[p]/2<0,A=D?R<E?R-E:R-T:0;return{[m]:h[m]+A,data:{[m]:P,centerOffset:R-P-A,...D&&{alignmentOffset:A}},reset:D}}}),ua=function(e){return void 0===e&&(e={}),{options:e,fn(t){const{x:s,y:n,placement:a,rects:r,middlewareData:i}=t,{offset:o=0,mainAxis:l=!0,crossAxis:c=!0}=Hs(e,t),d={x:s,y:n},u=Qs(a),h=Gs(u);let m=d[h],p=d[u];const f=Hs(o,t),g="number"==typeof f?{mainAxis:f,crossAxis:0}:{mainAxis:0,crossAxis:0,...f};if(l){const e="y"===h?"height":"width",t=r.reference[h]-r.floating[e]+g.mainAxis,s=r.reference[h]+r.reference[e]-g.mainAxis;m<t?m=t:m>s&&(m=s)}if(c){var x,v;const e="y"===h?"width":"height",t=mn.has(Ks(a)),s=r.reference[u]-r.floating[e]+(t&&(null==(x=i.offset)?void 0:x[u])||0)+(t?0:g.crossAxis),n=r.reference[u]+r.reference[e]+(t?0:(null==(v=i.offset)?void 0:v[u])||0)-(t?g.crossAxis:0);p<s?p=s:p>n&&(p=n)}return{[h]:m,[u]:p}}}},ha=(e,t,s)=>{const n=new Map,a={platform:sa,...s},r={...a.platform,_c:n};return(async(e,t,s)=>{const{placement:n="bottom",strategy:a="absolute",middleware:r=[],platform:i}=s,o=r.filter(Boolean),l=await(null==i.isRTL?void 0:i.isRTL(t));let c=await i.getElementRects({reference:e,floating:t,strategy:a}),{x:d,y:u}=cn(c,n,l),h=n,m={},p=0;for(let f=0;f<o.length;f++){const{name:s,fn:r}=o[f],{x:g,y:x,data:v,reset:y}=await r({x:d,y:u,initialPlacement:n,placement:h,strategy:a,middlewareData:m,rects:c,platform:i,elements:{reference:e,floating:t}});d=null!=g?g:d,u=null!=x?x:u,m={...m,[s]:{...m[s],...v}},y&&p<=50&&(p++,"object"==typeof y&&(y.placement&&(h=y.placement),y.rects&&(c=!0===y.rects?await i.getElementRects({reference:e,floating:t,strategy:a}):y.rects),({x:d,y:u}=cn(c,h,l))),f=-1)}return{x:d,y:u,placement:h,strategy:a,middlewareData:m}})(e,t,{...a,platform:r})};var ma="undefined"!=typeof document?s.useLayoutEffect:function(){};function pa(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if("function"==typeof e&&e.toString()===t.toString())return!0;let s,n,a;if(e&&t&&"object"==typeof e){if(Array.isArray(e)){if(s=e.length,s!==t.length)return!1;for(n=s;0!==n--;)if(!pa(e[n],t[n]))return!1;return!0}if(a=Object.keys(e),s=a.length,s!==Object.keys(t).length)return!1;for(n=s;0!==n--;)if(!{}.hasOwnProperty.call(t,a[n]))return!1;for(n=s;0!==n--;){const s=a[n];if(("_owner"!==s||!e.$$typeof)&&!pa(e[s],t[s]))return!1}return!0}return e!=e&&t!=t}function fa(e){if("undefined"==typeof window)return 1;return(e.ownerDocument.defaultView||window).devicePixelRatio||1}function ga(e,t){const s=fa(e);return Math.round(t*s)/s}function xa(e){const t=s.useRef(e);return ma(()=>{t.current=e}),t}const va=e=>({name:"arrow",options:e,fn(t){const{element:s,padding:n}="function"==typeof e?e(t):e;return s&&(a=s,{}.hasOwnProperty.call(a,"current"))?null!=s.current?da({element:s.current,padding:n}).fn(t):{}:s?da({element:s,padding:n}).fn(t):{};var a}}),ya=(e,t)=>({...ra(e),options:[e,t]}),ba=(e,t)=>({...ia(e),options:[e,t]}),wa=(e,t)=>({...ua(e),options:[e,t]}),ja=(e,t)=>({...oa(e),options:[e,t]}),Na=(e,t)=>({...la(e),options:[e,t]}),Sa=(e,t)=>({...ca(e),options:[e,t]}),_a=(e,t)=>({...va(e),options:[e,t]});var ka=s.forwardRef((e,t)=>{const{children:s,width:n=10,height:a=5,...r}=e;return u.jsx(Ke.svg,{...r,ref:t,width:n,height:a,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?s:u.jsx("polygon",{points:"0,0 30,0 15,10"})})});ka.displayName="Arrow";var Ca=ka;function Ea(e){const[t,n]=s.useState(void 0);return it(()=>{if(e){n({width:e.offsetWidth,height:e.offsetHeight});const t=new ResizeObserver(t=>{if(!Array.isArray(t))return;if(!t.length)return;const s=t[0];let a,r;if("borderBoxSize"in s){const e=s.borderBoxSize,t=Array.isArray(e)?e[0]:e;a=t.inlineSize,r=t.blockSize}else a=e.offsetWidth,r=e.offsetHeight;n({width:a,height:r})});return t.observe(e,{box:"border-box"}),()=>t.unobserve(e)}n(void 0)},[e]),t}var Ta="Popper",[Ra,Pa]=Le(Ta),[Da,Aa]=Ra(Ta),Oa=e=>{const{__scopePopper:t,children:n}=e,[a,r]=s.useState(null);return u.jsx(Da,{scope:t,anchor:a,onAnchorChange:r,children:n})};Oa.displayName=Ta;var Ia="PopperAnchor",Ma=s.forwardRef((e,t)=>{const{__scopePopper:n,virtualRef:a,...r}=e,i=Aa(Ia,n),o=s.useRef(null),l=Me(t,o);return s.useEffect(()=>{i.onAnchorChange((null==a?void 0:a.current)||o.current)}),a?null:u.jsx(Ke.div,{...r,ref:l})});Ma.displayName=Ia;var La="PopperContent",[$a,Ua]=Ra(La),Fa=s.forwardRef((e,t)=>{var n,r,i,o,l,c;const{__scopePopper:d,side:h="bottom",sideOffset:m=0,align:p="center",alignOffset:f=0,arrowPadding:g=0,avoidCollisions:x=!0,collisionBoundary:v=[],collisionPadding:y=0,sticky:b="partial",hideWhenDetached:w=!1,updatePositionStrategy:j="optimized",onPlaced:N,...S}=e,_=Aa(La,d),[k,C]=s.useState(null),E=Me(t,e=>C(e)),[T,R]=s.useState(null),P=Ea(T),D=(null==P?void 0:P.width)??0,A=(null==P?void 0:P.height)??0,O=h+("center"!==p?"-"+p:""),I="number"==typeof y?y:{top:0,right:0,bottom:0,left:0,...y},M=Array.isArray(v)?v:[v],L=M.length>0,$={padding:I,boundary:M.filter(Wa),altBoundary:L},{refs:U,floatingStyles:F,placement:q,isPositioned:z,middlewareData:B}=function(e){void 0===e&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:r=[],platform:i,elements:{reference:o,floating:l}={},transform:c=!0,whileElementsMounted:d,open:u}=e,[h,m]=s.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[p,f]=s.useState(r);pa(p,r)||f(r);const[g,x]=s.useState(null),[v,y]=s.useState(null),b=s.useCallback(e=>{e!==S.current&&(S.current=e,x(e))},[]),w=s.useCallback(e=>{e!==_.current&&(_.current=e,y(e))},[]),j=o||g,N=l||v,S=s.useRef(null),_=s.useRef(null),k=s.useRef(h),C=null!=d,E=xa(d),T=xa(i),R=xa(u),P=s.useCallback(()=>{if(!S.current||!_.current)return;const e={placement:t,strategy:n,middleware:p};T.current&&(e.platform=T.current),ha(S.current,_.current,e).then(e=>{const t={...e,isPositioned:!1!==R.current};D.current&&!pa(k.current,t)&&(k.current=t,a.flushSync(()=>{m(t)}))})},[p,t,n,T,R]);ma(()=>{!1===u&&k.current.isPositioned&&(k.current.isPositioned=!1,m(e=>({...e,isPositioned:!1})))},[u]);const D=s.useRef(!1);ma(()=>(D.current=!0,()=>{D.current=!1}),[]),ma(()=>{if(j&&(S.current=j),N&&(_.current=N),j&&N){if(E.current)return E.current(j,N,P);P()}},[j,N,P,E,C]);const A=s.useMemo(()=>({reference:S,floating:_,setReference:b,setFloating:w}),[b,w]),O=s.useMemo(()=>({reference:j,floating:N}),[j,N]),I=s.useMemo(()=>{const e={position:n,left:0,top:0};if(!O.floating)return e;const t=ga(O.floating,h.x),s=ga(O.floating,h.y);return c?{...e,transform:"translate("+t+"px, "+s+"px)",...fa(O.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:t,top:s}},[n,c,O.floating,h.x,h.y]);return s.useMemo(()=>({...h,update:P,refs:A,elements:O,floatingStyles:I}),[h,P,A,O,I])}({strategy:"fixed",placement:O,whileElementsMounted:(...e)=>aa(...e,{animationFrame:"always"===j}),elements:{reference:_.anchor},middleware:[ya({mainAxis:m+A,alignmentAxis:f}),x&&ba({mainAxis:!0,crossAxis:!1,limiter:"partial"===b?wa():void 0,...$}),x&&ja({...$}),Na({...$,apply:({elements:e,rects:t,availableWidth:s,availableHeight:n})=>{const{width:a,height:r}=t.reference,i=e.floating.style;i.setProperty("--radix-popper-available-width",`${s}px`),i.setProperty("--radix-popper-available-height",`${n}px`),i.setProperty("--radix-popper-anchor-width",`${a}px`),i.setProperty("--radix-popper-anchor-height",`${r}px`)}}),T&&_a({element:T,padding:g}),Ha({arrowWidth:D,arrowHeight:A}),w&&Sa({strategy:"referenceHidden",...$})]}),[W,H]=Ka(q),K=Ge(N);it(()=>{z&&(null==K||K())},[z,K]);const V=null==(n=B.arrow)?void 0:n.x,G=null==(r=B.arrow)?void 0:r.y,J=0!==(null==(i=B.arrow)?void 0:i.centerOffset),[Y,Q]=s.useState();return it(()=>{k&&Q(window.getComputedStyle(k).zIndex)},[k]),u.jsx("div",{ref:U.setFloating,"data-radix-popper-content-wrapper":"",style:{...F,transform:z?F.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:Y,"--radix-popper-transform-origin":[null==(o=B.transformOrigin)?void 0:o.x,null==(l=B.transformOrigin)?void 0:l.y].join(" "),...(null==(c=B.hide)?void 0:c.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:u.jsx($a,{scope:d,placedSide:W,onArrowChange:R,arrowX:V,arrowY:G,shouldHideArrow:J,children:u.jsx(Ke.div,{"data-side":W,"data-align":H,...S,ref:E,style:{...S.style,animation:z?void 0:"none"}})})})});Fa.displayName=La;var qa="PopperArrow",za={top:"bottom",right:"left",bottom:"top",left:"right"},Ba=s.forwardRef(function(e,t){const{__scopePopper:s,...n}=e,a=Ua(qa,s),r=za[a.placedSide];return u.jsx("span",{ref:a.onArrowChange,style:{position:"absolute",left:a.arrowX,top:a.arrowY,[r]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[a.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[a.placedSide],visibility:a.shouldHideArrow?"hidden":void 0},children:u.jsx(Ca,{...n,ref:t,style:{...n.style,display:"block"}})})});function Wa(e){return null!==e}Ba.displayName=qa;var Ha=e=>({name:"transformOrigin",options:e,fn(t){var s,n,a;const{placement:r,rects:i,middlewareData:o}=t,l=0!==(null==(s=o.arrow)?void 0:s.centerOffset),c=l?0:e.arrowWidth,d=l?0:e.arrowHeight,[u,h]=Ka(r),m={start:"0%",center:"50%",end:"100%"}[h],p=((null==(n=o.arrow)?void 0:n.x)??0)+c/2,f=((null==(a=o.arrow)?void 0:a.y)??0)+d/2;let g="",x="";return"bottom"===u?(g=l?m:`${p}px`,x=-d+"px"):"top"===u?(g=l?m:`${p}px`,x=`${i.floating.height+d}px`):"right"===u?(g=-d+"px",x=l?m:`${f}px`):"left"===u&&(g=`${i.floating.width+d}px`,x=l?m:`${f}px`),{data:{x:g,y:x}}}});function Ka(e){const[t,s="center"]=e.split("-");return[t,s]}var Va=Oa,Ga=Ma,Ja=Fa,Ya=Ba;class Qa extends Error{constructor(e,t="FunctionsError",s){super(e),this.name=t,this.context=s}}class Xa extends Qa{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class Za extends Qa{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class er extends Qa{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var tr,sr;(sr=tr||(tr={})).Any="any",sr.ApNortheast1="ap-northeast-1",sr.ApNortheast2="ap-northeast-2",sr.ApSouth1="ap-south-1",sr.ApSoutheast1="ap-southeast-1",sr.ApSoutheast2="ap-southeast-2",sr.CaCentral1="ca-central-1",sr.EuCentral1="eu-central-1",sr.EuWest1="eu-west-1",sr.EuWest2="eu-west-2",sr.EuWest3="eu-west-3",sr.SaEast1="sa-east-1",sr.UsEast1="us-east-1",sr.UsWest1="us-west-1",sr.UsWest2="us-west-2";var nr=function(e,t,s,n){return new(s||(s=Promise))(function(a,r){function i(e){try{l(n.next(e))}catch(t){r(t)}}function o(e){try{l(n.throw(e))}catch(t){r(t)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof s?t:new s(function(e){e(t)})).then(i,o)}l((n=n.apply(e,t||[])).next())})};class ar{constructor(e,{headers:t={},customFetch:s,region:n=tr.Any}={}){this.url=e,this.headers=t,this.region=n,this.fetch=(e=>{let t;return t=e||("undefined"==typeof fetch?(...e)=>Ne(async()=>{const{default:e}=await Promise.resolve().then(()=>xr);return{default:e}},void 0).then(({default:t})=>t(...e)):fetch),(...e)=>t(...e)})(s)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,t={}){var s;return nr(this,void 0,void 0,function*(){try{const{headers:n,method:a,body:r}=t;let i={},{region:o}=t;o||(o=this.region);const l=new URL(`${this.url}/${e}`);let c;o&&"any"!==o&&(i["x-region"]=o,l.searchParams.set("forceFunctionRegion",o)),r&&(n&&!Object.prototype.hasOwnProperty.call(n,"Content-Type")||!n)&&("undefined"!=typeof Blob&&r instanceof Blob||r instanceof ArrayBuffer?(i["Content-Type"]="application/octet-stream",c=r):"string"==typeof r?(i["Content-Type"]="text/plain",c=r):"undefined"!=typeof FormData&&r instanceof FormData?c=r:(i["Content-Type"]="application/json",c=JSON.stringify(r)));const d=yield this.fetch(l.toString(),{method:a||"POST",headers:Object.assign(Object.assign(Object.assign({},i),this.headers),n),body:c}).catch(e=>{throw new Xa(e)}),u=d.headers.get("x-relay-error");if(u&&"true"===u)throw new Za(d);if(!d.ok)throw new er(d);let h,m=(null!==(s=d.headers.get("Content-Type"))&&void 0!==s?s:"text/plain").split(";")[0].trim();return h="application/json"===m?yield d.json():"application/octet-stream"===m?yield d.blob():"text/event-stream"===m?d:"multipart/form-data"===m?yield d.formData():yield d.text(),{data:h,error:null,response:d}}catch(n){return{data:null,error:n,response:n instanceof er||n instanceof Za?n.context:void 0}}})}}var rr={},ir={},or={},lr={},cr={},dr={},ur=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof global)return global;throw new Error("unable to locate global object")}();const hr=ur.fetch,mr=ur.fetch.bind(ur),pr=ur.Headers,fr=ur.Request,gr=ur.Response,xr=Object.freeze(Object.defineProperty({__proto__:null,Headers:pr,Request:fr,Response:gr,default:mr,fetch:hr},Symbol.toStringTag,{value:"Module"})),vr=o(xr);var yr={};Object.defineProperty(yr,"__esModule",{value:!0});let br=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}};yr.default=br;var wr=l&&l.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(dr,"__esModule",{value:!0});const jr=wr(vr),Nr=wr(yr);dr.default=class{constructor(e){this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=e.headers,this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=e.shouldThrowOnError,this.signal=e.signal,this.isMaybeSingle=e.isMaybeSingle,e.fetch?this.fetch=e.fetch:"undefined"==typeof fetch?this.fetch=jr.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,t){return this.headers=Object.assign({},this.headers),this.headers[e]=t,this}then(e,t){void 0===this.schema||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),"GET"!==this.method&&"HEAD"!==this.method&&(this.headers["Content-Type"]="application/json");let s=(0,this.fetch)(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async e=>{var t,s,n;let a=null,r=null,i=null,o=e.status,l=e.statusText;if(e.ok){if("HEAD"!==this.method){const t=await e.text();""===t||(r="text/csv"===this.headers.Accept||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?t:JSON.parse(t))}const n=null===(t=this.headers.Prefer)||void 0===t?void 0:t.match(/count=(exact|planned|estimated)/),c=null===(s=e.headers.get("content-range"))||void 0===s?void 0:s.split("/");n&&c&&c.length>1&&(i=parseInt(c[1])),this.isMaybeSingle&&"GET"===this.method&&Array.isArray(r)&&(r.length>1?(a={code:"PGRST116",details:`Results contain ${r.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},r=null,i=null,o=406,l="Not Acceptable"):r=1===r.length?r[0]:null)}else{const t=await e.text();try{a=JSON.parse(t),Array.isArray(a)&&404===e.status&&(r=[],a=null,o=200,l="OK")}catch(c){404===e.status&&""===t?(o=204,l="No Content"):a={message:t}}if(a&&this.isMaybeSingle&&(null===(n=null==a?void 0:a.details)||void 0===n?void 0:n.includes("0 rows"))&&(a=null,o=200,l="OK"),a&&this.shouldThrowOnError)throw new Nr.default(a)}return{error:a,data:r,count:i,status:o,statusText:l}});return this.shouldThrowOnError||(s=s.catch(e=>{var t,s,n;return{error:{message:`${null!==(t=null==e?void 0:e.name)&&void 0!==t?t:"FetchError"}: ${null==e?void 0:e.message}`,details:`${null!==(s=null==e?void 0:e.stack)&&void 0!==s?s:""}`,hint:"",code:`${null!==(n=null==e?void 0:e.code)&&void 0!==n?n:""}`},data:null,count:null,status:0,statusText:""}})),s.then(e,t)}returns(){return this}overrideTypes(){return this}};var Sr=l&&l.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(cr,"__esModule",{value:!0});const _r=Sr(dr);let kr=class extends _r.default{select(e){let t=!1;const s=(null!=e?e:"*").split("").map(e=>/\s/.test(e)&&!t?"":('"'===e&&(t=!t),e)).join("");return this.url.searchParams.set("select",s),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(e,{ascending:t=!0,nullsFirst:s,foreignTable:n,referencedTable:a=n}={}){const r=a?`${a}.order`:"order",i=this.url.searchParams.get(r);return this.url.searchParams.set(r,`${i?`${i},`:""}${e}.${t?"asc":"desc"}${void 0===s?"":s?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:t,referencedTable:s=t}={}){const n=void 0===s?"limit":`${s}.limit`;return this.url.searchParams.set(n,`${e}`),this}range(e,t,{foreignTable:s,referencedTable:n=s}={}){const a=void 0===n?"offset":`${n}.offset`,r=void 0===n?"limit":`${n}.limit`;return this.url.searchParams.set(a,`${e}`),this.url.searchParams.set(r,""+(t-e+1)),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return"GET"===this.method?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:e=!1,verbose:t=!1,settings:s=!1,buffers:n=!1,wal:a=!1,format:r="text"}={}){var i;const o=[e?"analyze":null,t?"verbose":null,s?"settings":null,n?"buffers":null,a?"wal":null].filter(Boolean).join("|"),l=null!==(i=this.headers.Accept)&&void 0!==i?i:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${r}; for="${l}"; options=${o};`,this}rollback(){var e;return(null!==(e=this.headers.Prefer)&&void 0!==e?e:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};cr.default=kr;var Cr=l&&l.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(lr,"__esModule",{value:!0});const Er=Cr(cr);let Tr=class extends Er.default{eq(e,t){return this.url.searchParams.append(e,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(e,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(e,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(e,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(e,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(e,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(e,`like.${t}`),this}likeAllOf(e,t){return this.url.searchParams.append(e,`like(all).{${t.join(",")}}`),this}likeAnyOf(e,t){return this.url.searchParams.append(e,`like(any).{${t.join(",")}}`),this}ilike(e,t){return this.url.searchParams.append(e,`ilike.${t}`),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,`ilike(any).{${t.join(",")}}`),this}is(e,t){return this.url.searchParams.append(e,`is.${t}`),this}in(e,t){const s=Array.from(new Set(t)).map(e=>"string"==typeof e&&new RegExp("[,()]").test(e)?`"${e}"`:`${e}`).join(",");return this.url.searchParams.append(e,`in.(${s})`),this}contains(e,t){return"string"==typeof t?this.url.searchParams.append(e,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cs.{${t.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return"string"==typeof t?this.url.searchParams.append(e,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cd.{${t.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(t)}`),this}rangeGt(e,t){return this.url.searchParams.append(e,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(e,`nxl.${t}`),this}rangeLt(e,t){return this.url.searchParams.append(e,`sl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(e,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,`adj.${t}`),this}overlaps(e,t){return"string"==typeof t?this.url.searchParams.append(e,`ov.${t}`):this.url.searchParams.append(e,`ov.{${t.join(",")}}`),this}textSearch(e,t,{config:s,type:n}={}){let a="";"plain"===n?a="pl":"phrase"===n?a="ph":"websearch"===n&&(a="w");const r=void 0===s?"":`(${s})`;return this.url.searchParams.append(e,`${a}fts${r}.${t}`),this}match(e){return Object.entries(e).forEach(([e,t])=>{this.url.searchParams.append(e,`eq.${t}`)}),this}not(e,t,s){return this.url.searchParams.append(e,`not.${t}.${s}`),this}or(e,{foreignTable:t,referencedTable:s=t}={}){const n=s?`${s}.or`:"or";return this.url.searchParams.append(n,`(${e})`),this}filter(e,t,s){return this.url.searchParams.append(e,`${t}.${s}`),this}};lr.default=Tr;var Rr=l&&l.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(or,"__esModule",{value:!0});const Pr=Rr(lr);or.default=class{constructor(e,{headers:t={},schema:s,fetch:n}){this.url=e,this.headers=t,this.schema=s,this.fetch=n}select(e,{head:t=!1,count:s}={}){const n=t?"HEAD":"GET";let a=!1;const r=(null!=e?e:"*").split("").map(e=>/\s/.test(e)&&!a?"":('"'===e&&(a=!a),e)).join("");return this.url.searchParams.set("select",r),s&&(this.headers.Prefer=`count=${s}`),new Pr.default({method:n,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(e,{count:t,defaultToNull:s=!0}={}){const n=[];if(this.headers.Prefer&&n.push(this.headers.Prefer),t&&n.push(`count=${t}`),s||n.push("missing=default"),this.headers.Prefer=n.join(","),Array.isArray(e)){const t=e.reduce((e,t)=>e.concat(Object.keys(t)),[]);if(t.length>0){const e=[...new Set(t)].map(e=>`"${e}"`);this.url.searchParams.set("columns",e.join(","))}}return new Pr.default({method:"POST",url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}upsert(e,{onConflict:t,ignoreDuplicates:s=!1,count:n,defaultToNull:a=!0}={}){const r=[`resolution=${s?"ignore":"merge"}-duplicates`];if(void 0!==t&&this.url.searchParams.set("on_conflict",t),this.headers.Prefer&&r.push(this.headers.Prefer),n&&r.push(`count=${n}`),a||r.push("missing=default"),this.headers.Prefer=r.join(","),Array.isArray(e)){const t=e.reduce((e,t)=>e.concat(Object.keys(t)),[]);if(t.length>0){const e=[...new Set(t)].map(e=>`"${e}"`);this.url.searchParams.set("columns",e.join(","))}}return new Pr.default({method:"POST",url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}update(e,{count:t}={}){const s=[];return this.headers.Prefer&&s.push(this.headers.Prefer),t&&s.push(`count=${t}`),this.headers.Prefer=s.join(","),new Pr.default({method:"PATCH",url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}delete({count:e}={}){const t=[];return e&&t.push(`count=${e}`),this.headers.Prefer&&t.unshift(this.headers.Prefer),this.headers.Prefer=t.join(","),new Pr.default({method:"DELETE",url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};var Dr={},Ar={};Object.defineProperty(Ar,"__esModule",{value:!0}),Ar.version=void 0,Ar.version="0.0.0-automated",Object.defineProperty(Dr,"__esModule",{value:!0}),Dr.DEFAULT_HEADERS=void 0;const Or=Ar;Dr.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${Or.version}`};var Ir=l&&l.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(ir,"__esModule",{value:!0});const Mr=Ir(or),Lr=Ir(lr),$r=Dr;ir.default=class e{constructor(e,{headers:t={},schema:s,fetch:n}={}){this.url=e,this.headers=Object.assign(Object.assign({},$r.DEFAULT_HEADERS),t),this.schemaName=s,this.fetch=n}from(e){const t=new URL(`${this.url}/${e}`);return new Mr.default(t,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new e(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(e,t={},{head:s=!1,get:n=!1,count:a}={}){let r;const i=new URL(`${this.url}/rpc/${e}`);let o;s||n?(r=s?"HEAD":"GET",Object.entries(t).filter(([e,t])=>void 0!==t).map(([e,t])=>[e,Array.isArray(t)?`{${t.join(",")}}`:`${t}`]).forEach(([e,t])=>{i.searchParams.append(e,t)})):(r="POST",o=t);const l=Object.assign({},this.headers);return a&&(l.Prefer=`count=${a}`),new Lr.default({method:r,url:i,headers:l,schema:this.schemaName,body:o,fetch:this.fetch,allowEmpty:!1})}};var Ur=l&&l.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(rr,"__esModule",{value:!0}),rr.PostgrestError=rr.PostgrestBuilder=rr.PostgrestTransformBuilder=rr.PostgrestFilterBuilder=rr.PostgrestQueryBuilder=rr.PostgrestClient=void 0;const Fr=Ur(ir);rr.PostgrestClient=Fr.default;const qr=Ur(or);rr.PostgrestQueryBuilder=qr.default;const zr=Ur(lr);rr.PostgrestFilterBuilder=zr.default;const Br=Ur(cr);rr.PostgrestTransformBuilder=Br.default;const Wr=Ur(dr);rr.PostgrestBuilder=Wr.default;const Hr=Ur(yr);rr.PostgrestError=Hr.default;var Kr=rr.default={PostgrestClient:Fr.default,PostgrestQueryBuilder:qr.default,PostgrestFilterBuilder:zr.default,PostgrestTransformBuilder:Br.default,PostgrestBuilder:Wr.default,PostgrestError:Hr.default};const{PostgrestClient:Vr,PostgrestQueryBuilder:Gr,PostgrestFilterBuilder:Jr,PostgrestTransformBuilder:Yr,PostgrestBuilder:Qr,PostgrestError:Xr}=Kr;class Zr{static detectEnvironment(){var e;if("undefined"!=typeof WebSocket)return{type:"native",constructor:WebSocket};if("undefined"!=typeof globalThis&&void 0!==globalThis.WebSocket)return{type:"native",constructor:globalThis.WebSocket};if("undefined"!=typeof global&&void 0!==global.WebSocket)return{type:"native",constructor:global.WebSocket};if("undefined"!=typeof globalThis&&void 0!==globalThis.WebSocketPair&&void 0===globalThis.WebSocket)return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if("undefined"!=typeof globalThis&&globalThis.EdgeRuntime||"undefined"!=typeof navigator&&(null===(e=navigator.userAgent)||void 0===e?void 0:e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if("undefined"!=typeof process&&process.versions&&process.versions.node){const e=parseInt(process.versions.node.split(".")[0]);return e>=22?void 0!==globalThis.WebSocket?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${e} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${e} detected without native WebSocket support.`,workaround:'For Node.js < 22, install "ws" package and provide it via the transport option:\nimport ws from "ws"\nnew RealtimeClient(url, { transport: ws })'}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let t=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(t+=`\n\nSuggested solution: ${e.workaround}`),new Error(t)}static createWebSocket(e,t){return new(this.getWebSocketConstructor())(e,t)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return"native"===e.type||"ws"===e.type}catch(e){return!1}}}const ei=1e4;var ti,si,ni,ai,ri,ii,oi,li,ci,di,ui;(si=ti||(ti={}))[si.connecting=0]="connecting",si[si.open=1]="open",si[si.closing=2]="closing",si[si.closed=3]="closed",(ai=ni||(ni={})).closed="closed",ai.errored="errored",ai.joined="joined",ai.joining="joining",ai.leaving="leaving",(ii=ri||(ri={})).close="phx_close",ii.error="phx_error",ii.join="phx_join",ii.reply="phx_reply",ii.leave="phx_leave",ii.access_token="access_token",(oi||(oi={})).websocket="websocket",(ci=li||(li={})).Connecting="connecting",ci.Open="open",ci.Closing="closing",ci.Closed="closed";class hi{constructor(){this.HEADER_LENGTH=1}decode(e,t){return e.constructor===ArrayBuffer?t(this._binaryDecode(e)):t("string"==typeof e?JSON.parse(e):{})}_binaryDecode(e){const t=new DataView(e),s=new TextDecoder;return this._decodeBroadcast(e,t,s)}_decodeBroadcast(e,t,s){const n=t.getUint8(1),a=t.getUint8(2);let r=this.HEADER_LENGTH+2;const i=s.decode(e.slice(r,r+n));r+=n;const o=s.decode(e.slice(r,r+a));r+=a;return{ref:null,topic:i,event:o,payload:JSON.parse(s.decode(e.slice(r,e.byteLength)))}}}class mi{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}(ui=di||(di={})).abstime="abstime",ui.bool="bool",ui.date="date",ui.daterange="daterange",ui.float4="float4",ui.float8="float8",ui.int2="int2",ui.int4="int4",ui.int4range="int4range",ui.int8="int8",ui.int8range="int8range",ui.json="json",ui.jsonb="jsonb",ui.money="money",ui.numeric="numeric",ui.oid="oid",ui.reltime="reltime",ui.text="text",ui.time="time",ui.timestamp="timestamp",ui.timestamptz="timestamptz",ui.timetz="timetz",ui.tsrange="tsrange",ui.tstzrange="tstzrange";const pi=(e,t,s={})=>{var n;const a=null!==(n=s.skipTypes)&&void 0!==n?n:[];return Object.keys(t).reduce((s,n)=>(s[n]=fi(n,e,t,a),s),{})},fi=(e,t,s,n)=>{const a=t.find(t=>t.name===e),r=null==a?void 0:a.type,i=s[e];return r&&!n.includes(r)?gi(r,i):xi(i)},gi=(e,t)=>{if("_"===e.charAt(0)){const s=e.slice(1,e.length);return wi(t,s)}switch(e){case di.bool:return vi(t);case di.float4:case di.float8:case di.int2:case di.int4:case di.int8:case di.numeric:case di.oid:return yi(t);case di.json:case di.jsonb:return bi(t);case di.timestamp:return ji(t);case di.abstime:case di.date:case di.daterange:case di.int4range:case di.int8range:case di.money:case di.reltime:case di.text:case di.time:case di.timestamptz:case di.timetz:case di.tsrange:case di.tstzrange:default:return xi(t)}},xi=e=>e,vi=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},yi=e=>{if("string"==typeof e){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},bi=e=>{if("string"==typeof e)try{return JSON.parse(e)}catch(t){return e}return e},wi=(e,t)=>{if("string"!=typeof e)return e;const s=e.length-1,n=e[s];if("{"===e[0]&&"}"===n){let n;const r=e.slice(1,s);try{n=JSON.parse("["+r+"]")}catch(a){n=r?r.split(","):[]}return n.map(e=>gi(t,e))}return e},ji=e=>"string"==typeof e?e.replace(" ","T"):e,Ni=e=>{let t=e;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")+"/api/broadcast"};class Si{constructor(e,t,s={},n=1e4){this.channel=e,this.event=t,this.payload=s,this.timeout=n,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var s;return this._hasReceived(e)&&t(null===(s=this.receivedResp)||void 0===s?void 0:s.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);this.channel._on(this.refEvent,{},e=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=e,this._matchReceive(e)}),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter(t=>t.status===e).forEach(e=>e.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var _i,ki,Ci,Ei,Ti,Ri,Pi,Di;(ki=_i||(_i={})).SYNC="sync",ki.JOIN="join",ki.LEAVE="leave";class Ai{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const s=(null==t?void 0:t.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(s.state,{},e=>{const{onJoin:t,onLeave:s,onSync:n}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Ai.syncState(this.state,e,t,s),this.pendingDiffs.forEach(e=>{this.state=Ai.syncDiff(this.state,e,t,s)}),this.pendingDiffs=[],n()}),this.channel._on(s.diff,{},e=>{const{onJoin:t,onLeave:s,onSync:n}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(e):(this.state=Ai.syncDiff(this.state,e,t,s),n())}),this.onJoin((e,t,s)=>{this.channel._trigger("presence",{event:"join",key:e,currentPresences:t,newPresences:s})}),this.onLeave((e,t,s)=>{this.channel._trigger("presence",{event:"leave",key:e,currentPresences:t,leftPresences:s})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,s,n){const a=this.cloneDeep(e),r=this.transformState(t),i={},o={};return this.map(a,(e,t)=>{r[e]||(o[e]=t)}),this.map(r,(e,t)=>{const s=a[e];if(s){const n=t.map(e=>e.presence_ref),a=s.map(e=>e.presence_ref),r=t.filter(e=>a.indexOf(e.presence_ref)<0),l=s.filter(e=>n.indexOf(e.presence_ref)<0);r.length>0&&(i[e]=r),l.length>0&&(o[e]=l)}else i[e]=t}),this.syncDiff(a,{joins:i,leaves:o},s,n)}static syncDiff(e,t,s,n){const{joins:a,leaves:r}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return s||(s=()=>{}),n||(n=()=>{}),this.map(a,(t,n)=>{var a;const r=null!==(a=e[t])&&void 0!==a?a:[];if(e[t]=this.cloneDeep(n),r.length>0){const s=e[t].map(e=>e.presence_ref),n=r.filter(e=>s.indexOf(e.presence_ref)<0);e[t].unshift(...n)}s(t,r,n)}),this.map(r,(t,s)=>{let a=e[t];if(!a)return;const r=s.map(e=>e.presence_ref);a=a.filter(e=>r.indexOf(e.presence_ref)<0),e[t]=a,n(t,a,s),0===a.length&&delete e[t]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(s=>t(s,e[s]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,s)=>{const n=e[s];return t[s]="metas"in n?n.metas.map(e=>(e.presence_ref=e.phx_ref,delete e.phx_ref,delete e.phx_ref_prev,e)):n,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}(Ei=Ci||(Ci={})).ALL="*",Ei.INSERT="INSERT",Ei.UPDATE="UPDATE",Ei.DELETE="DELETE",(Ri=Ti||(Ti={})).BROADCAST="broadcast",Ri.PRESENCE="presence",Ri.POSTGRES_CHANGES="postgres_changes",Ri.SYSTEM="system",(Di=Pi||(Pi={})).SUBSCRIBED="SUBSCRIBED",Di.TIMED_OUT="TIMED_OUT",Di.CLOSED="CLOSED",Di.CHANNEL_ERROR="CHANNEL_ERROR";class Oi{constructor(e,t={config:{}},s){this.topic=e,this.params=t,this.socket=s,this.bindings={},this.state=ni.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new Si(this,ri.join,this.params,this.timeout),this.rejoinTimer=new mi(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=ni.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(e=>e.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=ni.closed,this.socket._remove(this)}),this._onError(e=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,e),this.state=ni.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=ni.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",e=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,e),this.state=ni.errored,this.rejoinTimer.scheduleTimeout())}),this._on(ri.reply,{},(e,t)=>{this._trigger(this._replyEventName(t),e)}),this.presence=new Ai(this),this.broadcastEndpointURL=Ni(this.socket.endPoint),this.private=this.params.config.private||!1}subscribe(e,t=this.timeout){var s,n;if(this.socket.isConnected()||this.socket.connect(),this.state==ni.closed){const{config:{broadcast:a,presence:r,private:i}}=this.params,o=null!==(n=null===(s=this.bindings.postgres_changes)||void 0===s?void 0:s.map(e=>e.filter))&&void 0!==n?n:[],l=!!this.bindings[Ti.PRESENCE]&&this.bindings[Ti.PRESENCE].length>0,c={},d={broadcast:a,presence:Object.assign(Object.assign({},r),{enabled:l}),postgres_changes:o,private:i};this.socket.accessTokenValue&&(c.access_token=this.socket.accessTokenValue),this._onError(t=>null==e?void 0:e(Pi.CHANNEL_ERROR,t)),this._onClose(()=>null==e?void 0:e(Pi.CLOSED)),this.updateJoinPayload(Object.assign({config:d},c)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",async({postgres_changes:t})=>{var s;if(this.socket.setAuth(),void 0!==t){const n=this.bindings.postgres_changes,a=null!==(s=null==n?void 0:n.length)&&void 0!==s?s:0,r=[];for(let s=0;s<a;s++){const a=n[s],{filter:{event:i,schema:o,table:l,filter:c}}=a,d=t&&t[s];if(!d||d.event!==i||d.schema!==o||d.table!==l||d.filter!==c)return this.unsubscribe(),this.state=ni.errored,void(null==e||e(Pi.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes")));r.push(Object.assign(Object.assign({},a),{id:d.id}))}return this.bindings.postgres_changes=r,void(e&&e(Pi.SUBSCRIBED))}null==e||e(Pi.SUBSCRIBED)}).receive("error",t=>{this.state=ni.errored,null==e||e(Pi.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(t).join(", ")||"error")))}).receive("timeout",()=>{null==e||e(Pi.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,t={}){return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,t,s){return this.state===ni.joined&&e===Ti.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(e,t,s)}async send(e,t={}){var s,n;if(this._canPush()||"broadcast"!==e.type)return new Promise(s=>{var n,a,r;const i=this._push(e.type,e,t.timeout||this.timeout);"broadcast"!==e.type||(null===(r=null===(a=null===(n=this.params)||void 0===n?void 0:n.config)||void 0===a?void 0:a.broadcast)||void 0===r?void 0:r.ack)||s("ok"),i.receive("ok",()=>s("ok")),i.receive("error",()=>s("error")),i.receive("timeout",()=>s("timed out"))});{const{event:r,payload:i}=e,o={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:r,payload:i,private:this.private}]})};try{const e=await this._fetchWithTimeout(this.broadcastEndpointURL,o,null!==(s=t.timeout)&&void 0!==s?s:this.timeout);return await(null===(n=e.body)||void 0===n?void 0:n.cancel()),e.ok?"ok":"error"}catch(a){return"AbortError"===a.name?"timed out":"error"}}}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=ni.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(ri.close,"leave",this._joinRef())};this.joinPush.destroy();let s=null;return new Promise(n=>{s=new Si(this,ri.leave,{},e),s.receive("ok",()=>{t(),n("ok")}).receive("timeout",()=>{t(),n("timed out")}).receive("error",()=>{n("error")}),s.send(),this._canPush()||s.trigger("ok",{})}).finally(()=>{null==s||s.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=ni.closed,this.bindings={}}async _fetchWithTimeout(e,t,s){const n=new AbortController,a=setTimeout(()=>n.abort(),s),r=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:n.signal}));return clearTimeout(a),r}_push(e,t,s=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let n=new Si(this,e,t,s);return this._canPush()?n.send():this._addToPushBuffer(n),n}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>100){const e=this.pushBuffer.shift();e&&(e.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${e.event}`,e.payload))}}_onMessage(e,t,s){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,s){var n,a;const r=e.toLocaleLowerCase(),{close:i,error:o,leave:l,join:c}=ri;if(s&&[i,o,l,c].indexOf(r)>=0&&s!==this._joinRef())return;let d=this._onMessage(r,t,s);if(t&&!d)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(r)?null===(n=this.bindings.postgres_changes)||void 0===n||n.filter(e=>{var t,s,n;return"*"===(null===(t=e.filter)||void 0===t?void 0:t.event)||(null===(n=null===(s=e.filter)||void 0===s?void 0:s.event)||void 0===n?void 0:n.toLocaleLowerCase())===r}).map(e=>e.callback(d,s)):null===(a=this.bindings[r])||void 0===a||a.filter(e=>{var s,n,a,i,o,l;if(["broadcast","presence","postgres_changes"].includes(r)){if("id"in e){const r=e.id,i=null===(s=e.filter)||void 0===s?void 0:s.event;return r&&(null===(n=t.ids)||void 0===n?void 0:n.includes(r))&&("*"===i||(null==i?void 0:i.toLocaleLowerCase())===(null===(a=t.data)||void 0===a?void 0:a.type.toLocaleLowerCase()))}{const s=null===(o=null===(i=null==e?void 0:e.filter)||void 0===i?void 0:i.event)||void 0===o?void 0:o.toLocaleLowerCase();return"*"===s||s===(null===(l=null==t?void 0:t.event)||void 0===l?void 0:l.toLocaleLowerCase())}}return e.type.toLocaleLowerCase()===r}).map(e=>{if("object"==typeof d&&"ids"in d){const e=d.data,{schema:t,table:s,commit_timestamp:n,type:a,errors:r}=e,i={schema:t,table:s,commit_timestamp:n,eventType:a,new:{},old:{},errors:r};d=Object.assign(Object.assign({},i),this._getPayloadRecords(e))}e.callback(d,s)})}_isClosed(){return this.state===ni.closed}_isJoined(){return this.state===ni.joined}_isJoining(){return this.state===ni.joining}_isLeaving(){return this.state===ni.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,s){const n=e.toLocaleLowerCase(),a={type:n,filter:t,callback:s};return this.bindings[n]?this.bindings[n].push(a):this.bindings[n]=[a],this}_off(e,t){const s=e.toLocaleLowerCase();return this.bindings[s]&&(this.bindings[s]=this.bindings[s].filter(e=>{var n;return!((null===(n=e.type)||void 0===n?void 0:n.toLocaleLowerCase())===s&&Oi.isEqual(e.filter,t))})),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const s in e)if(e[s]!==t[s])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(ri.close,{},e)}_onError(e){this._on(ri.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=ni.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return"INSERT"!==e.type&&"UPDATE"!==e.type||(t.new=pi(e.columns,e.record)),"UPDATE"!==e.type&&"DELETE"!==e.type||(t.old=pi(e.columns,e.old_record)),t}}const Ii=()=>{},Mi=25e3,Li=10,$i=100,Ui=[1e3,2e3,5e3,1e4];class Fi{constructor(e,t){var s;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=ei,this.transport=null,this.heartbeatIntervalMs=Mi,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Ii,this.ref=0,this.reconnectTimer=null,this.logger=Ii,this.conn=null,this.sendBuffer=[],this.serializer=new hi,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=e=>{let t;return t=e||("undefined"==typeof fetch?(...e)=>Ne(async()=>{const{default:e}=await Promise.resolve().then(()=>xr);return{default:e}},void 0).then(({default:t})=>t(...e)).catch(e=>{throw new Error(`Failed to load @supabase/node-fetch: ${e.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):fetch),(...e)=>t(...e)},!(null===(s=null==t?void 0:t.params)||void 0===s?void 0:s.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=t.params.apikey,this.endPoint=`${e}/${oi.websocket}`,this.httpEndpoint=Ni(e),this._initializeOptions(t),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(null==t?void 0:t.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||null!==this.conn&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=Zr.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const t=e.message;if(t.includes("Node.js"))throw new Error(`${t}\n\nTo use Realtime in Node.js, you need to provide a WebSocket implementation:\n\nOption 1: Use Node.js 22+ which has native WebSocket support\nOption 2: Install and provide the "ws" package:\n\n  npm install ws\n\n  import ws from "ws"\n  const client = new RealtimeClient(url, {\n    ...options,\n    transport: ws\n  })`);throw new Error(`WebSocket not available: ${t}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:"1.0.0"}))}disconnect(e,t){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const s=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(s),this._setConnectionState("disconnected")},e?this.conn.close(e,null!=t?t:""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return 0===this.channels.length&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map(e=>e.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,t,s){this.logger(e,t,s)}connectionState(){switch(this.conn&&this.conn.readyState){case ti.connecting:return li.Connecting;case ti.open:return li.Open;case ti.closing:return li.Closing;default:return li.Closed}}isConnected(){return this.connectionState()===li.Open}isConnecting(){return"connecting"===this._connectionState}isDisconnecting(){return"disconnecting"===this._connectionState}channel(e,t={config:{}}){const s=`realtime:${e}`,n=this.getChannels().find(e=>e.topic===s);if(n)return n;{const s=new Oi(`realtime:${e}`,t,this);return this.channels.push(s),s}}push(e){const{topic:t,event:s,payload:n,ref:a}=e,r=()=>{this.encode(e,e=>{var t;null===(t=this.conn)||void 0===t||t.send(e)})};this.log("push",`${t} ${s} (${a})`,n),this.isConnected()?r():this.sendBuffer.push(r)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(this.isConnected()){if(this.pendingHeartbeatRef)return this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),this._wasManualDisconnect=!1,null===(e=this.conn)||void 0===e||e.close(1e3,"heartbeat timeout"),void setTimeout(()=>{var e;this.isConnected()||null===(e=this.reconnectTimer)||void 0===e||e.scheduleTimeout()},$i);this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),this._setAuthSafely("heartbeat")}else this.heartbeatCallback("disconnected")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(t=>t.topic===e&&(t._isJoined()||t._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,e=>{"phoenix"===e.topic&&"phx_reply"===e.event&&this.heartbeatCallback("ok"===e.payload.status?"ok":"error"),e.ref&&e.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:t,event:s,payload:n,ref:a}=e,r=a?`(${a})`:"",i=n.status||"";this.log("receive",`${i} ${t} ${s} ${r}`.trim(),n),this.channels.filter(e=>e._isMember(t)).forEach(e=>e._trigger(s,n,a)),this._triggerStateCallbacks("message",e)})}_clearTimer(e){var t;"heartbeat"===e&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):"reconnect"===e&&(null===(t=this.reconnectTimer)||void 0===t||t.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=e=>{this.log("worker","worker error",e.message),this.workerRef.terminate()},this.workerRef.onmessage=e=>{"keepAlive"===e.data.event&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var t;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||null===(t=this.reconnectTimer)||void 0===t||t.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(ri.error))}_appendParams(e,t){if(0===Object.keys(t).length)return e;const s=e.match(/\?/)?"&":"?";return`${e}${s}${new URLSearchParams(t)}`}_workerObjectUrl(e){let t;if(e)t=e;else{const e=new Blob(['\n  addEventListener("message", (e) => {\n    if (e.data.event === "start") {\n      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);\n    }\n  });'],{type:"application/javascript"});t=URL.createObjectURL(e)}return t}_setConnectionState(e,t=!1){this._connectionState=e,"connecting"===e?this._wasManualDisconnect=!1:"disconnecting"===e&&(this._wasManualDisconnect=t)}async _performAuth(e=null){let t;t=e||(this.accessToken?await this.accessToken():this.accessTokenValue),this.accessTokenValue!=t&&(this.accessTokenValue=t,this.channels.forEach(e=>{const s={access_token:t,version:"realtime-js/2.15.1"};t&&e.updateJoinPayload(s),e.joinedOnce&&e._isJoined()&&e._push(ri.access_token,{access_token:t})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this.setAuth().catch(t=>{this.log("error",`error setting auth in ${e}`,t)})}_triggerStateCallbacks(e,t){try{this.stateChangeCallbacks[e].forEach(s=>{try{s(t)}catch(n){this.log("error",`error in ${e} callback`,n)}})}catch(s){this.log("error",`error triggering ${e} callbacks`,s)}}_setupReconnectionTimer(){this.reconnectTimer=new mi(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Li)},this.reconnectAfterMs)}_initializeOptions(e){var t,s,n,a,r,i,o,l;if(this.transport=null!==(t=null==e?void 0:e.transport)&&void 0!==t?t:null,this.timeout=null!==(s=null==e?void 0:e.timeout)&&void 0!==s?s:ei,this.heartbeatIntervalMs=null!==(n=null==e?void 0:e.heartbeatIntervalMs)&&void 0!==n?n:Mi,this.worker=null!==(a=null==e?void 0:e.worker)&&void 0!==a&&a,this.accessToken=null!==(r=null==e?void 0:e.accessToken)&&void 0!==r?r:null,(null==e?void 0:e.params)&&(this.params=e.params),(null==e?void 0:e.logger)&&(this.logger=e.logger),((null==e?void 0:e.logLevel)||(null==e?void 0:e.log_level))&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=null!==(i=null==e?void 0:e.reconnectAfterMs)&&void 0!==i?i:e=>Ui[e-1]||1e4,this.encode=null!==(o=null==e?void 0:e.encode)&&void 0!==o?o:(e,t)=>t(JSON.stringify(e)),this.decode=null!==(l=null==e?void 0:e.decode)&&void 0!==l?l:this.serializer.decode.bind(this.serializer),this.worker){if("undefined"!=typeof window&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=null==e?void 0:e.workerUrl}}}class qi extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function zi(e){return"object"==typeof e&&null!==e&&"__isStorageError"in e}class Bi extends qi{constructor(e,t,s){super(e),this.name="StorageApiError",this.status=t,this.statusCode=s}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Wi extends qi{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}var Hi=function(e,t,s,n){return new(s||(s=Promise))(function(a,r){function i(e){try{l(n.next(e))}catch(t){r(t)}}function o(e){try{l(n.throw(e))}catch(t){r(t)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof s?t:new s(function(e){e(t)})).then(i,o)}l((n=n.apply(e,t||[])).next())})};const Ki=e=>{let t;return t=e||("undefined"==typeof fetch?(...e)=>Ne(async()=>{const{default:e}=await Promise.resolve().then(()=>xr);return{default:e}},void 0).then(({default:t})=>t(...e)):fetch),(...e)=>t(...e)},Vi=e=>{if(Array.isArray(e))return e.map(e=>Vi(e));if("function"==typeof e||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([e,s])=>{const n=e.replace(/([-_][a-z])/gi,e=>e.toUpperCase().replace(/[-_]/g,""));t[n]=Vi(s)}),t};var Gi=function(e,t,s,n){return new(s||(s=Promise))(function(a,r){function i(e){try{l(n.next(e))}catch(t){r(t)}}function o(e){try{l(n.throw(e))}catch(t){r(t)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof s?t:new s(function(e){e(t)})).then(i,o)}l((n=n.apply(e,t||[])).next())})};const Ji=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),Yi=(e,t,s)=>Gi(void 0,void 0,void 0,function*(){const n=yield Hi(void 0,void 0,void 0,function*(){return"undefined"==typeof Response?(yield Ne(()=>Promise.resolve().then(()=>xr),void 0)).Response:Response});e instanceof n&&!(null==s?void 0:s.noResolveJson)?e.json().then(s=>{const n=e.status||500,a=(null==s?void 0:s.statusCode)||n+"";t(new Bi(Ji(s),n,a))}).catch(e=>{t(new Wi(Ji(e),e))}):t(new Wi(Ji(e),e))}),Qi=(e,t,s,n)=>{const a={method:e,headers:(null==t?void 0:t.headers)||{}};return"GET"!==e&&n?((e=>{if("object"!=typeof e||null===e)return!1;const t=Object.getPrototypeOf(e);return!(null!==t&&t!==Object.prototype&&null!==Object.getPrototypeOf(t)||Symbol.toStringTag in e||Symbol.iterator in e)})(n)?(a.headers=Object.assign({"Content-Type":"application/json"},null==t?void 0:t.headers),a.body=JSON.stringify(n)):a.body=n,(null==t?void 0:t.duplex)&&(a.duplex=t.duplex),Object.assign(Object.assign({},a),s)):a};function Xi(e,t,s,n,a,r){return Gi(this,void 0,void 0,function*(){return new Promise((i,o)=>{e(s,Qi(t,n,a,r)).then(e=>{if(!e.ok)throw e;return(null==n?void 0:n.noResolveJson)?e:e.json()}).then(e=>i(e)).catch(e=>Yi(e,o,n))})})}function Zi(e,t,s,n){return Gi(this,void 0,void 0,function*(){return Xi(e,"GET",t,s,n)})}function eo(e,t,s,n,a){return Gi(this,void 0,void 0,function*(){return Xi(e,"POST",t,n,a,s)})}function to(e,t,s,n,a){return Gi(this,void 0,void 0,function*(){return Xi(e,"PUT",t,n,a,s)})}function so(e,t,s,n,a){return Gi(this,void 0,void 0,function*(){return Xi(e,"DELETE",t,n,a,s)})}var no=function(e,t,s,n){return new(s||(s=Promise))(function(a,r){function i(e){try{l(n.next(e))}catch(t){r(t)}}function o(e){try{l(n.throw(e))}catch(t){r(t)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof s?t:new s(function(e){e(t)})).then(i,o)}l((n=n.apply(e,t||[])).next())})};const ao={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},ro={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class io{constructor(e,t={},s,n){this.url=e,this.headers=t,this.bucketId=s,this.fetch=Ki(n)}uploadOrUpdate(e,t,s,n){return no(this,void 0,void 0,function*(){try{let a;const r=Object.assign(Object.assign({},ro),n);let i=Object.assign(Object.assign({},this.headers),"POST"===e&&{"x-upsert":String(r.upsert)});const o=r.metadata;"undefined"!=typeof Blob&&s instanceof Blob?(a=new FormData,a.append("cacheControl",r.cacheControl),o&&a.append("metadata",this.encodeMetadata(o)),a.append("",s)):"undefined"!=typeof FormData&&s instanceof FormData?(a=s,a.append("cacheControl",r.cacheControl),o&&a.append("metadata",this.encodeMetadata(o))):(a=s,i["cache-control"]=`max-age=${r.cacheControl}`,i["content-type"]=r.contentType,o&&(i["x-metadata"]=this.toBase64(this.encodeMetadata(o)))),(null==n?void 0:n.headers)&&(i=Object.assign(Object.assign({},i),n.headers));const l=this._removeEmptyFolders(t),c=this._getFinalPath(l),d=yield("PUT"==e?to:eo)(this.fetch,`${this.url}/object/${c}`,a,Object.assign({headers:i},(null==r?void 0:r.duplex)?{duplex:r.duplex}:{}));return{data:{path:l,id:d.Id,fullPath:d.Key},error:null}}catch(a){if(zi(a))return{data:null,error:a};throw a}})}upload(e,t,s){return no(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,s)})}uploadToSignedUrl(e,t,s,n){return no(this,void 0,void 0,function*(){const a=this._removeEmptyFolders(e),r=this._getFinalPath(a),i=new URL(this.url+`/object/upload/sign/${r}`);i.searchParams.set("token",t);try{let e;const t=Object.assign({upsert:ro.upsert},n),r=Object.assign(Object.assign({},this.headers),{"x-upsert":String(t.upsert)});"undefined"!=typeof Blob&&s instanceof Blob?(e=new FormData,e.append("cacheControl",t.cacheControl),e.append("",s)):"undefined"!=typeof FormData&&s instanceof FormData?(e=s,e.append("cacheControl",t.cacheControl)):(e=s,r["cache-control"]=`max-age=${t.cacheControl}`,r["content-type"]=t.contentType);return{data:{path:a,fullPath:(yield to(this.fetch,i.toString(),e,{headers:r})).Key},error:null}}catch(o){if(zi(o))return{data:null,error:o};throw o}})}createSignedUploadUrl(e,t){return no(this,void 0,void 0,function*(){try{let s=this._getFinalPath(e);const n=Object.assign({},this.headers);(null==t?void 0:t.upsert)&&(n["x-upsert"]="true");const a=yield eo(this.fetch,`${this.url}/object/upload/sign/${s}`,{},{headers:n}),r=new URL(this.url+a.url),i=r.searchParams.get("token");if(!i)throw new qi("No token returned by API");return{data:{signedUrl:r.toString(),path:e,token:i},error:null}}catch(s){if(zi(s))return{data:null,error:s};throw s}})}update(e,t,s){return no(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,s)})}move(e,t,s){return no(this,void 0,void 0,function*(){try{return{data:yield eo(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:null==s?void 0:s.destinationBucket},{headers:this.headers}),error:null}}catch(n){if(zi(n))return{data:null,error:n};throw n}})}copy(e,t,s){return no(this,void 0,void 0,function*(){try{return{data:{path:(yield eo(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:null==s?void 0:s.destinationBucket},{headers:this.headers})).Key},error:null}}catch(n){if(zi(n))return{data:null,error:n};throw n}})}createSignedUrl(e,t,s){return no(this,void 0,void 0,function*(){try{let n=this._getFinalPath(e),a=yield eo(this.fetch,`${this.url}/object/sign/${n}`,Object.assign({expiresIn:t},(null==s?void 0:s.transform)?{transform:s.transform}:{}),{headers:this.headers});const r=(null==s?void 0:s.download)?`&download=${!0===s.download?"":s.download}`:"";return a={signedUrl:encodeURI(`${this.url}${a.signedURL}${r}`)},{data:a,error:null}}catch(n){if(zi(n))return{data:null,error:n};throw n}})}createSignedUrls(e,t,s){return no(this,void 0,void 0,function*(){try{const n=yield eo(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:t,paths:e},{headers:this.headers}),a=(null==s?void 0:s.download)?`&download=${!0===s.download?"":s.download}`:"";return{data:n.map(e=>Object.assign(Object.assign({},e),{signedUrl:e.signedURL?encodeURI(`${this.url}${e.signedURL}${a}`):null})),error:null}}catch(n){if(zi(n))return{data:null,error:n};throw n}})}download(e,t){return no(this,void 0,void 0,function*(){const s=void 0!==(null==t?void 0:t.transform)?"render/image/authenticated":"object",n=this.transformOptsToQueryString((null==t?void 0:t.transform)||{}),a=n?`?${n}`:"";try{const t=this._getFinalPath(e),n=yield Zi(this.fetch,`${this.url}/${s}/${t}${a}`,{headers:this.headers,noResolveJson:!0});return{data:yield n.blob(),error:null}}catch(r){if(zi(r))return{data:null,error:r};throw r}})}info(e){return no(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{const e=yield Zi(this.fetch,`${this.url}/object/info/${t}`,{headers:this.headers});return{data:Vi(e),error:null}}catch(s){if(zi(s))return{data:null,error:s};throw s}})}exists(e){return no(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{return yield function(e,t,s,n){return Gi(this,void 0,void 0,function*(){return Xi(e,"HEAD",t,Object.assign(Object.assign({},s),{noResolveJson:!0}),n)})}(this.fetch,`${this.url}/object/${t}`,{headers:this.headers}),{data:!0,error:null}}catch(s){if(zi(s)&&s instanceof Wi){const e=s.originalError;if([400,404].includes(null==e?void 0:e.status))return{data:!1,error:s}}throw s}})}getPublicUrl(e,t){const s=this._getFinalPath(e),n=[],a=(null==t?void 0:t.download)?`download=${!0===t.download?"":t.download}`:"";""!==a&&n.push(a);const r=void 0!==(null==t?void 0:t.transform)?"render/image":"object",i=this.transformOptsToQueryString((null==t?void 0:t.transform)||{});""!==i&&n.push(i);let o=n.join("&");return""!==o&&(o=`?${o}`),{data:{publicUrl:encodeURI(`${this.url}/${r}/public/${s}${o}`)}}}remove(e){return no(this,void 0,void 0,function*(){try{return{data:yield so(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(t){if(zi(t))return{data:null,error:t};throw t}})}list(e,t,s){return no(this,void 0,void 0,function*(){try{const n=Object.assign(Object.assign(Object.assign({},ao),t),{prefix:e||""});return{data:yield eo(this.fetch,`${this.url}/object/list/${this.bucketId}`,n,{headers:this.headers},s),error:null}}catch(n){if(zi(n))return{data:null,error:n};throw n}})}listV2(e,t){return no(this,void 0,void 0,function*(){try{const s=Object.assign({},e);return{data:yield eo(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,s,{headers:this.headers},t),error:null}}catch(s){if(zi(s))return{data:null,error:s};throw s}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return"undefined"!=typeof Buffer?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}}const oo={"X-Client-Info":"storage-js/2.11.0"};var lo=function(e,t,s,n){return new(s||(s=Promise))(function(a,r){function i(e){try{l(n.next(e))}catch(t){r(t)}}function o(e){try{l(n.throw(e))}catch(t){r(t)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof s?t:new s(function(e){e(t)})).then(i,o)}l((n=n.apply(e,t||[])).next())})};class co{constructor(e,t={},s,n){const a=new URL(e);if(null==n?void 0:n.useNewHostname){/supabase\.(co|in|red)$/.test(a.hostname)&&!a.hostname.includes("storage.supabase.")&&(a.hostname=a.hostname.replace("supabase.","storage.supabase."))}this.url=a.href,this.headers=Object.assign(Object.assign({},oo),t),this.fetch=Ki(s)}listBuckets(){return lo(this,void 0,void 0,function*(){try{return{data:yield Zi(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(zi(e))return{data:null,error:e};throw e}})}getBucket(e){return lo(this,void 0,void 0,function*(){try{return{data:yield Zi(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(t){if(zi(t))return{data:null,error:t};throw t}})}createBucket(e,t={public:!1}){return lo(this,void 0,void 0,function*(){try{return{data:yield eo(this.fetch,`${this.url}/bucket`,{id:e,name:e,type:t.type,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(zi(s))return{data:null,error:s};throw s}})}updateBucket(e,t){return lo(this,void 0,void 0,function*(){try{return{data:yield to(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(zi(s))return{data:null,error:s};throw s}})}emptyBucket(e){return lo(this,void 0,void 0,function*(){try{return{data:yield eo(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(t){if(zi(t))return{data:null,error:t};throw t}})}deleteBucket(e){return lo(this,void 0,void 0,function*(){try{return{data:yield so(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(zi(t))return{data:null,error:t};throw t}})}}class uo extends co{constructor(e,t={},s,n){super(e,t,s,n)}from(e){return new io(this.url,this.headers,e,this.fetch)}}let ho="";ho="undefined"!=typeof Deno?"deno":"undefined"!=typeof document?"web":"undefined"!=typeof navigator&&"ReactNative"===navigator.product?"react-native":"node";const mo={headers:{"X-Client-Info":`supabase-js-${ho}/2.55.0`}},po={schema:"public"},fo={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},go={};var xo=function(e,t,s,n){return new(s||(s=Promise))(function(a,r){function i(e){try{l(n.next(e))}catch(t){r(t)}}function o(e){try{l(n.throw(e))}catch(t){r(t)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof s?t:new s(function(e){e(t)})).then(i,o)}l((n=n.apply(e,t||[])).next())})};const vo=(e,t,s)=>{const n=(e=>{let t;return t=e||("undefined"==typeof fetch?mr:fetch),(...e)=>t(...e)})(s),a="undefined"==typeof Headers?pr:Headers;return(s,r)=>xo(void 0,void 0,void 0,function*(){var i;const o=null!==(i=yield t())&&void 0!==i?i:e;let l=new a(null==r?void 0:r.headers);return l.has("apikey")||l.set("apikey",e),l.has("Authorization")||l.set("Authorization",`Bearer ${o}`),n(s,Object.assign(Object.assign({},r),{headers:l}))})};var yo=function(e,t,s,n){return new(s||(s=Promise))(function(a,r){function i(e){try{l(n.next(e))}catch(t){r(t)}}function o(e){try{l(n.throw(e))}catch(t){r(t)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof s?t:new s(function(e){e(t)})).then(i,o)}l((n=n.apply(e,t||[])).next())})};const bo="2.71.1",wo=3e4,jo=9e4,No={"X-Client-Info":`gotrue-js/${bo}`},So="X-Supabase-Api-Version",_o={timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"},ko=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i;class Co extends Error{constructor(e,t,s){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=s}}function Eo(e){return"object"==typeof e&&null!==e&&"__isAuthError"in e}class To extends Co{constructor(e,t,s){super(e,t,s),this.name="AuthApiError",this.status=t,this.code=s}}class Ro extends Co{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class Po extends Co{constructor(e,t,s,n){super(e,s,n),this.name=t,this.status=s}}class Do extends Po{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}class Ao extends Po{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Oo extends Po{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Io extends Po{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Mo extends Po{constructor(e,t=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Lo extends Po{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}}function $o(e){return Eo(e)&&"AuthRetryableFetchError"===e.name}class Uo extends Po{constructor(e,t,s){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=s}}class Fo extends Po{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const qo="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),zo=" \t\n\r=".split(""),Bo=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<zo.length;t+=1)e[zo[t].charCodeAt(0)]=-2;for(let t=0;t<qo.length;t+=1)e[qo[t].charCodeAt(0)]=t;return e})();function Wo(e,t,s){if(null!==e)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const e=t.queue>>t.queuedBits-6&63;s(qo[e]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const e=t.queue>>t.queuedBits-6&63;s(qo[e]),t.queuedBits-=6}}function Ho(e,t,s){const n=Bo[e];if(!(n>-1)){if(-2===n)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}for(t.queue=t.queue<<6|n,t.queuedBits+=6;t.queuedBits>=8;)s(t.queue>>t.queuedBits-8&255),t.queuedBits-=8}function Ko(e){const t=[],s=e=>{t.push(String.fromCodePoint(e))},n={utf8seq:0,codepoint:0},a={queue:0,queuedBits:0},r=e=>{!function(e,t,s){if(0===t.utf8seq){if(e<=127)return void s(e);for(let s=1;s<6;s+=1)if(!(e>>7-s&1)){t.utf8seq=s;break}if(2===t.utf8seq)t.codepoint=31&e;else if(3===t.utf8seq)t.codepoint=15&e;else{if(4!==t.utf8seq)throw new Error("Invalid UTF-8 sequence");t.codepoint=7&e}t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|63&e,t.utf8seq-=1,0===t.utf8seq&&s(t.codepoint)}}(e,n,s)};for(let i=0;i<e.length;i+=1)Ho(e.charCodeAt(i),a,r);return t.join("")}function Vo(e,t){if(!(e<=127)){if(e<=2047)return t(192|e>>6),void t(128|63&e);if(e<=65535)return t(224|e>>12),t(128|e>>6&63),void t(128|63&e);if(e<=1114111)return t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),void t(128|63&e);throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}t(e)}function Go(e){const t=[],s={queue:0,queuedBits:0},n=e=>{t.push(e)};for(let a=0;a<e.length;a+=1)Ho(e.charCodeAt(a),s,n);return new Uint8Array(t)}function Jo(e){const t=[];return function(e,t){for(let s=0;s<e.length;s+=1){let n=e.charCodeAt(s);if(n>55295&&n<=56319){const t=1024*(n-55296)&65535;n=65536+(e.charCodeAt(s+1)-56320&65535|t),s+=1}Vo(n,t)}}(e,e=>t.push(e)),new Uint8Array(t)}function Yo(e){const t=[],s={queue:0,queuedBits:0},n=e=>{t.push(e)};return e.forEach(e=>Wo(e,s,n)),Wo(null,s,n),t.join("")}const Qo=()=>"undefined"!=typeof window&&"undefined"!=typeof document,Xo={tested:!1,writable:!1},Zo=()=>{if(!Qo())return!1;try{if("object"!=typeof globalThis.localStorage)return!1}catch(t){return!1}if(Xo.tested)return Xo.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),Xo.tested=!0,Xo.writable=!0}catch(t){Xo.tested=!0,Xo.writable=!1}return Xo.writable};const el=e=>{let t;return t=e||("undefined"==typeof fetch?(...e)=>Ne(async()=>{const{default:e}=await Promise.resolve().then(()=>xr);return{default:e}},void 0).then(({default:t})=>t(...e)):fetch),(...e)=>t(...e)},tl=async(e,t,s)=>{await e.setItem(t,JSON.stringify(s))},sl=async(e,t)=>{const s=await e.getItem(t);if(!s)return null;try{return JSON.parse(s)}catch(n){return s}},nl=async(e,t)=>{await e.removeItem(t)};class al{constructor(){this.promise=new al.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}function rl(e){const t=e.split(".");if(3!==t.length)throw new Fo("Invalid JWT structure");for(let s=0;s<t.length;s++)if(!ko.test(t[s]))throw new Fo("JWT not in base64url format");return{header:JSON.parse(Ko(t[0])),payload:JSON.parse(Ko(t[1])),signature:Go(t[2]),raw:{header:t[0],payload:t[1]}}}function il(e){return("0"+e.toString(16)).substr(-2)}async function ol(e){if(!("undefined"!=typeof crypto&&void 0!==crypto.subtle&&"undefined"!=typeof TextEncoder))return e;const t=await async function(e){const t=(new TextEncoder).encode(e),s=await crypto.subtle.digest("SHA-256",t),n=new Uint8Array(s);return Array.from(n).map(e=>String.fromCharCode(e)).join("")}(e);return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function ll(e,t,s=!1){const n=function(){const e=new Uint32Array(56);if("undefined"==typeof crypto){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",t=e.length;let s="";for(let n=0;n<56;n++)s+=e.charAt(Math.floor(Math.random()*t));return s}return crypto.getRandomValues(e),Array.from(e,il).join("")}();let a=n;s&&(a+="/PASSWORD_RECOVERY"),await tl(e,`${t}-code-verifier`,a);const r=await ol(n);return[r,n===r?"plain":"s256"]}al.promiseConstructor=Promise;const cl=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;const dl=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function ul(e){if(!dl.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function hl(){return new Proxy({},{get:(e,t)=>{if("__isUserNotAvailableProxy"===t)return!0;if("symbol"==typeof t){const e=t.toString();if("Symbol(Symbol.toPrimitive)"===e||"Symbol(Symbol.toStringTag)"===e||"Symbol(util.inspect.custom)"===e)return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${t}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function ml(e){return JSON.parse(JSON.stringify(e))}const pl=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),fl=[502,503,504];async function gl(e){var t,s;if(!("object"==typeof(s=e)&&null!==s&&"status"in s&&"ok"in s&&"json"in s&&"function"==typeof s.json))throw new Lo(pl(e),0);if(fl.includes(e.status))throw new Lo(pl(e),e.status);let n,a;try{n=await e.json()}catch(i){throw new Ro(pl(i),i)}const r=function(e){const t=e.headers.get(So);if(!t)return null;if(!t.match(cl))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch(i){return null}}(e);if(r&&r.getTime()>=_o.timestamp&&"object"==typeof n&&n&&"string"==typeof n.code?a=n.code:"object"==typeof n&&n&&"string"==typeof n.error_code&&(a=n.error_code),a){if("weak_password"===a)throw new Uo(pl(n),e.status,(null===(t=n.weak_password)||void 0===t?void 0:t.reasons)||[]);if("session_not_found"===a)throw new Do}else if("object"==typeof n&&n&&"object"==typeof n.weak_password&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((e,t)=>e&&"string"==typeof t,!0))throw new Uo(pl(n),e.status,n.weak_password.reasons);throw new To(pl(n),e.status||500,a)}async function xl(e,t,s,n){var a;const r=Object.assign({},null==n?void 0:n.headers);r[So]||(r[So]=_o.name),(null==n?void 0:n.jwt)&&(r.Authorization=`Bearer ${n.jwt}`);const i=null!==(a=null==n?void 0:n.query)&&void 0!==a?a:{};(null==n?void 0:n.redirectTo)&&(i.redirect_to=n.redirectTo);const o=Object.keys(i).length?"?"+new URLSearchParams(i).toString():"",l=await async function(e,t,s,n,a,r){const i=((e,t,s,n)=>{const a={method:e,headers:(null==t?void 0:t.headers)||{}};return"GET"===e?a:(a.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},null==t?void 0:t.headers),a.body=JSON.stringify(n),Object.assign(Object.assign({},a),s))})(t,n,a,r);let o;try{o=await e(s,Object.assign({},i))}catch(l){throw new Lo(pl(l),0)}o.ok||await gl(o);if(null==n?void 0:n.noResolveJson)return o;try{return await o.json()}catch(l){await gl(l)}}(e,t,s+o,{headers:r,noResolveJson:null==n?void 0:n.noResolveJson},{},null==n?void 0:n.body);return(null==n?void 0:n.xform)?null==n?void 0:n.xform(l):{data:Object.assign({},l),error:null}}function vl(e){var t;let s=null;var n;(function(e){return e.access_token&&e.refresh_token&&e.expires_in})(e)&&(s=Object.assign({},e),e.expires_at||(s.expires_at=(n=e.expires_in,Math.round(Date.now()/1e3)+n)));return{data:{session:s,user:null!==(t=e.user)&&void 0!==t?t:e},error:null}}function yl(e){const t=vl(e);return!t.error&&e.weak_password&&"object"==typeof e.weak_password&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&"string"==typeof e.weak_password.message&&e.weak_password.reasons.reduce((e,t)=>e&&"string"==typeof t,!0)&&(t.data.weak_password=e.weak_password),t}function bl(e){var t;return{data:{user:null!==(t=e.user)&&void 0!==t?t:e},error:null}}function wl(e){return{data:e,error:null}}function jl(e){const{action_link:t,email_otp:s,hashed_token:n,redirect_to:a,verification_type:r}=e,i=function(e,t){var s={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(s[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(s[n[a]]=e[n[a]])}return s}(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]);return{data:{properties:{action_link:t,email_otp:s,hashed_token:n,redirect_to:a,verification_type:r},user:Object.assign({},i)},error:null}}function Nl(e){return e}const Sl=["global","local","others"];class _l{constructor({url:e="",headers:t={},fetch:s}){this.url=e,this.headers=t,this.fetch=el(s),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,t=Sl[0]){if(Sl.indexOf(t)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Sl.join(", ")}`);try{return await xl(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(s){if(Eo(s))return{data:null,error:s};throw s}}async inviteUserByEmail(e,t={}){try{return await xl(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:bl})}catch(s){if(Eo(s))return{data:{user:null},error:s};throw s}}async generateLink(e){try{const{options:t}=e,s=function(e,t){var s={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(s[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(s[n[a]]=e[n[a]])}return s}(e,["options"]),n=Object.assign(Object.assign({},s),t);return"newEmail"in s&&(n.new_email=null==s?void 0:s.newEmail,delete n.newEmail),await xl(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:n,headers:this.headers,xform:jl,redirectTo:null==t?void 0:t.redirectTo})}catch(t){if(Eo(t))return{data:{properties:null,user:null},error:t};throw t}}async createUser(e){try{return await xl(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:bl})}catch(t){if(Eo(t))return{data:{user:null},error:t};throw t}}async listUsers(e){var t,s,n,a,r,i,o;try{const l={nextPage:null,lastPage:0,total:0},c=await xl(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:null!==(s=null===(t=null==e?void 0:e.page)||void 0===t?void 0:t.toString())&&void 0!==s?s:"",per_page:null!==(a=null===(n=null==e?void 0:e.perPage)||void 0===n?void 0:n.toString())&&void 0!==a?a:""},xform:Nl});if(c.error)throw c.error;const d=await c.json(),u=null!==(r=c.headers.get("x-total-count"))&&void 0!==r?r:0,h=null!==(o=null===(i=c.headers.get("link"))||void 0===i?void 0:i.split(","))&&void 0!==o?o:[];return h.length>0&&(h.forEach(e=>{const t=parseInt(e.split(";")[0].split("=")[1].substring(0,1)),s=JSON.parse(e.split(";")[1].split("=")[1]);l[`${s}Page`]=t}),l.total=parseInt(u)),{data:Object.assign(Object.assign({},d),l),error:null}}catch(l){if(Eo(l))return{data:{users:[]},error:l};throw l}}async getUserById(e){ul(e);try{return await xl(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:bl})}catch(t){if(Eo(t))return{data:{user:null},error:t};throw t}}async updateUserById(e,t){ul(e);try{return await xl(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:bl})}catch(s){if(Eo(s))return{data:{user:null},error:s};throw s}}async deleteUser(e,t=!1){ul(e);try{return await xl(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:bl})}catch(s){if(Eo(s))return{data:{user:null},error:s};throw s}}async _listFactors(e){ul(e.userId);try{const{data:t,error:s}=await xl(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:e=>({data:{factors:e},error:null})});return{data:t,error:s}}catch(t){if(Eo(t))return{data:null,error:t};throw t}}async _deleteFactor(e){ul(e.userId),ul(e.id);try{return{data:await xl(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(t){if(Eo(t))return{data:null,error:t};throw t}}}function kl(e={}){return{getItem:t=>e[t]||null,setItem:(t,s)=>{e[t]=s},removeItem:t=>{delete e[t]}}}const Cl=!!(globalThis&&Zo()&&globalThis.localStorage&&"true"===globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug"));class El extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class Tl extends El{}async function Rl(e,t,s){const n=new globalThis.AbortController;return t>0&&setTimeout(()=>{n.abort()},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,0===t?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async n=>{if(!n){if(0===t)throw new Tl(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(Cl)try{await globalThis.navigator.locks.query()}catch(a){}return await s()}try{return await s()}finally{}}))}!function(){if("object"!=typeof globalThis)try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch(e){"undefined"!=typeof self&&(self.globalThis=self)}}();const Pl={url:"http://localhost:9999",storageKey:"supabase.auth.token",autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:No,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function Dl(e,t,s){return await s()}const Al={};class Ol{constructor(e){var t,s;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Ol.nextInstanceID,Ol.nextInstanceID+=1,this.instanceID>0&&Qo();const n=Object.assign(Object.assign({},Pl),e);if(this.logDebugMessages=!!n.debug,"function"==typeof n.debug&&(this.logger=n.debug),this.persistSession=n.persistSession,this.storageKey=n.storageKey,this.autoRefreshToken=n.autoRefreshToken,this.admin=new _l({url:n.url,headers:n.headers,fetch:n.fetch}),this.url=n.url,this.headers=n.headers,this.fetch=el(n.fetch),this.lock=n.lock||Dl,this.detectSessionInUrl=n.detectSessionInUrl,this.flowType=n.flowType,this.hasCustomAuthorizationHeader=n.hasCustomAuthorizationHeader,n.lock?this.lock=n.lock:Qo()&&(null===(t=null===globalThis||void 0===globalThis?void 0:globalThis.navigator)||void 0===t?void 0:t.locks)?this.lock=Rl:this.lock=Dl,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(n.storage?this.storage=n.storage:Zo()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=kl(this.memoryStorage)),n.userStorage&&(this.userStorage=n.userStorage)):(this.memoryStorage={},this.storage=kl(this.memoryStorage)),Qo()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(a){}null===(s=this.broadcastChannel)||void 0===s||s.addEventListener("message",async e=>{this._debug("received broadcast notification from other tab or client",e),await this._notifyAllSubscribers(e.data.event,e.data.session,!1)})}this.initialize()}get jwks(){var e,t;return null!==(t=null===(e=Al[this.storageKey])||void 0===e?void 0:e.jwks)&&void 0!==t?t:{keys:[]}}set jwks(e){Al[this.storageKey]=Object.assign(Object.assign({},Al[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,t;return null!==(t=null===(e=Al[this.storageKey])||void 0===e?void 0:e.cachedAt)&&void 0!==t?t:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){Al[this.storageKey]=Object.assign(Object.assign({},Al[this.storageKey]),{cachedAt:e})}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${bo}) ${(new Date).toISOString()}`,...e),this}async initialize(){return this.initializePromise||(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))()),await this.initializePromise}async _initialize(){var e;try{const t=function(e){const t={},s=new URL(e);if(s.hash&&"#"===s.hash[0])try{new URLSearchParams(s.hash.substring(1)).forEach((e,s)=>{t[s]=e})}catch(n){}return s.searchParams.forEach((e,s)=>{t[s]=e}),t}(window.location.href);let s="none";if(this._isImplicitGrantCallback(t)?s="implicit":await this._isPKCECallback(t)&&(s="pkce"),Qo()&&this.detectSessionInUrl&&"none"!==s){const{data:n,error:a}=await this._getSessionFromURL(t,s);if(a){if(this._debug("#_initialize()","error detecting session from URL",a),function(e){return Eo(e)&&"AuthImplicitGrantRedirectError"===e.name}(a)){const t=null===(e=a.details)||void 0===e?void 0:e.code;if("identity_already_exists"===t||"identity_not_found"===t||"single_identity_not_deletable"===t)return{error:a}}return await this._removeSession(),{error:a}}const{session:r,redirectType:i}=n;return this._debug("#_initialize()","detected session in URL",r,"redirect type",i),await this._saveSession(r),setTimeout(async()=>{"recovery"===i?await this._notifyAllSubscribers("PASSWORD_RECOVERY",r):await this._notifyAllSubscribers("SIGNED_IN",r)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(t){return Eo(t)?{error:t}:{error:new Ro("Unexpected error during initialization",t)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var t,s,n;try{const a=await xl(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:null!==(s=null===(t=null==e?void 0:e.options)||void 0===t?void 0:t.data)&&void 0!==s?s:{},gotrue_meta_security:{captcha_token:null===(n=null==e?void 0:e.options)||void 0===n?void 0:n.captchaToken}},xform:vl}),{data:r,error:i}=a;if(i||!r)return{data:{user:null,session:null},error:i};const o=r.session,l=r.user;return r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",o)),{data:{user:l,session:o},error:null}}catch(a){if(Eo(a))return{data:{user:null,session:null},error:a};throw a}}async signUp(e){var t,s,n;try{let a;if("email"in e){const{email:s,password:n,options:r}=e;let i=null,o=null;"pkce"===this.flowType&&([i,o]=await ll(this.storage,this.storageKey)),a=await xl(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:null==r?void 0:r.emailRedirectTo,body:{email:s,password:n,data:null!==(t=null==r?void 0:r.data)&&void 0!==t?t:{},gotrue_meta_security:{captcha_token:null==r?void 0:r.captchaToken},code_challenge:i,code_challenge_method:o},xform:vl})}else{if(!("phone"in e))throw new Oo("You must provide either an email or phone number and a password");{const{phone:t,password:r,options:i}=e;a=await xl(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:t,password:r,data:null!==(s=null==i?void 0:i.data)&&void 0!==s?s:{},channel:null!==(n=null==i?void 0:i.channel)&&void 0!==n?n:"sms",gotrue_meta_security:{captcha_token:null==i?void 0:i.captchaToken}},xform:vl})}}const{data:r,error:i}=a;if(i||!r)return{data:{user:null,session:null},error:i};const o=r.session,l=r.user;return r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",o)),{data:{user:l,session:o},error:null}}catch(a){if(Eo(a))return{data:{user:null,session:null},error:a};throw a}}async signInWithPassword(e){try{let t;if("email"in e){const{email:s,password:n,options:a}=e;t=await xl(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:s,password:n,gotrue_meta_security:{captcha_token:null==a?void 0:a.captchaToken}},xform:yl})}else{if(!("phone"in e))throw new Oo("You must provide either an email or phone number and a password");{const{phone:s,password:n,options:a}=e;t=await xl(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:s,password:n,gotrue_meta_security:{captcha_token:null==a?void 0:a.captchaToken}},xform:yl})}}const{data:s,error:n}=t;return n?{data:{user:null,session:null},error:n}:s&&s.session&&s.user?(s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),{data:Object.assign({user:s.user,session:s.session},s.weak_password?{weakPassword:s.weak_password}:null),error:n}):{data:{user:null,session:null},error:new Ao}}catch(t){if(Eo(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOAuth(e){var t,s,n,a;return await this._handleProviderSignIn(e.provider,{redirectTo:null===(t=e.options)||void 0===t?void 0:t.redirectTo,scopes:null===(s=e.options)||void 0===s?void 0:s.scopes,queryParams:null===(n=e.options)||void 0===n?void 0:n.queryParams,skipBrowserRedirect:null===(a=e.options)||void 0===a?void 0:a.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:t}=e;if("solana"===t)return await this.signInWithSolana(e);throw new Error(`@supabase/auth-js: Unsupported chain "${t}"`)}async signInWithSolana(e){var t,s,n,a,r,i,o,l,c,d,u,h;let m,p;if("message"in e)m=e.message,p=e.signature;else{const{chain:u,wallet:h,statement:f,options:g}=e;let x;if(Qo())if("object"==typeof h)x=h;else{const e=window;if(!("solana"in e)||"object"!=typeof e.solana||!("signIn"in e.solana&&"function"==typeof e.solana.signIn||"signMessage"in e.solana&&"function"==typeof e.solana.signMessage))throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.");x=e.solana}else{if("object"!=typeof h||!(null==g?void 0:g.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");x=h}const v=new URL(null!==(t=null==g?void 0:g.url)&&void 0!==t?t:window.location.href);if("signIn"in x&&x.signIn){const e=await x.signIn(Object.assign(Object.assign(Object.assign({issuedAt:(new Date).toISOString()},null==g?void 0:g.signInWithSolana),{version:"1",domain:v.host,uri:v.href}),f?{statement:f}:null));let t;if(Array.isArray(e)&&e[0]&&"object"==typeof e[0])t=e[0];else{if(!(e&&"object"==typeof e&&"signedMessage"in e&&"signature"in e))throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");t=e}if(!("signedMessage"in t&&"signature"in t&&("string"==typeof t.signedMessage||t.signedMessage instanceof Uint8Array)&&t.signature instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields");m="string"==typeof t.signedMessage?t.signedMessage:(new TextDecoder).decode(t.signedMessage),p=t.signature}else{if(!("signMessage"in x&&"function"==typeof x.signMessage&&"publicKey"in x&&"object"==typeof x&&x.publicKey&&"toBase58"in x.publicKey&&"function"==typeof x.publicKey.toBase58))throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");m=[`${v.host} wants you to sign in with your Solana account:`,x.publicKey.toBase58(),...f?["",f,""]:[""],"Version: 1",`URI: ${v.href}`,`Issued At: ${null!==(n=null===(s=null==g?void 0:g.signInWithSolana)||void 0===s?void 0:s.issuedAt)&&void 0!==n?n:(new Date).toISOString()}`,...(null===(a=null==g?void 0:g.signInWithSolana)||void 0===a?void 0:a.notBefore)?[`Not Before: ${g.signInWithSolana.notBefore}`]:[],...(null===(r=null==g?void 0:g.signInWithSolana)||void 0===r?void 0:r.expirationTime)?[`Expiration Time: ${g.signInWithSolana.expirationTime}`]:[],...(null===(i=null==g?void 0:g.signInWithSolana)||void 0===i?void 0:i.chainId)?[`Chain ID: ${g.signInWithSolana.chainId}`]:[],...(null===(o=null==g?void 0:g.signInWithSolana)||void 0===o?void 0:o.nonce)?[`Nonce: ${g.signInWithSolana.nonce}`]:[],...(null===(l=null==g?void 0:g.signInWithSolana)||void 0===l?void 0:l.requestId)?[`Request ID: ${g.signInWithSolana.requestId}`]:[],...(null===(d=null===(c=null==g?void 0:g.signInWithSolana)||void 0===c?void 0:c.resources)||void 0===d?void 0:d.length)?["Resources",...g.signInWithSolana.resources.map(e=>`- ${e}`)]:[]].join("\n");const e=await x.signMessage((new TextEncoder).encode(m),"utf8");if(!(e&&e instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");p=e}}try{const{data:t,error:s}=await xl(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:m,signature:Yo(p)},(null===(u=e.options)||void 0===u?void 0:u.captchaToken)?{gotrue_meta_security:{captcha_token:null===(h=e.options)||void 0===h?void 0:h.captchaToken}}:null),xform:vl});if(s)throw s;return t&&t.session&&t.user?(t.session&&(await this._saveSession(t.session),await this._notifyAllSubscribers("SIGNED_IN",t.session)),{data:Object.assign({},t),error:s}):{data:{user:null,session:null},error:new Ao}}catch(f){if(Eo(f))return{data:{user:null,session:null},error:f};throw f}}async _exchangeCodeForSession(e){const t=await sl(this.storage,`${this.storageKey}-code-verifier`),[s,n]=(null!=t?t:"").split("/");try{const{data:t,error:a}=await xl(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:s},xform:vl});if(await nl(this.storage,`${this.storageKey}-code-verifier`),a)throw a;return t&&t.session&&t.user?(t.session&&(await this._saveSession(t.session),await this._notifyAllSubscribers("SIGNED_IN",t.session)),{data:Object.assign(Object.assign({},t),{redirectType:null!=n?n:null}),error:a}):{data:{user:null,session:null,redirectType:null},error:new Ao}}catch(a){if(Eo(a))return{data:{user:null,session:null,redirectType:null},error:a};throw a}}async signInWithIdToken(e){try{const{options:t,provider:s,token:n,access_token:a,nonce:r}=e,i=await xl(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:s,id_token:n,access_token:a,nonce:r,gotrue_meta_security:{captcha_token:null==t?void 0:t.captchaToken}},xform:vl}),{data:o,error:l}=i;return l?{data:{user:null,session:null},error:l}:o&&o.session&&o.user?(o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),{data:o,error:l}):{data:{user:null,session:null},error:new Ao}}catch(t){if(Eo(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOtp(e){var t,s,n,a,r;try{if("email"in e){const{email:n,options:a}=e;let r=null,i=null;"pkce"===this.flowType&&([r,i]=await ll(this.storage,this.storageKey));const{error:o}=await xl(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:n,data:null!==(t=null==a?void 0:a.data)&&void 0!==t?t:{},create_user:null===(s=null==a?void 0:a.shouldCreateUser)||void 0===s||s,gotrue_meta_security:{captcha_token:null==a?void 0:a.captchaToken},code_challenge:r,code_challenge_method:i},redirectTo:null==a?void 0:a.emailRedirectTo});return{data:{user:null,session:null},error:o}}if("phone"in e){const{phone:t,options:s}=e,{data:i,error:o}=await xl(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:t,data:null!==(n=null==s?void 0:s.data)&&void 0!==n?n:{},create_user:null===(a=null==s?void 0:s.shouldCreateUser)||void 0===a||a,gotrue_meta_security:{captcha_token:null==s?void 0:s.captchaToken},channel:null!==(r=null==s?void 0:s.channel)&&void 0!==r?r:"sms"}});return{data:{user:null,session:null,messageId:null==i?void 0:i.message_id},error:o}}throw new Oo("You must provide either an email or phone number.")}catch(i){if(Eo(i))return{data:{user:null,session:null},error:i};throw i}}async verifyOtp(e){var t,s;try{let n,a;"options"in e&&(n=null===(t=e.options)||void 0===t?void 0:t.redirectTo,a=null===(s=e.options)||void 0===s?void 0:s.captchaToken);const{data:r,error:i}=await xl(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:a}}),redirectTo:n,xform:vl});if(i)throw i;if(!r)throw new Error("An error occurred on token verification.");const o=r.session,l=r.user;return(null==o?void 0:o.access_token)&&(await this._saveSession(o),await this._notifyAllSubscribers("recovery"==e.type?"PASSWORD_RECOVERY":"SIGNED_IN",o)),{data:{user:l,session:o},error:null}}catch(n){if(Eo(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithSSO(e){var t,s,n;try{let a=null,r=null;return"pkce"===this.flowType&&([a,r]=await ll(this.storage,this.storageKey)),await xl(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:null!==(s=null===(t=e.options)||void 0===t?void 0:t.redirectTo)&&void 0!==s?s:void 0}),(null===(n=null==e?void 0:e.options)||void 0===n?void 0:n.captchaToken)?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:a,code_challenge_method:r}),headers:this.headers,xform:wl})}catch(a){if(Eo(a))return{data:null,error:a};throw a}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:t},error:s}=e;if(s)throw s;if(!t)throw new Do;const{error:n}=await xl(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:t.access_token});return{data:{user:null,session:null},error:n}})}catch(e){if(Eo(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const t=`${this.url}/resend`;if("email"in e){const{email:s,type:n,options:a}=e,{error:r}=await xl(this.fetch,"POST",t,{headers:this.headers,body:{email:s,type:n,gotrue_meta_security:{captcha_token:null==a?void 0:a.captchaToken}},redirectTo:null==a?void 0:a.emailRedirectTo});return{data:{user:null,session:null},error:r}}if("phone"in e){const{phone:s,type:n,options:a}=e,{data:r,error:i}=await xl(this.fetch,"POST",t,{headers:this.headers,body:{phone:s,type:n,gotrue_meta_security:{captcha_token:null==a?void 0:a.captchaToken}}});return{data:{user:null,session:null,messageId:null==r?void 0:r.message_id},error:i}}throw new Oo("You must provide either an email or phone number and a type")}catch(t){if(Eo(t))return{data:{user:null,session:null},error:t};throw t}}async getSession(){await this.initializePromise;return await this._acquireLock(-1,async()=>this._useSession(async e=>e))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const e=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await e,await t()))();return this.pendingInLock.push((async()=>{try{await s}catch(e){}})()),s}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const e=t();for(this.pendingInLock.push((async()=>{try{await e}catch(t){}})()),await e;this.pendingInLock.length;){const e=[...this.pendingInLock];await Promise.all(e),this.pendingInLock.splice(0,e.length)}return await e}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",(new Error).stack);try{let e=null;const t=await sl(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),null!==t&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const s=!!e.expires_at&&1e3*e.expires_at-Date.now()<jo;if(this._debug("#__loadSession()",`session has${s?"":" not"} expired`,"expires_at",e.expires_at),!s){if(this.userStorage){const t=await sl(this.userStorage,this.storageKey+"-user");(null==t?void 0:t.user)?e.user=t.user:e.user=hl()}if(this.storage.isServer&&e.user){let t=this.suppressGetSessionWarning;e=new Proxy(e,{get:(e,s,n)=>(t||"user"!==s||(t=!0,this.suppressGetSessionWarning=!0),Reflect.get(e,s,n))})}return{data:{session:e},error:null}}const{session:n,error:a}=await this._callRefreshToken(e.refresh_token);return a?{data:{session:null},error:a}:{data:{session:n},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){if(e)return await this._getUser(e);await this.initializePromise;return await this._acquireLock(-1,async()=>await this._getUser())}async _getUser(e){try{return e?await xl(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:bl}):await this._useSession(async e=>{var t,s,n;const{data:a,error:r}=e;if(r)throw r;return(null===(t=a.session)||void 0===t?void 0:t.access_token)||this.hasCustomAuthorizationHeader?await xl(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:null!==(n=null===(s=a.session)||void 0===s?void 0:s.access_token)&&void 0!==n?n:void 0,xform:bl}):{data:{user:null},error:new Do}})}catch(t){if(Eo(t))return function(e){return Eo(e)&&"AuthSessionMissingError"===e.name}(t)&&(await this._removeSession(),await nl(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:t};throw t}}async updateUser(e,t={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,t))}async _updateUser(e,t={}){try{return await this._useSession(async s=>{const{data:n,error:a}=s;if(a)throw a;if(!n.session)throw new Do;const r=n.session;let i=null,o=null;"pkce"===this.flowType&&null!=e.email&&([i,o]=await ll(this.storage,this.storageKey));const{data:l,error:c}=await xl(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:null==t?void 0:t.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:i,code_challenge_method:o}),jwt:r.access_token,xform:bl});if(c)throw c;return r.user=l.user,await this._saveSession(r),await this._notifyAllSubscribers("USER_UPDATED",r),{data:{user:r.user},error:null}})}catch(s){if(Eo(s))return{data:{user:null},error:s};throw s}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Do;const t=Date.now()/1e3;let s=t,n=!0,a=null;const{payload:r}=rl(e.access_token);if(r.exp&&(s=r.exp,n=s<=t),n){const{session:t,error:s}=await this._callRefreshToken(e.refresh_token);if(s)return{data:{user:null,session:null},error:s};if(!t)return{data:{user:null,session:null},error:null};a=t}else{const{data:n,error:r}=await this._getUser(e.access_token);if(r)throw r;a={access_token:e.access_token,refresh_token:e.refresh_token,user:n.user,token_type:"bearer",expires_in:s-t,expires_at:s},await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)}return{data:{user:a.user,session:a},error:null}}catch(t){if(Eo(t))return{data:{session:null,user:null},error:t};throw t}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async t=>{var s;if(!e){const{data:n,error:a}=t;if(a)throw a;e=null!==(s=n.session)&&void 0!==s?s:void 0}if(!(null==e?void 0:e.refresh_token))throw new Do;const{session:n,error:a}=await this._callRefreshToken(e.refresh_token);return a?{data:{user:null,session:null},error:a}:n?{data:{user:n.user,session:n},error:null}:{data:{user:null,session:null},error:null}})}catch(t){if(Eo(t))return{data:{user:null,session:null},error:t};throw t}}async _getSessionFromURL(e,t){try{if(!Qo())throw new Io("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Io(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(t){case"implicit":if("pkce"===this.flowType)throw new Mo("Not a valid PKCE flow url.");break;case"pkce":if("implicit"===this.flowType)throw new Io("Not a valid implicit grant flow url.")}if("pkce"===t){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new Mo("No code detected.");const{data:t,error:s}=await this._exchangeCodeForSession(e.code);if(s)throw s;const n=new URL(window.location.href);return n.searchParams.delete("code"),window.history.replaceState(window.history.state,"",n.toString()),{data:{session:t.session,redirectType:null},error:null}}const{provider_token:s,provider_refresh_token:n,access_token:a,refresh_token:r,expires_in:i,expires_at:o,token_type:l}=e;if(!(a&&i&&r&&l))throw new Io("No session defined in URL");const c=Math.round(Date.now()/1e3),d=parseInt(i);let u=c+d;o&&(u=parseInt(o));const{data:h,error:m}=await this._getUser(a);if(m)throw m;const p={provider_token:s,provider_refresh_token:n,access_token:a,expires_in:d,expires_at:u,refresh_token:r,token_type:l,user:h.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:p,redirectType:e.type},error:null}}catch(s){if(Eo(s))return{data:{session:null,redirectType:null},error:s};throw s}}_isImplicitGrantCallback(e){return Boolean(e.access_token||e.error_description)}async _isPKCECallback(e){const t=await sl(this.storage,`${this.storageKey}-code-verifier`);return!(!e.code||!t)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async t=>{var s;const{data:n,error:a}=t;if(a)return{error:a};const r=null===(s=n.session)||void 0===s?void 0:s.access_token;if(r){const{error:t}=await this.admin.signOut(r,e);if(t&&(!function(e){return Eo(e)&&"AuthApiError"===e.name}(t)||404!==t.status&&401!==t.status&&403!==t.status))return{error:t}}return"others"!==e&&(await this._removeSession(),await nl(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const t="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)}),s={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,s),(async()=>{await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(t)})})(),{data:{subscription:s}}}async _emitInitialSession(e){return await this._useSession(async t=>{var s,n;try{const{data:{session:n},error:a}=t;if(a)throw a;await(null===(s=this.stateChangeEmitters.get(e))||void 0===s?void 0:s.callback("INITIAL_SESSION",n)),this._debug("INITIAL_SESSION","callback id",e,"session",n)}catch(a){await(null===(n=this.stateChangeEmitters.get(e))||void 0===n?void 0:n.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",a)}})}async resetPasswordForEmail(e,t={}){let s=null,n=null;"pkce"===this.flowType&&([s,n]=await ll(this.storage,this.storageKey,!0));try{return await xl(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:s,code_challenge_method:n,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(a){if(Eo(a))return{data:null,error:a};throw a}}async getUserIdentities(){var e;try{const{data:t,error:s}=await this.getUser();if(s)throw s;return{data:{identities:null!==(e=t.user.identities)&&void 0!==e?e:[]},error:null}}catch(t){if(Eo(t))return{data:null,error:t};throw t}}async linkIdentity(e){var t;try{const{data:s,error:n}=await this._useSession(async t=>{var s,n,a,r,i;const{data:o,error:l}=t;if(l)throw l;const c=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:null===(s=e.options)||void 0===s?void 0:s.redirectTo,scopes:null===(n=e.options)||void 0===n?void 0:n.scopes,queryParams:null===(a=e.options)||void 0===a?void 0:a.queryParams,skipBrowserRedirect:!0});return await xl(this.fetch,"GET",c,{headers:this.headers,jwt:null!==(i=null===(r=o.session)||void 0===r?void 0:r.access_token)&&void 0!==i?i:void 0})});if(n)throw n;return Qo()&&!(null===(t=e.options)||void 0===t?void 0:t.skipBrowserRedirect)&&window.location.assign(null==s?void 0:s.url),{data:{provider:e.provider,url:null==s?void 0:s.url},error:null}}catch(s){if(Eo(s))return{data:{provider:e.provider,url:null},error:s};throw s}}async unlinkIdentity(e){try{return await this._useSession(async t=>{var s,n;const{data:a,error:r}=t;if(r)throw r;return await xl(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:null!==(n=null===(s=a.session)||void 0===s?void 0:s.access_token)&&void 0!==n?n:void 0})})}catch(t){if(Eo(t))return{data:null,error:t};throw t}}async _refreshAccessToken(e){const t=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(t,"begin");try{const a=Date.now();return await(s=async s=>(s>0&&await async function(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}(200*Math.pow(2,s-1)),this._debug(t,"refreshing attempt",s),await xl(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:vl})),n=(e,t)=>{const s=200*Math.pow(2,e);return t&&$o(t)&&Date.now()+s-a<wo},new Promise((e,t)=>{(async()=>{for(let r=0;r<1/0;r++)try{const t=await s(r);if(!n(r,null,t))return void e(t)}catch(a){if(!n(r,a))return void t(a)}})()}))}catch(a){if(this._debug(t,"error",a),Eo(a))return{data:{session:null,user:null},error:a};throw a}finally{this._debug(t,"end")}var s,n}_isValidSession(e){return"object"==typeof e&&null!==e&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const s=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",s),Qo()&&!t.skipBrowserRedirect&&window.location.assign(s),{data:{provider:e,url:s},error:null}}async _recoverAndRefresh(){var e,t;const s="#_recoverAndRefresh()";this._debug(s,"begin");try{const a=await sl(this.storage,this.storageKey);if(a&&this.userStorage){let t=await sl(this.userStorage,this.storageKey+"-user");this.storage.isServer||!Object.is(this.storage,this.userStorage)||t||(t={user:a.user},await tl(this.userStorage,this.storageKey+"-user",t)),a.user=null!==(e=null==t?void 0:t.user)&&void 0!==e?e:hl()}else if(a&&!a.user&&!a.user){const e=await sl(this.storage,this.storageKey+"-user");e&&(null==e?void 0:e.user)?(a.user=e.user,await nl(this.storage,this.storageKey+"-user"),await tl(this.storage,this.storageKey,a)):a.user=hl()}if(this._debug(s,"session from storage",a),!this._isValidSession(a))return this._debug(s,"session is not valid"),void(null!==a&&await this._removeSession());const r=1e3*(null!==(t=a.expires_at)&&void 0!==t?t:1/0)-Date.now()<jo;if(this._debug(s,`session has${r?"":" not"} expired with margin of 90000s`),r){if(this.autoRefreshToken&&a.refresh_token){const{error:e}=await this._callRefreshToken(a.refresh_token);e&&($o(e)||(this._debug(s,"refresh failed with a non-retryable error, removing the session",e),await this._removeSession()))}}else if(a.user&&!0===a.user.__isUserNotAvailableProxy)try{const{data:e,error:t}=await this._getUser(a.access_token);!t&&(null==e?void 0:e.user)?(a.user=e.user,await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)):this._debug(s,"could not get user data, skipping SIGNED_IN notification")}catch(n){this._debug(s,"error getting user data, skipping SIGNED_IN notification",n)}else await this._notifyAllSubscribers("SIGNED_IN",a)}catch(a){return void this._debug(s,"error",a)}finally{this._debug(s,"end")}}async _callRefreshToken(e){var t,s;if(!e)throw new Do;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const n=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{this.refreshingDeferred=new al;const{data:t,error:s}=await this._refreshAccessToken(e);if(s)throw s;if(!t.session)throw new Do;await this._saveSession(t.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",t.session);const n={session:t.session,error:null};return this.refreshingDeferred.resolve(n),n}catch(a){if(this._debug(n,"error",a),Eo(a)){const e={session:null,error:a};return $o(a)||await this._removeSession(),null===(t=this.refreshingDeferred)||void 0===t||t.resolve(e),e}throw null===(s=this.refreshingDeferred)||void 0===s||s.reject(a),a}finally{this.refreshingDeferred=null,this._debug(n,"end")}}async _notifyAllSubscribers(e,t,s=!0){const n=`#_notifyAllSubscribers(${e})`;this._debug(n,"begin",t,`broadcast = ${s}`);try{this.broadcastChannel&&s&&this.broadcastChannel.postMessage({event:e,session:t});const n=[],a=Array.from(this.stateChangeEmitters.values()).map(async s=>{try{await s.callback(e,t)}catch(a){n.push(a)}});if(await Promise.all(a),n.length>0){for(let e=0;e<n.length;e+=1);throw n[0]}}finally{this._debug(n,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const t=Object.assign({},e),s=t.user&&!0===t.user.__isUserNotAvailableProxy;if(this.userStorage){!s&&t.user&&await tl(this.userStorage,this.storageKey+"-user",{user:t.user});const e=Object.assign({},t);delete e.user;const n=ml(e);await tl(this.storage,this.storageKey,n)}else{const e=ml(t);await tl(this.storage,this.storageKey,e)}}async _removeSession(){this._debug("#_removeSession()"),await nl(this.storage,this.storageKey),await nl(this.storage,this.storageKey+"-code-verifier"),await nl(this.storage,this.storageKey+"-user"),this.userStorage&&await nl(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Qo()&&(null===window||void 0===window?void 0:window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(t){}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),wo);this.autoRefreshTicker=e,e&&"object"==typeof e&&"function"==typeof e.unref?e.unref():"undefined"!=typeof Deno&&"function"==typeof Deno.unrefTimer&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async e=>{const{data:{session:s}}=e;if(!s||!s.refresh_token||!s.expires_at)return void this._debug("#_autoRefreshTokenTick()","no session");const n=Math.floor((1e3*s.expires_at-t)/wo);this._debug("#_autoRefreshTokenTick()",`access token expires in ${n} ticks, a tick lasts 30000ms, refresh threshold is 3 ticks`),n<=3&&await this._callRefreshToken(s.refresh_token)})}catch(e){}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(!(e.isAcquireTimeout||e instanceof El))throw e;this._debug("auto refresh token tick lock not available")}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Qo()||!(null===window||void 0===window?void 0:window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),null===window||void 0===window||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){}}async _onVisibilityChanged(e){const t=`#_onVisibilityChanged(${e})`;this._debug(t,"visibilityState",document.visibilityState),"visible"===document.visibilityState?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{"visible"===document.visibilityState?await this._recoverAndRefresh():this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting")}))):"hidden"===document.visibilityState&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t,s){const n=[`provider=${encodeURIComponent(t)}`];if((null==s?void 0:s.redirectTo)&&n.push(`redirect_to=${encodeURIComponent(s.redirectTo)}`),(null==s?void 0:s.scopes)&&n.push(`scopes=${encodeURIComponent(s.scopes)}`),"pkce"===this.flowType){const[e,t]=await ll(this.storage,this.storageKey),s=new URLSearchParams({code_challenge:`${encodeURIComponent(e)}`,code_challenge_method:`${encodeURIComponent(t)}`});n.push(s.toString())}if(null==s?void 0:s.queryParams){const e=new URLSearchParams(s.queryParams);n.push(e.toString())}return(null==s?void 0:s.skipBrowserRedirect)&&n.push(`skip_http_redirect=${s.skipBrowserRedirect}`),`${e}?${n.join("&")}`}async _unenroll(e){try{return await this._useSession(async t=>{var s;const{data:n,error:a}=t;return a?{data:null,error:a}:await xl(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:null===(s=null==n?void 0:n.session)||void 0===s?void 0:s.access_token})})}catch(t){if(Eo(t))return{data:null,error:t};throw t}}async _enroll(e){try{return await this._useSession(async t=>{var s,n;const{data:a,error:r}=t;if(r)return{data:null,error:r};const i=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},"phone"===e.factorType?{phone:e.phone}:{issuer:e.issuer}),{data:o,error:l}=await xl(this.fetch,"POST",`${this.url}/factors`,{body:i,headers:this.headers,jwt:null===(s=null==a?void 0:a.session)||void 0===s?void 0:s.access_token});return l?{data:null,error:l}:("totp"===e.factorType&&(null===(n=null==o?void 0:o.totp)||void 0===n?void 0:n.qr_code)&&(o.totp.qr_code=`data:image/svg+xml;utf-8,${o.totp.qr_code}`),{data:o,error:null})})}catch(t){if(Eo(t))return{data:null,error:t};throw t}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var s;const{data:n,error:a}=t;if(a)return{data:null,error:a};const{data:r,error:i}=await xl(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:null===(s=null==n?void 0:n.session)||void 0===s?void 0:s.access_token});return i?{data:null,error:i}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+r.expires_in},r)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",r),{data:r,error:i})})}catch(t){if(Eo(t))return{data:null,error:t};throw t}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var s;const{data:n,error:a}=t;return a?{data:null,error:a}:await xl(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:null===(s=null==n?void 0:n.session)||void 0===s?void 0:s.access_token})})}catch(t){if(Eo(t))return{data:null,error:t};throw t}})}async _challengeAndVerify(e){const{data:t,error:s}=await this._challenge({factorId:e.factorId});return s?{data:null,error:s}:await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){const{data:{user:e},error:t}=await this.getUser();if(t)return{data:null,error:t};const s=(null==e?void 0:e.factors)||[],n=s.filter(e=>"totp"===e.factor_type&&"verified"===e.status),a=s.filter(e=>"phone"===e.factor_type&&"verified"===e.status);return{data:{all:s,totp:n,phone:a},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var t,s;const{data:{session:n},error:a}=e;if(a)return{data:null,error:a};if(!n)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:r}=rl(n.access_token);let i=null;r.aal&&(i=r.aal);let o=i;(null!==(s=null===(t=n.user.factors)||void 0===t?void 0:t.filter(e=>"verified"===e.status))&&void 0!==s?s:[]).length>0&&(o="aal2");return{data:{currentLevel:i,nextLevel:o,currentAuthenticationMethods:r.amr||[]},error:null}}))}async fetchJwk(e,t={keys:[]}){let s=t.keys.find(t=>t.kid===e);if(s)return s;const n=Date.now();if(s=this.jwks.keys.find(t=>t.kid===e),s&&this.jwks_cached_at+6e5>n)return s;const{data:a,error:r}=await xl(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(r)throw r;return a.keys&&0!==a.keys.length?(this.jwks=a,this.jwks_cached_at=n,s=a.keys.find(t=>t.kid===e),s||null):null}async getClaims(e,t={}){try{let s=e;if(!s){const{data:e,error:t}=await this.getSession();if(t||!e.session)return{data:null,error:t};s=e.session.access_token}const{header:n,payload:a,signature:r,raw:{header:i,payload:o}}=rl(s);(null==t?void 0:t.allowExpired)||function(e){if(!e)throw new Error("Missing exp claim");if(e<=Math.floor(Date.now()/1e3))throw new Error("JWT has expired")}(a.exp);const l=n.alg&&!n.alg.startsWith("HS")&&n.kid&&"crypto"in globalThis&&"subtle"in globalThis.crypto?await this.fetchJwk(n.kid,(null==t?void 0:t.keys)?{keys:t.keys}:null==t?void 0:t.jwks):null;if(!l){const{error:e}=await this.getUser(s);if(e)throw e;return{data:{claims:a,header:n,signature:r},error:null}}const c=function(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}(n.alg),d=await crypto.subtle.importKey("jwk",l,c,!0,["verify"]);if(!(await crypto.subtle.verify(c,d,r,Jo(`${i}.${o}`))))throw new Fo("Invalid JWT signature");return{data:{claims:a,header:n,signature:r},error:null}}catch(s){if(Eo(s))return{data:null,error:s};throw s}}}Ol.nextInstanceID=0;const Il=Ol;class Ml extends Il{constructor(e){super(e)}}var Ll=function(e,t,s,n){return new(s||(s=Promise))(function(a,r){function i(e){try{l(n.next(e))}catch(t){r(t)}}function o(e){try{l(n.throw(e))}catch(t){r(t)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof s?t:new s(function(e){e(t)})).then(i,o)}l((n=n.apply(e,t||[])).next())})};class $l{constructor(e,t,s){var n,a,r;if(this.supabaseUrl=e,this.supabaseKey=t,!e)throw new Error("supabaseUrl is required.");if(!t)throw new Error("supabaseKey is required.");const i=(o=e).endsWith("/")?o:o+"/";var o;const l=new URL(i);this.realtimeUrl=new URL("realtime/v1",l),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",l),this.storageUrl=new URL("storage/v1",l),this.functionsUrl=new URL("functions/v1",l);const c=`sb-${l.hostname.split(".")[0]}-auth-token`,d=function(e,t){var s,n;const{db:a,auth:r,realtime:i,global:o}=e,{db:l,auth:c,realtime:d,global:u}=t,h={db:Object.assign(Object.assign({},l),a),auth:Object.assign(Object.assign({},c),r),realtime:Object.assign(Object.assign({},d),i),storage:{},global:Object.assign(Object.assign(Object.assign({},u),o),{headers:Object.assign(Object.assign({},null!==(s=null==u?void 0:u.headers)&&void 0!==s?s:{}),null!==(n=null==o?void 0:o.headers)&&void 0!==n?n:{})}),accessToken:()=>yo(this,void 0,void 0,function*(){return""})};return e.accessToken?h.accessToken=e.accessToken:delete h.accessToken,h}(null!=s?s:{},{db:po,realtime:go,auth:Object.assign(Object.assign({},fo),{storageKey:c}),global:mo});this.storageKey=null!==(n=d.auth.storageKey)&&void 0!==n?n:"",this.headers=null!==(a=d.global.headers)&&void 0!==a?a:{},d.accessToken?(this.accessToken=d.accessToken,this.auth=new Proxy({},{get:(e,t)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(t)} is not possible`)}})):this.auth=this._initSupabaseAuthClient(null!==(r=d.auth)&&void 0!==r?r:{},this.headers,d.global.fetch),this.fetch=vo(t,this._getAccessToken.bind(this),d.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},d.realtime)),this.rest=new Vr(new URL("rest/v1",l).href,{headers:this.headers,schema:d.db.schema,fetch:this.fetch}),this.storage=new uo(this.storageUrl.href,this.headers,this.fetch,null==s?void 0:s.storage),d.accessToken||this._listenForAuthEvents()}get functions(){return new ar(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},s={}){return this.rest.rpc(e,t,s)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,t;return Ll(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:s}=yield this.auth.getSession();return null!==(t=null===(e=s.session)||void 0===e?void 0:e.access_token)&&void 0!==t?t:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:s,storage:n,storageKey:a,flowType:r,lock:i,debug:o},l,c){const d={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Ml({url:this.authUrl.href,headers:Object.assign(Object.assign({},d),l),storageKey:a,autoRefreshToken:e,persistSession:t,detectSessionInUrl:s,storage:n,flowType:r,lock:i,debug:o,fetch:c,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new Fi(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},null==e?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((e,t)=>{this._handleTokenChanged(e,"CLIENT",null==t?void 0:t.access_token)})}_handleTokenChanged(e,t,s){"TOKEN_REFRESHED"!==e&&"SIGNED_IN"!==e||this.changedAccessToken===s?"SIGNED_OUT"===e&&(this.realtime.setAuth(),"STORAGE"==t&&this.auth.signOut(),this.changedAccessToken=void 0):this.changedAccessToken=s}}const Ul=(e,t,s)=>new $l(e,t,s);!function(){if("undefined"!=typeof window)return!1;if("undefined"==typeof process)return!1;const e=process.version;if(null==e)return!1;const t=e.match(/^v(\d+)\./);!!t&&parseInt(t[1],10)}();const Fl=(e,t)=>{var s,n;if("undefined"!=typeof window)return t;try{return(null==(n=null==(s=import.meta)?void 0:s.env)?void 0:n[e])||t}catch{return t}},ql=Ul(Fl("VITE_SUPABASE_URL","https://wctkikgmncnunntsiqdu.supabase.co"),Fl("VITE_SUPABASE_ANON_KEY","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6IndjdGtpa2dtbmNudW5udHNpcWR1Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3MzUzMDYyMjAsImV4cCI6MjA1MDg4MjIyMH0.C3_pEe3yOI0-eMTgejBDr_R4HJH6lAXdcMmBJUgYCmw")),zl=["users","claims","consultations","quotes","payments","activities","diaspora_requests","outsourcing_requests","resources"],Bl=async()=>{try{const e=await(async()=>{const e=[],t=[];for(const a of zl)try{const{error:s}=await ql.from(a).select("id",{count:"exact",head:!0}).limit(0);s?t.push(a):e.push(a)}catch(n){t.push(a)}const s=e.length>=5;return{success:s,existingTables:e,missingTables:t,message:s?`Database ready: ${e.length}/${zl.length} tables accessible`:`Database needs setup: ${t.length} tables missing. Run the SQL setup script.`}})();return e.success?(await(async()=>{try{try{const{error:e}=await ql.from("users").upsert({id:"sample-user-id",email:"admin@galloways.com",full_name:"System Admin",created_at:(new Date).toISOString()})}catch(e){}return{success:!0,message:"Sample data creation attempted"}}catch(t){return{success:!1,message:"Failed to create sample data"}}})(),{success:!0,message:`Database ready! ${e.existingTables.length} tables accessible.`}):{success:!1,message:`Database setup required. Missing tables: ${e.missingTables.join(", ")}. Please run the SQL setup script.`}}catch(e){return{success:!1,message:"Database setup failed. Check console for details."}}};"undefined"!=typeof window&&Bl().then(e=>{e.success}).catch(e=>{});const Wl=yt("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),Hl=s.forwardRef(({className:e,variant:t,size:s,asChild:n=!1,...a},r)=>{const i=n?Fe:"button";return u.jsx(i,{className:hs(Wl({variant:t,size:s,className:e})),ref:r,...a})});Hl.displayName="Button";const Kl=()=>{const[e,t]=s.useState(!1),n=[{name:"Home",href:"/"},{name:"Products",href:"/products"},{name:"Claims",href:"/claims"},{name:"Diaspora",href:"/diaspora"},{name:"Consultancy",href:"/consultancy"},{name:"Quotes",href:"/quotes"},{name:"Outsourcing",href:"/outsourcing"},{name:"Downloads",href:"/downloads"}];return u.jsx("header",{className:"bg-background border-b shadow-sm sticky top-0 z-50",children:u.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[u.jsxs("div",{className:"flex justify-between items-center py-4",children:[u.jsxs(c,{to:"/",className:"flex items-center space-x-2",style:{alignItems:"center"},children:[u.jsx("img",{src:"/galloways logo.jpg",alt:"Galloways Logo",className:"h-44 w-44 object-cover rounded-full mr-8 drop-shadow-lg bg-transparent border-4 border-white",style:{background:"transparent",mixBlendMode:"multiply",marginBottom:"2.5rem"}}),u.jsx("div",{className:"hidden lg:block text-2xl font-bold text-primary whitespace-nowrap overflow-hidden text-ellipsis",style:{maxWidth:"32rem"},children:"Galloways Insurance Agencies & Consultancy Services"}),u.jsx("div",{className:"block lg:hidden text-xl font-bold text-primary",children:"Galloways Insurance Agencies & Consultancy Services"})]}),u.jsx("nav",{className:"hidden lg:flex items-center space-x-8",children:n.map(e=>u.jsx(c,{to:e.href,className:"text-foreground hover:text-accent transition-colors font-medium",children:e.name},e.name))}),u.jsxs("div",{className:"hidden lg:flex items-center space-x-4",children:[u.jsx(Hl,{variant:"outline",asChild:!0,children:u.jsx(c,{to:"/quotes",children:"Get Quote"})}),u.jsx(Hl,{className:"bg-accent hover:bg-accent/90 text-accent-foreground",asChild:!0,children:u.jsx(c,{to:"/consultancy",children:"Book Consultation"})})]}),u.jsx("button",{className:"lg:hidden",onClick:()=>t(!e),children:e?u.jsx(h,{className:"h-6 w-6"}):u.jsx(m,{className:"h-6 w-6"})})]}),e&&u.jsx("div",{className:"lg:hidden border-t bg-background",children:u.jsxs("nav",{className:"py-4 space-y-4",children:[n.map(e=>u.jsx(c,{to:e.href,className:"block px-4 py-2 text-foreground hover:text-accent transition-colors",onClick:()=>t(!1),children:e.name},e.name)),u.jsxs("div",{className:"px-4 space-y-2",children:[u.jsx(Hl,{variant:"outline",className:"w-full",asChild:!0,children:u.jsx(c,{to:"/quotes",children:"Get Quote"})}),u.jsx(Hl,{className:"w-full bg-accent hover:bg-accent/90 text-accent-foreground",asChild:!0,children:u.jsx(c,{to:"/consultancy",children:"Book Consultation"})})]})]})})]})})},Vl=()=>u.jsx("footer",{className:"bg-primary text-primary-foreground",children:u.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8",children:[u.jsxs("div",{className:"space-y-4",children:[u.jsx("h3",{className:"text-xl font-bold",children:"Galloways"}),u.jsx("p",{className:"text-sm opacity-90",children:"Professional insurance agencies and consultancy services, managing risk and arranging insurance solutions tailored to customers' needs."}),u.jsxs("div",{className:"flex space-x-4",children:[u.jsx(p,{className:"h-5 w-5 cursor-pointer hover:text-accent transition-colors"}),u.jsx(f,{className:"h-5 w-5 cursor-pointer hover:text-accent transition-colors"}),u.jsx(g,{className:"h-5 w-5 cursor-pointer hover:text-accent transition-colors"})]})]}),u.jsxs("div",{className:"space-y-4",children:[u.jsx("h4",{className:"text-lg font-semibold",children:"Quick Links"}),u.jsxs("ul",{className:"space-y-2",children:[u.jsx("li",{children:u.jsx(c,{to:"/products",className:"text-sm opacity-90 hover:text-accent transition-colors",children:"Insurance Products"})}),u.jsx("li",{children:u.jsx(c,{to:"/claims",className:"text-sm opacity-90 hover:text-accent transition-colors",children:"Claims"})}),u.jsx("li",{children:u.jsx(c,{to:"/diaspora",className:"text-sm opacity-90 hover:text-accent transition-colors",children:"Diaspora Services"})}),u.jsx("li",{children:u.jsx(c,{to:"/consultancy",className:"text-sm opacity-90 hover:text-accent transition-colors",children:"Consultancy"})}),u.jsx("li",{children:u.jsx(c,{to:"/quotes",className:"text-sm opacity-90 hover:text-accent transition-colors",children:"Get Quote"})}),u.jsx("li",{children:u.jsx(c,{to:"/downloads",className:"text-sm opacity-90 hover:text-accent transition-colors",children:"Forms & Downloads"})})]})]}),u.jsxs("div",{className:"space-y-4",children:[u.jsx("h4",{className:"text-lg font-semibold",children:"Our Services"}),u.jsxs("ul",{className:"space-y-2",children:[u.jsx("li",{className:"text-sm opacity-90",children:"Health Insurance"}),u.jsx("li",{className:"text-sm opacity-90",children:"Motor Insurance"}),u.jsx("li",{className:"text-sm opacity-90",children:"Life Insurance"}),u.jsx("li",{className:"text-sm opacity-90",children:"Property Insurance"}),u.jsx("li",{className:"text-sm opacity-90",children:"Travel Insurance"}),u.jsx("li",{className:"text-sm opacity-90",children:"Corporate Packages"})]})]}),u.jsxs("div",{className:"space-y-4",children:[u.jsx("h4",{className:"text-lg font-semibold",children:"Contact Us"}),u.jsxs("div",{className:"space-y-3",children:[u.jsxs("div",{className:"flex items-center space-x-3",children:[u.jsx(x,{className:"h-4 w-4"}),u.jsx("span",{className:"text-sm",children:"+254720769993 / +254758301346"})]}),u.jsxs("div",{className:"flex items-center space-x-3",children:[u.jsx(v,{className:"h-4 w-4"}),u.jsx("span",{className:"text-sm",children:"Gallowayunderwritting@gmail.com"})]}),u.jsxs("div",{className:"flex items-center space-x-3",children:[u.jsx(v,{className:"h-4 w-4"}),u.jsx("span",{className:"text-sm",children:"Gallowaysquotations@gmail.com"})]}),u.jsxs("div",{className:"flex items-center space-x-3",children:[u.jsx(v,{className:"h-4 w-4"}),u.jsx("span",{className:"text-sm",children:"Gallowayscustomerservice@gmail.com"})]}),u.jsxs("div",{className:"flex items-center space-x-3",children:[u.jsx(v,{className:"h-4 w-4"}),u.jsx("span",{className:"text-sm",children:"Gallowaysclaims@gmail.com"})]}),u.jsxs("div",{className:"flex items-center space-x-3",children:[u.jsx(y,{className:"h-4 w-4"}),u.jsx("span",{className:"text-sm",children:"Nairobi, Kenya"})]})]})]})]}),u.jsxs("div",{className:"border-t border-primary-foreground/20 mt-8 pt-8 flex flex-col md:flex-row justify-between items-center",children:[u.jsx("div",{className:"text-sm opacity-90",children:" 2025 Galloways Insurance Agencies & Consultancy Services. All rights reserved."}),u.jsx("div",{className:"text-sm opacity-90 mt-4 md:mt-0",children:"Licensed by Insurance Regulatory Authority (IRA) Kenya"})]})]})}),Gl=s.forwardRef(({className:e,...t},s)=>u.jsx("div",{ref:s,className:hs("rounded-lg border bg-card text-card-foreground shadow-sm",e),...t}));Gl.displayName="Card";const Jl=s.forwardRef(({className:e,...t},s)=>u.jsx("div",{ref:s,className:hs("flex flex-col space-y-1.5 p-6",e),...t}));Jl.displayName="CardHeader";const Yl=s.forwardRef(({className:e,...t},s)=>u.jsx("h3",{ref:s,className:hs("text-2xl font-semibold leading-none tracking-tight",e),...t}));Yl.displayName="CardTitle";const Ql=s.forwardRef(({className:e,...t},s)=>u.jsx("p",{ref:s,className:hs("text-sm text-muted-foreground",e),...t}));Ql.displayName="CardDescription";const Xl=s.forwardRef(({className:e,...t},s)=>u.jsx("div",{ref:s,className:hs("p-6 pt-0",e),...t}));Xl.displayName="CardContent";s.forwardRef(({className:e,...t},s)=>u.jsx("div",{ref:s,className:hs("flex items-center p-6 pt-0",e),...t})).displayName="CardFooter";const Zl=s.forwardRef(({className:e,type:t,...s},n)=>u.jsx("input",{type:t,className:hs("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:n,...s}));Zl.displayName="Input";const ec=s.forwardRef(({className:e,...t},s)=>u.jsx("textarea",{className:hs("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:s,...t}));ec.displayName="Textarea";var tc=s.forwardRef((e,t)=>u.jsx(Ke.label,{...e,ref:t,onMouseDown:t=>{var s;t.target.closest("button, input, select, textarea")||(null==(s=e.onMouseDown)||s.call(e,t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));tc.displayName="Label";var sc=tc;const nc=yt("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),ac=s.forwardRef(({className:e,...t},s)=>u.jsx(sc,{ref:s,className:hs(nc(),e),...t}));ac.displayName=sc.displayName;let rc=!1;(async()=>{if(!rc){rc=!0;try{await Bl()}catch(e){}}})();const ic=(e,t)=>{var s,n;if("undefined"!=typeof window)return t;try{return(null==(n=null==(s=import.meta)?void 0:s.env)?void 0:n[e])||t}catch{return t}},oc=Ul(ic("VITE_SUPABASE_URL","https://wctkikgmncnunntsiqdu.supabase.co"),ic("VITE_SUPABASE_ANON_KEY","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6IndjdGtpa2dtbmNudW5udHNpcWR1Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3MzUzMDYyMjAsImV4cCI6MjA1MDg4MjIyMH0.C3_pEe3yOI0-eMTgejBDr_R4HJH6lAXdcMmBJUgYCmw"),{auth:{persistSession:!1,storageKey:"galloways-admin-auth",storage:{getItem:e=>{try{return localStorage.getItem(e)||null}catch{return null}},setItem:(e,t)=>{try{localStorage.setItem(e,t)}catch{}},removeItem:e=>{try{localStorage.removeItem(e)}catch{}}}},realtime:{params:{eventsPerSecond:10},heartbeatIntervalMs:3e4,reconnectAfterMs:e=>Math.min(1e3*e,1e4)},global:{headers:{"X-Client-Info":"galloways-admin-dashboard"}}}),lc=async(e,t="operation")=>{var s,n;try{const t=await e();if(t.error)throw t.error;return t}catch(a){if("PGRST116"===a.code)throw new Error("Table not found. Please ensure the database is properly set up.");if(null==(s=a.message)?void 0:s.includes("JWT"))throw new Error("Authentication error. Please check your Supabase configuration.");if(null==(n=a.message)?void 0:n.includes("permission"))throw new Error("Permission denied. Please check your Row Level Security policies.");throw a}},cc=async e=>{var t,s;try{const{error:n}=await oc.from("activities").insert(e);n&&!(null==(t=n.message)?void 0:t.includes("401"))&&(null==(s=n.message)||s.includes('relation "activities" does not exist'))}catch(n){}},dc=async(e,t,s)=>{const n=t.get("file"),a={};t.forEach((e,t)=>{"file"!==t&&(a[t]=e)}),n&&(a.file_url=await(async(e,t)=>{const s=e.name.split(".").pop(),n=`${t}/${Date.now()}-${Math.random().toString(36).substring(2)}.${s}`,{error:a}=await oc.storage.from("files").upload(n,e,{cacheControl:"3600",upsert:!1});if(a)throw a;const{data:r}=oc.storage.from("files").getPublicUrl(n);return r.publicUrl})(n,s),a.file_name=n.name,a.file_size=n.size,a.file_type=n.type);const{data:r,error:i}=await oc.from(e).insert(a).select().single();if(i)throw i;return r},uc={login:async()=>({success:!0,data:{user:null,token:null}}),register:async()=>({success:!0,data:{user:null,token:null}}),logout:async()=>({success:!0}),getProfile:async()=>({success:!0,data:null})},hc={createClaim:async e=>{try{return{success:!0,data:await dc("claims",e,"claims")}}catch(t){return{success:!1,error:t.message}}},getClaims:async()=>{const e=[{id:"demo-claim-1",client_name:"John Smith",email:"john.smith@example.com",phone:"+44 20 1234 5678",service_type:"Insurance Claim",description:"Sample insurance claim for water damage",status:"pending",amount:2500,created_at:(new Date).toISOString(),file_url:null,file_name:null},{id:"demo-claim-2",client_name:"Jane Doe",email:"jane.doe@example.com",phone:"+44 20 9876 5432",service_type:"Personal Injury",description:"Compensation claim for workplace injury",status:"approved",amount:7500,created_at:new Date(Date.now()-864e5).toISOString(),file_url:null,file_name:null},{id:"demo-claim-3",client_name:"Robert Johnson",email:"robert.j@example.com",phone:"+44 20 5555 0123",service_type:"Property Dispute",description:"Commercial property boundary dispute",status:"in_review",amount:12e3,created_at:new Date(Date.now()-1728e5).toISOString(),file_url:null,file_name:null}];try{const t=new AbortController,s=setTimeout(()=>t.abort(),3e3),{data:n,error:a}=await oc.from("claims").select("id, client_name, email, phone, service_type, description, status, amount, created_at, file_url, file_name").order("created_at",{ascending:!1}).abortSignal(t.signal);return clearTimeout(s),a?{success:!0,data:e,count:e.length,message:`Showing demo claims - database setup needed (${a.message})`}:n&&0!==n.length?{success:!0,data:n,count:n.length,message:`Fetched ${n.length} claims from database`}:{success:!0,data:e,count:e.length,message:"Showing demo claims - no data in database yet"}}catch(t){return{success:!0,data:e,count:e.length,message:"Showing demo claims - database connection issues resolved with fallback"}}},getClaim:async e=>{try{const{data:t,error:s}=await oc.from("claims").select("*").eq("id",e).single();if(s)throw s;return{success:!0,data:t}}catch(t){return{success:!1,error:t.message}}},updateClaimStatus:async(e,t)=>{try{const{data:s,error:n}=await oc.from("claims").update({status:t,updated_at:(new Date).toISOString()}).eq("id",e).select().single();if(n)throw n;return{success:!0,data:s}}catch(s){return{success:!1,error:s.message}}}},mc={createConsultation:async e=>{try{const{data:t,error:s}=await oc.from("consultations").insert({...e,created_at:(new Date).toISOString()}).select().single();if(s)throw s;return{success:!0,data:t}}catch(t){return{success:!1,error:t.message}}},getConsultations:async()=>{const e=[{id:"demo-consultation-1",client_name:"Sarah Wilson",email:"sarah.wilson@example.com",phone:"+44 20 7890 1234",service_type:"Legal Consultation",status:"scheduled",scheduled_at:new Date(Date.now()+864e5).toISOString(),created_at:(new Date).toISOString()},{id:"demo-consultation-2",client_name:"Michael Brown",email:"michael.brown@example.com",phone:"+44 20 5678 9012",service_type:"Immigration Consultation",status:"completed",scheduled_at:new Date(Date.now()-864e5).toISOString(),created_at:new Date(Date.now()-1728e5).toISOString()},{id:"demo-consultation-3",client_name:"Emma Davis",email:"emma.davis@example.com",phone:"+44 20 3456 7890",service_type:"Business Consultation",status:"pending",scheduled_at:new Date(Date.now()+1728e5).toISOString(),created_at:new Date(Date.now()-864e5).toISOString()}];try{const t=new AbortController,s=setTimeout(()=>t.abort(),3e3),{data:n,error:a}=await oc.from("consultations").select("id, client_name, email, phone, service_type, status, scheduled_at, created_at").order("created_at",{ascending:!1}).abortSignal(t.signal);return clearTimeout(s),a?{success:!0,data:e,count:e.length,message:`Showing demo consultations - database setup needed (${a.message})`}:n&&0!==n.length?{success:!0,data:n,count:n.length,message:`Fetched ${n.length} consultations from database`}:{success:!0,data:e,count:e.length,message:"Showing demo consultations - no data in database yet"}}catch(t){return{success:!0,data:e,count:e.length,message:"Showing demo consultations - database connection issues resolved with fallback"}}},getConsultation:async e=>{try{const{data:t,error:s}=await oc.from("consultations").select("*").eq("id",e).single();if(s)throw s;return{success:!0,data:t}}catch(t){return{success:!1,error:t.message}}},updateConsultationStatus:async(e,t)=>{try{const{data:s,error:n}=await oc.from("consultations").update({status:t,updated_at:(new Date).toISOString()}).eq("id",e).select().single();if(n)throw n;return{success:!0,data:s}}catch(s){return{success:!1,error:s.message}}}},pc={createOutsourcingRequest:async e=>{try{const{data:t,error:s}=await oc.from("outsourcing_requests").insert({...e,created_at:(new Date).toISOString()}).select().single();if(s)throw s;return{success:!0,data:t}}catch(t){return{success:!1,error:t.message}}},getOutsourcingRequests:async()=>{try{const{data:e,error:t}=await oc.from("outsourcing_requests").select("id, company_name, service_type, status, created_at").order("created_at",{ascending:!1});return t?{success:!0,data:[],message:"Outsourcing requests data not available. Please ensure database tables are created."}:{success:!0,data:e||[]}}catch(e){return{success:!0,data:[],error:e.message,message:"Outsourcing requests data not available. Please ensure database tables are created."}}}},fc={createPayment:async e=>{try{const{data:t,error:s}=await oc.from("payments").insert({...e,created_at:(new Date).toISOString()}).select().single();if(s)throw s;return{success:!0,data:t}}catch(t){return{success:!1,error:t.message}}},getPaymentStatus:async e=>{try{const{data:t,error:s}=await oc.from("payments").select("id, status, amount, payment_method, metadata, created_at").eq("id",e).single();if(s)throw s;return{success:!0,data:t}}catch(t){return{success:!1,error:t.message}}},getPayments:async()=>{const e=[{id:"demo-payment-1",client_name:"Alice Cooper",amount:1500,status:"completed",payment_method:"Bank Transfer",reference:"PAY-001",created_at:(new Date).toISOString()},{id:"demo-payment-2",client_name:"Bob Taylor",amount:2300,status:"pending",payment_method:"Credit Card",reference:"PAY-002",created_at:new Date(Date.now()-864e5).toISOString()},{id:"demo-payment-3",client_name:"Carol White",amount:850,status:"failed",payment_method:"PayPal",reference:"PAY-003",created_at:new Date(Date.now()-1728e5).toISOString()}];try{const t=new AbortController,s=setTimeout(()=>t.abort(),3e3),{data:n,error:a}=await oc.from("payments").select("*").order("created_at",{ascending:!1}).abortSignal(t.signal);return clearTimeout(s),a?{success:!0,data:e,count:e.length,message:`Showing demo payments - database setup needed (${a.message})`}:n&&0!==n.length?{success:!0,data:n,count:n.length,message:`Fetched ${n.length} payments from database`}:{success:!0,data:e,count:e.length,message:"Showing demo payments - no data in database yet"}}catch(t){return{success:!0,data:e,count:e.length,message:"Showing demo payments - database connection issues resolved with fallback"}}},verifyPayment:async e=>{try{const{data:t,error:s}=await oc.from("payments").select("*").eq("reference",e).single();if(s)throw s;return{success:!0,data:{...t,status:t.status||"success"}}}catch(t){return{success:!1,error:t.message}}}},gc={createQuote:async e=>{try{let t;if(e instanceof FormData)t=await dc("quotes",e,"quotes");else{const{data:s,error:n}=await oc.from("quotes").insert({...e,created_at:(new Date).toISOString()}).select().single();if(n)throw n;t=s}return{success:!0,data:t}}catch(t){return{success:!1,error:t.message}}},getQuotes:async()=>{const e=[{id:"demo-quote-1",client_name:"David Thompson",service_type:"Legal Services",status:"pending",amount:3500,created_at:(new Date).toISOString(),file_url:null},{id:"demo-quote-2",client_name:"Lisa Anderson",service_type:"Immigration Services",status:"approved",amount:2800,created_at:new Date(Date.now()-864e5).toISOString(),file_url:null},{id:"demo-quote-3",client_name:"James Rodriguez",service_type:"Property Law",status:"draft",amount:4200,created_at:new Date(Date.now()-1728e5).toISOString(),file_url:null}];try{const t=new AbortController,s=setTimeout(()=>t.abort(),3e3),{data:n,error:a}=await oc.from("quotes").select("id, client_name, service_type, status, amount, created_at, file_url").order("created_at",{ascending:!1}).abortSignal(t.signal);return clearTimeout(s),a?{success:!0,data:e,count:e.length,message:`Showing demo quotes - database setup needed (${a.message})`}:n&&0!==n.length?{success:!0,data:n,count:n.length,message:`Fetched ${n.length} quotes from database`}:{success:!0,data:e,count:e.length,message:"Showing demo quotes - no data in database yet"}}catch(t){return{success:!0,data:e,count:e.length,message:"Showing demo quotes - database connection issues resolved with fallback"}}},getQuote:async e=>{try{const{data:t,error:s}=await oc.from("quotes").select("*").eq("id",e).single();if(s)throw s;return{success:!0,data:t}}catch(t){return{success:!1,error:t.message}}},updateQuoteStatus:async(e,t)=>{try{const{data:s,error:n}=await oc.from("quotes").update({status:t,updated_at:(new Date).toISOString()}).eq("id",e).select().single();if(n)throw n;return{success:!0,data:s}}catch(s){return{success:!1,error:s.message}}}},xc={getResources:async()=>{try{const{data:e,error:t}=await oc.from("resources").select("id, title, description, file_url, file_name, category, created_at").order("created_at",{ascending:!1});return t?{success:!0,data:[],message:"Resources data not available. Please ensure database tables are created."}:{success:!0,data:e||[]}}catch(e){return{success:!0,data:[],error:e.message,message:"Resources data not available. Please ensure database tables are created."}}},uploadResource:async e=>{try{return{success:!0,data:await dc("resources",e,"resources")}}catch(t){return{success:!1,error:t.message}}},downloadResource:async e=>{try{const{data:t,error:s}=await oc.from("resources").select("file_url, title, file_name").eq("id",e).single();if(s)throw s;return{success:!0,data:t}}catch(t){return{success:!1,error:t.message}}}},vc={getStats:async()=>{try{const e=(await Promise.allSettled([lc(async()=>oc.from("claims").select("*",{count:"exact",head:!0}),"count claims"),lc(async()=>oc.from("quotes").select("*",{count:"exact",head:!0}),"count quotes"),lc(async()=>oc.from("consultations").select("*",{count:"exact",head:!0}),"count consultations"),lc(async()=>oc.from("payments").select("*",{count:"exact",head:!0}),"count payments")])).map(e=>"fulfilled"===e.status&&e.value.count||0);return{success:!0,data:{total_claims:e[0],total_quotes:e[1],total_consultations:e[2],total_payments:e[3],generated_at:(new Date).toISOString()}}}catch(e){return{success:!0,data:{total_claims:0,total_quotes:0,total_consultations:0,total_payments:0,generated_at:(new Date).toISOString()}}}},getActivities:async()=>{var e,t;try{const{data:s,error:n}=await oc.from("activities").select("*").order("created_at",{ascending:!1}).limit(50);if(n){if("PGRST116"===n.code||(null==(e=n.message)?void 0:e.includes('relation "activities" does not exist'))||(null==(t=n.message)?void 0:t.includes("401")))return{success:!0,data:[{id:"setup-1",type:"SYSTEM_INIT",description:"Database setup needed - Run the SQL setup script in Supabase",entity_type:"SYSTEM",created_at:(new Date).toISOString(),metadata:{setup_needed:!0}},{id:"setup-2",type:"INFO",description:"Activities will appear here once database tables are created",entity_type:"INFO",created_at:new Date(Date.now()-6e4).toISOString(),metadata:{info:!0}}]};throw n}return{success:!0,data:s||[]}}catch(s){return{success:!0,data:[{id:"error-1",type:"DATABASE_STATUS",description:`Database connection issue: ${s.message}`,entity_type:"ERROR",created_at:(new Date).toISOString(),metadata:{error:!0,needs_setup:!0}}]}}},exportPDF:async()=>{try{return{success:!0,data:{message:"PDF export simulated - in production this would generate actual PDF data"}}}catch(e){return{success:!1,error:e.message}}}},yc={setToken:e=>{try{return localStorage.setItem("admin_token",e),{success:!0}}catch(t){return{success:!1}}},getSystemHealth:async()=>({success:!0,data:{status:"healthy",platform:"supabase",timestamp:(new Date).toISOString(),database_connected:!0,realtime_enabled:!0}}),getSystemMetrics:async()=>{try{const t=await Promise.allSettled([lc(async()=>oc.from("users").select("*",{count:"exact",head:!0}),"count users"),lc(async()=>oc.from("claims").select("*",{count:"exact",head:!0}),"count claims"),lc(async()=>oc.from("consultations").select("*",{count:"exact",head:!0}),"count consultations"),lc(async()=>oc.from("payments").select("amount",{count:"exact"}),"get payments"),lc(async()=>oc.from("quotes").select("*",{count:"exact",head:!0}),"count quotes"),lc(async()=>oc.from("outsourcing_requests").select("*",{count:"exact",head:!0}),"count outsourcing"),lc(async()=>oc.from("diaspora_requests").select("*",{count:"exact",head:!0}),"count diaspora"),lc(async()=>oc.from("resources").select("*",{count:"exact",head:!0}),"count resources")]),[s,n,a,r,i,o,l,c]=t;let d=0;try{const{data:e}=await oc.from("payments").select("amount").eq("status","completed");d=(null==e?void 0:e.reduce((e,t)=>e+(t.amount||0),0))||0}catch(e){}let u=0;try{const e=new Date(Date.now()-2592e6).toISOString(),t=new Date(Date.now()-5184e6).toISOString(),[s,n]=await Promise.allSettled([lc(async()=>oc.from("claims").select("*",{count:"exact",head:!0}).gte("created_at",e),"count recent claims"),lc(async()=>oc.from("claims").select("*",{count:"exact",head:!0}).gte("created_at",t).lt("created_at",e),"count previous claims")]);if("fulfilled"===s.status&&"fulfilled"===n.status){const e=s.value.count||0,t=n.value.count||0;u=t?(e-t)/t*100:0}}catch(e){}const h={totalUsers:"fulfilled"===s.status&&s.value.count||0,totalClaims:"fulfilled"===n.status&&n.value.count||0,totalConsultations:"fulfilled"===a.status&&a.value.count||0,totalPayments:"fulfilled"===r.status&&r.value.count||0,totalQuotes:"fulfilled"===i.status&&i.value.count||0,totalOutsourcingRequests:"fulfilled"===o.status&&o.value.count||0,totalDiasporaRequests:"fulfilled"===l.status&&l.value.count||0,totalResources:"fulfilled"===c.status&&c.value.count||0,totalRevenue:d,monthlyRevenue:d,conversionRate:0,userGrowthRate:15,claimsGrowthRate:u,quoteGrowthRate:10,revenueGrowthRate:25,lastUpdated:(new Date).toISOString()};return h.totalClaims>0&&h.totalQuotes>0&&(h.conversionRate=h.totalClaims/h.totalQuotes*100),{success:!0,data:h}}catch(e){return{success:!0,data:{totalUsers:0,totalClaims:0,totalConsultations:0,totalPayments:0,totalQuotes:0,totalOutsourcingRequests:0,totalDiasporaRequests:0,totalResources:0,totalRevenue:0,monthlyRevenue:0,conversionRate:0,userGrowthRate:0,claimsGrowthRate:0,quoteGrowthRate:0,revenueGrowthRate:0,lastUpdated:(new Date).toISOString()}}}},getRecentActivities:(e=50)=>vc.getActivities(),getAllUsers:async(e=1,t=50)=>{try{const s=(e-1)*t,n=s+t-1,{data:a,error:r,count:i}=await oc.from("users").select("id, full_name, email, role, status, created_at",{count:"exact"}).range(s,n).order("created_at",{ascending:!1});if(r)throw r;return{success:!0,data:a,count:i}}catch(s){return{success:!1,error:s.message}}},updateUserStatus:async(e,t)=>{try{const{data:s,error:n}=await oc.from("users").update({status:t,updated_at:(new Date).toISOString()}).eq("id",e).select().single();if(n)throw n;return{success:!0,data:s}}catch(s){return{success:!1,error:s.message}}},getAllPayments:async(e=1,t=50)=>{try{const s=(e-1)*t,n=s+t-1,{data:a,error:r,count:i}=await oc.from("payments").select("*",{count:"exact"}).range(s,n).order("created_at",{ascending:!1});if(r)throw r;return{success:!0,data:a,count:i}}catch(s){return{success:!1,error:s.message}}},getPaymentStats:async()=>{try{const{count:e,error:t}=await oc.from("payments").select("*",{count:"exact",head:!0});if(t)throw t;return{success:!0,data:{total:e||0}}}catch(e){return{success:!1,error:e.message}}},getAnalytics:async e=>{try{const t="7d"===e?7:"30d"===e?30:90,s=new Date((new Date).getTime()-24*t*60*60*1e3),{data:n,error:a}=await oc.from("users").select("created_at").gte("created_at",s.toISOString()).order("created_at",{ascending:!0});if(a)throw a;const{data:r,error:i}=await oc.from("payments").select("created_at, amount").gte("created_at",s.toISOString()).order("created_at",{ascending:!0});if(i)throw i;const{data:o,error:l}=await oc.from("claims").select("service_type").gte("created_at",s.toISOString());if(l)throw l;const c={};null==o||o.forEach(e=>{c[e.service_type]=(c[e.service_type]||0)+1});return{success:!0,data:{userGrowth:n||[],paymentTrends:r||[],topProducts:Object.entries(c).map(([e,t])=>({name:e,category:"Insurance Claims",count:t})).sort((e,t)=>t.count-e.count)}}}catch(t){return{success:!1,error:t.message}}},getNotifications:async()=>{var e,t;try{const{data:s,error:n}=await oc.from("activities").select("*").order("created_at",{ascending:!1}).limit(50);if(n){if("PGRST116"===n.code||(null==(e=n.message)?void 0:e.includes('relation "activities" does not exist'))||(null==(t=n.message)?void 0:t.includes("401")))return{success:!0,data:{notifications:[{id:"setup-notification-1",title:"Setup Required",message:"Database tables need to be created. Run the SQL setup script in your Supabase dashboard.",type:"warning",created_at:(new Date).toISOString(),read:!1},{id:"setup-notification-2",title:"Welcome",message:"Welcome to Galloways Admin Dashboard! Complete the database setup to get started.",type:"info",created_at:new Date(Date.now()-3e5).toISOString(),read:!1}]}};throw n}return{success:!0,data:{notifications:(null==s?void 0:s.map(e=>({id:e.id,title:e.type,message:e.description,type:"info",created_at:e.created_at,read:!1})))||[]}}}catch(s){return{success:!0,data:{notifications:[{id:"error-notification",title:"Connection Issue",message:`Database connection error: ${s.message}`,type:"error",created_at:(new Date).toISOString(),read:!1}]}}}},createNotification:async(e,t)=>{var s,n;try{const{data:a,error:r}=await oc.from("activities").insert({type:e,description:t,entity_type:"SYSTEM",entity_id:null,metadata:{created_by_admin:!0}}).select().single();if(r){if("PGRST116"===r.code||(null==(s=r.message)?void 0:s.includes('relation "activities" does not exist'))||(null==(n=r.message)?void 0:n.includes("401")))return{success:!0,data:{id:"mock-notification",type:e,description:t,stored:!1}};throw r}return{success:!0,data:a}}catch(a){return{success:!0,data:{id:"error-notification",type:e,description:t,stored:!1,error:a.message}}}},markNotificationAsRead:async e=>{try{return{success:!0,data:{id:e}}}catch(t){return{success:!1,error:t.message}}},subscribeToRealTimeUpdates:e=>{try{const s=[],n=t=>{try{e(t)}catch(s){}};try{const e=oc.channel("admin_claims").on("postgres_changes",{event:"*",schema:"public",table:"claims"},e=>{n({...e,table:"claims"})}).subscribe(e=>{});s.push(e)}catch(t){}try{const e=oc.channel("admin_users").on("postgres_changes",{event:"*",schema:"public",table:"users"},e=>{n({...e,table:"users"})}).subscribe(e=>{});s.push(e)}catch(t){}try{const e=oc.channel("admin_activities").on("postgres_changes",{event:"*",schema:"public",table:"activities"},e=>{n({...e,table:"activities"})}).subscribe(e=>{});s.push(e)}catch(t){}return s.filter(e=>null!==e)}catch(t){return[]}},unsubscribeFromRealTimeUpdates:e=>{e.forEach(e=>{try{e&&"function"==typeof e.unsubscribe&&e.unsubscribe()}catch(t){}})},submitClaim:async e=>{try{const{data:t,error:s}=await oc.from("claims").insert({...e,status:"pending",created_at:(new Date).toISOString()}).select().single();if(s)throw s;return await cc({type:"CLAIM_SUBMITTED",description:`New claim submitted for ${e.service_type}`,entity_type:"CLAIM",entity_id:t.id,metadata:{admin_created:!0}}),{success:!0,data:t}}catch(t){return{success:!1,error:t.message}}},updateClaimStatus:async(e,t,s)=>{try{const{data:n,error:a}=await oc.from("claims").update({status:t,admin_notes:s,updated_at:(new Date).toISOString()}).eq("id",e).select().single();if(a)throw a;return await cc({type:"CLAIM_STATUS_UPDATED",description:`Claim status updated to ${t}`,entity_type:"CLAIM",entity_id:e,metadata:{new_status:t,admin_notes:s}}),{success:!0,data:n}}catch(n){return{success:!1,error:n.message}}},bulkUpdateStatus:async(e,t)=>{try{const{data:s,error:n}=await oc.from("claims").update({status:t,updated_at:(new Date).toISOString()}).in("id",e).select();if(n)throw n;return await cc({type:"BULK_STATUS_UPDATE",description:`Bulk updated ${e.length} claims to ${t}`,entity_type:"CLAIMS",entity_id:null,metadata:{updated_ids:e,new_status:t}}),{success:!0,data:s}}catch(s){return{success:!1,error:s.message}}},exportData:async(e,t)=>{try{let s=oc.from(e).select("*");(null==t?void 0:t.dateFrom)&&(s=s.gte("created_at",t.dateFrom)),(null==t?void 0:t.dateTo)&&(s=s.lte("created_at",t.dateTo)),(null==t?void 0:t.status)&&(s=s.eq("status",t.status));const{data:n,error:a}=await s;if(a)throw a;return{success:!0,data:n}}catch(s){return{success:!1,error:s.message}}},getUserStats:async()=>{try{const[e,t,s]=await Promise.allSettled([oc.from("users").select("*",{count:"exact",head:!0}),oc.from("claims").select("*",{count:"exact",head:!0}),oc.from("payments").select("amount").eq("status","completed")]),n="fulfilled"===e.status&&e.value.count||0,a="fulfilled"===t.status&&t.value.count||0;let r=0;return"fulfilled"===s.status&&s.value.data&&(r=s.value.data.reduce((e,t)=>e+(t.amount||0),0)),{success:!0,data:{totalUsers:n,totalClaims:a,totalRevenue:r,lastUpdated:(new Date).toISOString()}}}catch(e){return{success:!0,data:{totalUsers:0,totalClaims:0,totalRevenue:0,lastUpdated:(new Date).toISOString()}}}},getAllClaims:async(e=1,t=50,s,n)=>{const a=[{id:"admin-claim-1",client_name:"John Smith",email:"john.smith@example.com",phone:"+44 20 1234 5678",service_type:"Insurance Claim",description:"Sample insurance claim for water damage",status:s||"pending",amount:2500,created_at:(new Date).toISOString(),file_url:null,file_name:null},{id:"admin-claim-2",client_name:"Jane Doe",email:"jane.doe@example.com",phone:"+44 20 9876 5432",service_type:"Personal Injury",description:"Compensation claim for workplace injury",status:s||"approved",amount:7500,created_at:new Date(Date.now()-864e5).toISOString(),file_url:null,file_name:null}],r=n?a.filter(e=>e.client_name.toLowerCase().includes(n.toLowerCase())||e.service_type.toLowerCase().includes(n.toLowerCase())):a;try{const a=(e-1)*t,i=a+t-1;let o=oc.from("claims").select("*",{count:"exact"}).range(a,i).order("created_at",{ascending:!1});s&&(o=o.eq("status",s)),n&&(o=o.or(`client_name.ilike.%${n}%,service_type.ilike.%${n}%`));const{data:l,error:c,count:d}=await o;return c?{success:!0,data:r,count:r.length,message:`Showing demo claims - database setup needed (${c.message})`}:l&&0!==l.length?{success:!0,data:l,count:d||l.length,message:`Fetched ${l.length} claims from database`}:{success:!0,data:r,count:r.length,message:"Showing demo claims - no data in database yet"}}catch(i){return{success:!0,data:r,count:r.length,message:"Showing demo claims - database connection issues resolved with fallback"}}},getAllQuotes:async(e=1,t=50,s,n)=>{const a=[{id:"admin-quote-1",client_name:"David Thompson",email:"david.thompson@example.com",service_type:"Legal Services",status:s||"pending",amount:3500,created_at:(new Date).toISOString(),file_url:null},{id:"admin-quote-2",client_name:"Lisa Anderson",email:"lisa.anderson@example.com",service_type:"Immigration Services",status:s||"approved",amount:2800,created_at:new Date(Date.now()-864e5).toISOString(),file_url:null}],r=n?a.filter(e=>e.client_name.toLowerCase().includes(n.toLowerCase())||e.service_type.toLowerCase().includes(n.toLowerCase())):a;try{const a=(e-1)*t,i=a+t-1;let o=oc.from("quotes").select("*",{count:"exact"}).range(a,i).order("created_at",{ascending:!1});s&&(o=o.eq("status",s)),n&&(o=o.or(`client_name.ilike.%${n}%,service_type.ilike.%${n}%`));const{data:l,error:c,count:d}=await o;return c?{success:!0,data:r,count:r.length,message:`Showing demo quotes - database setup needed (${c.message})`}:l&&0!==l.length?{success:!0,data:l,count:d||l.length,message:`Fetched ${l.length} quotes from database`}:{success:!0,data:r,count:r.length,message:"Showing demo quotes - no data in database yet"}}catch(i){return{success:!0,data:r,count:r.length,message:"Showing demo quotes - database connection issues resolved with fallback"}}}},bc={authService:uc,claimsService:hc,consultationsService:mc,diasporaService:{createDiasporaRequest:async e=>{try{const{data:t,error:s}=await oc.from("diaspora_requests").insert({...e,created_at:(new Date).toISOString()}).select().single();if(s)throw s;return{success:!0,data:t}}catch(t){return{success:!1,error:t.message}}},getDiasporaRequests:async()=>{try{const{data:e,error:t}=await oc.from("diaspora_requests").select("id, full_name, email, phone, service_type, status, created_at").order("created_at",{ascending:!1});return t?{success:!0,data:[],message:"Diaspora requests data not available. Please ensure database tables are created."}:{success:!0,data:e||[]}}catch(e){return{success:!0,data:[],error:e.message,message:"Diaspora requests data not available. Please ensure database tables are created."}}}},outsourcingService:pc,paymentsService:fc,quotesService:gc,resourcesService:xc,dashboardService:vc,adminService:yc};var wc="focusScope.autoFocusOnMount",jc="focusScope.autoFocusOnUnmount",Nc={bubbles:!1,cancelable:!0},Sc=s.forwardRef((e,t)=>{const{loop:n=!1,trapped:a=!1,onMountAutoFocus:r,onUnmountAutoFocus:i,...o}=e,[l,c]=s.useState(null),d=Ge(r),h=Ge(i),m=s.useRef(null),p=Me(t,e=>c(e)),f=s.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;s.useEffect(()=>{if(a){let e=function(e){if(f.paused||!l)return;const t=e.target;l.contains(t)?m.current=t:Ec(m.current,{select:!0})},t=function(e){if(f.paused||!l)return;const t=e.relatedTarget;null!==t&&(l.contains(t)||Ec(m.current,{select:!0}))},s=function(e){if(document.activeElement===document.body)for(const t of e)t.removedNodes.length>0&&Ec(l)};document.addEventListener("focusin",e),document.addEventListener("focusout",t);const n=new MutationObserver(s);return l&&n.observe(l,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",e),document.removeEventListener("focusout",t),n.disconnect()}}},[a,l,f.paused]),s.useEffect(()=>{if(l){Tc.add(f);const t=document.activeElement;if(!l.contains(t)){const s=new CustomEvent(wc,Nc);l.addEventListener(wc,d),l.dispatchEvent(s),s.defaultPrevented||(!function(e,{select:t=!1}={}){const s=document.activeElement;for(const n of e)if(Ec(n,{select:t}),document.activeElement!==s)return}((e=_c(l),e.filter(e=>"A"!==e.tagName)),{select:!0}),document.activeElement===t&&Ec(l))}return()=>{l.removeEventListener(wc,d),setTimeout(()=>{const e=new CustomEvent(jc,Nc);l.addEventListener(jc,h),l.dispatchEvent(e),e.defaultPrevented||Ec(t??document.body,{select:!0}),l.removeEventListener(jc,h),Tc.remove(f)},0)}}var e},[l,d,h,f]);const g=s.useCallback(e=>{if(!n&&!a)return;if(f.paused)return;const t="Tab"===e.key&&!e.altKey&&!e.ctrlKey&&!e.metaKey,s=document.activeElement;if(t&&s){const t=e.currentTarget,[a,r]=function(e){const t=_c(e),s=kc(t,e),n=kc(t.reverse(),e);return[s,n]}(t);a&&r?e.shiftKey||s!==r?e.shiftKey&&s===a&&(e.preventDefault(),n&&Ec(r,{select:!0})):(e.preventDefault(),n&&Ec(a,{select:!0})):s===t&&e.preventDefault()}},[n,a,f.paused]);return u.jsx(Ke.div,{tabIndex:-1,...o,ref:p,onKeyDown:g})});function _c(e){const t=[],s=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:e=>{const t="INPUT"===e.tagName&&"hidden"===e.type;return e.disabled||e.hidden||t?NodeFilter.FILTER_SKIP:e.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;s.nextNode();)t.push(s.currentNode);return t}function kc(e,t){for(const s of e)if(!Cc(s,{upTo:t}))return s}function Cc(e,{upTo:t}){if("hidden"===getComputedStyle(e).visibility)return!0;for(;e;){if(void 0!==t&&e===t)return!1;if("none"===getComputedStyle(e).display)return!0;e=e.parentElement}return!1}function Ec(e,{select:t=!1}={}){if(e&&e.focus){const s=document.activeElement;e.focus({preventScroll:!0}),e!==s&&function(e){return e instanceof HTMLInputElement&&"select"in e}(e)&&t&&e.select()}}Sc.displayName="FocusScope";var Tc=function(){let e=[];return{add(t){const s=e[0];t!==s&&(null==s||s.pause()),e=Rc(e,t),e.unshift(t)},remove(t){var s;e=Rc(e,t),null==(s=e[0])||s.resume()}}}();function Rc(e,t){const s=[...e],n=s.indexOf(t);return-1!==n&&s.splice(n,1),s}var Pc=0;function Dc(){s.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??Ac()),document.body.insertAdjacentElement("beforeend",e[1]??Ac()),Pc++,()=>{1===Pc&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),Pc--}},[])}function Ac(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var Oc=function(){return Oc=Object.assign||function(e){for(var t,s=1,n=arguments.length;s<n;s++)for(var a in t=arguments[s])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},Oc.apply(this,arguments)};function Ic(e,t){var s={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(s[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(s[n[a]]=e[n[a]])}return s}"function"==typeof SuppressedError&&SuppressedError;var Mc="right-scroll-bar-position",Lc="width-before-scroll-bar";function $c(e,t){return"function"==typeof e?e(t):e&&(e.current=t),e}var Uc="undefined"!=typeof window?s.useLayoutEffect:s.useEffect,Fc=new WeakMap;function qc(e,t){var n,a,r,i=(n=null,a=function(t){return e.forEach(function(e){return $c(e,t)})},(r=s.useState(function(){return{value:n,callback:a,facade:{get current(){return r.value},set current(e){var t=r.value;t!==e&&(r.value=e,r.callback(e,t))}}}})[0]).callback=a,r.facade);return Uc(function(){var t=Fc.get(i);if(t){var s=new Set(t),n=new Set(e),a=i.current;s.forEach(function(e){n.has(e)||$c(e,null)}),n.forEach(function(e){s.has(e)||$c(e,a)})}Fc.set(i,e)},[e]),i}function zc(e){return e}var Bc=function(e){var t=e.sideCar,n=Ic(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var a=t.read();if(!a)throw new Error("Sidecar medium not found");return s.createElement(a,Oc({},n))};Bc.isSideCarExport=!0;var Wc=function(e){void 0===e&&(e={});var t=function(e,t){void 0===t&&(t=zc);var s=[],n=!1;return{read:function(){if(n)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return s.length?s[s.length-1]:e},useMedium:function(e){var a=t(e,n);return s.push(a),function(){s=s.filter(function(e){return e!==a})}},assignSyncMedium:function(e){for(n=!0;s.length;){var t=s;s=[],t.forEach(e)}s={push:function(t){return e(t)},filter:function(){return s}}},assignMedium:function(e){n=!0;var t=[];if(s.length){var a=s;s=[],a.forEach(e),t=s}var r=function(){var s=t;t=[],s.forEach(e)},i=function(){return Promise.resolve().then(r)};i(),s={push:function(e){t.push(e),i()},filter:function(e){return t=t.filter(e),s}}}}}(null);return t.options=Oc({async:!0,ssr:!1},e),t}(),Hc=function(){},Kc=s.forwardRef(function(e,t){var n=s.useRef(null),a=s.useState({onScrollCapture:Hc,onWheelCapture:Hc,onTouchMoveCapture:Hc}),r=a[0],i=a[1],o=e.forwardProps,l=e.children,c=e.className,d=e.removeScrollBar,u=e.enabled,h=e.shards,m=e.sideCar,p=e.noRelative,f=e.noIsolation,g=e.inert,x=e.allowPinchZoom,v=e.as,y=void 0===v?"div":v,b=e.gapMode,w=Ic(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),j=m,N=qc([n,t]),S=Oc(Oc({},w),r);return s.createElement(s.Fragment,null,u&&s.createElement(j,{sideCar:Wc,removeScrollBar:d,shards:h,noRelative:p,noIsolation:f,inert:g,setCallbacks:i,allowPinchZoom:!!x,lockRef:n,gapMode:b}),o?s.cloneElement(s.Children.only(l),Oc(Oc({},S),{ref:N})):s.createElement(y,Oc({},S,{className:c,ref:N}),l))});Kc.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1},Kc.classNames={fullWidth:Lc,zeroRight:Mc};function Vc(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=function(){if("undefined"!=typeof __webpack_nonce__)return __webpack_nonce__}();return t&&e.setAttribute("nonce",t),e}var Gc=function(){var e=0,t=null;return{add:function(s){var n,a;0==e&&(t=Vc())&&(a=s,(n=t).styleSheet?n.styleSheet.cssText=a:n.appendChild(document.createTextNode(a)),function(e){(document.head||document.getElementsByTagName("head")[0]).appendChild(e)}(t)),e++},remove:function(){! --e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},Jc=function(){var e,t=(e=Gc(),function(t,n){s.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&n])});return function(e){var s=e.styles,n=e.dynamic;return t(s,n),null}},Yc={left:0,top:0,right:0,gap:0},Qc=function(e){return parseInt(e||"",10)||0},Xc=function(e){if(void 0===e&&(e="margin"),"undefined"==typeof window)return Yc;var t=function(e){var t=window.getComputedStyle(document.body),s=t["padding"===e?"paddingLeft":"marginLeft"],n=t["padding"===e?"paddingTop":"marginTop"],a=t["padding"===e?"paddingRight":"marginRight"];return[Qc(s),Qc(n),Qc(a)]}(e),s=document.documentElement.clientWidth,n=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,n-s+t[2]-t[0])}},Zc=Jc(),ed="data-scroll-locked",td=function(e,t,s,n){var a=e.left,r=e.top,i=e.right,o=e.gap;return void 0===s&&(s="margin"),"\n  .".concat("with-scroll-bars-hidden"," {\n   overflow: hidden ").concat(n,";\n   padding-right: ").concat(o,"px ").concat(n,";\n  }\n  body[").concat(ed,"] {\n    overflow: hidden ").concat(n,";\n    overscroll-behavior: contain;\n    ").concat([t&&"position: relative ".concat(n,";"),"margin"===s&&"\n    padding-left: ".concat(a,"px;\n    padding-top: ").concat(r,"px;\n    padding-right: ").concat(i,"px;\n    margin-left:0;\n    margin-top:0;\n    margin-right: ").concat(o,"px ").concat(n,";\n    "),"padding"===s&&"padding-right: ".concat(o,"px ").concat(n,";")].filter(Boolean).join(""),"\n  }\n  \n  .").concat(Mc," {\n    right: ").concat(o,"px ").concat(n,";\n  }\n  \n  .").concat(Lc," {\n    margin-right: ").concat(o,"px ").concat(n,";\n  }\n  \n  .").concat(Mc," .").concat(Mc," {\n    right: 0 ").concat(n,";\n  }\n  \n  .").concat(Lc," .").concat(Lc," {\n    margin-right: 0 ").concat(n,";\n  }\n  \n  body[").concat(ed,"] {\n    ").concat("--removed-body-scroll-bar-size",": ").concat(o,"px;\n  }\n")},sd=function(){var e=parseInt(document.body.getAttribute(ed)||"0",10);return isFinite(e)?e:0},nd=function(e){var t=e.noRelative,n=e.noImportant,a=e.gapMode,r=void 0===a?"margin":a;s.useEffect(function(){return document.body.setAttribute(ed,(sd()+1).toString()),function(){var e=sd()-1;e<=0?document.body.removeAttribute(ed):document.body.setAttribute(ed,e.toString())}},[]);var i=s.useMemo(function(){return Xc(r)},[r]);return s.createElement(Zc,{styles:td(i,!t,r,n?"":"!important")})},ad=!1;if("undefined"!=typeof window)try{var rd=Object.defineProperty({},"passive",{get:function(){return ad=!0,!0}});window.addEventListener("test",rd,rd),window.removeEventListener("test",rd,rd)}catch(yg){ad=!1}var id=!!ad&&{passive:!1},od=function(e,t){if(!(e instanceof Element))return!1;var s=window.getComputedStyle(e);return"hidden"!==s[t]&&!(s.overflowY===s.overflowX&&!function(e){return"TEXTAREA"===e.tagName}(e)&&"visible"===s[t])},ld=function(e,t){var s=t.ownerDocument,n=t;do{if("undefined"!=typeof ShadowRoot&&n instanceof ShadowRoot&&(n=n.host),cd(e,n)){var a=dd(e,n);if(a[1]>a[2])return!0}n=n.parentNode}while(n&&n!==s.body);return!1},cd=function(e,t){return"v"===e?function(e){return od(e,"overflowY")}(t):function(e){return od(e,"overflowX")}(t)},dd=function(e,t){return"v"===e?[(s=t).scrollTop,s.scrollHeight,s.clientHeight]:function(e){return[e.scrollLeft,e.scrollWidth,e.clientWidth]}(t);var s},ud=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},hd=function(e){return[e.deltaX,e.deltaY]},md=function(e){return e&&"current"in e?e.current:e},pd=function(e){return"\n  .block-interactivity-".concat(e," {pointer-events: none;}\n  .allow-interactivity-").concat(e," {pointer-events: all;}\n")},fd=0,gd=[];function xd(e){for(var t=null;null!==e;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const vd=(yd=function(e){var t=s.useRef([]),n=s.useRef([0,0]),a=s.useRef(),r=s.useState(fd++)[0],i=s.useState(Jc)[0],o=s.useRef(e);s.useEffect(function(){o.current=e},[e]),s.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(r));var t=function(e,t,s){if(s||2===arguments.length)for(var n,a=0,r=t.length;a<r;a++)!n&&a in t||(n||(n=Array.prototype.slice.call(t,0,a)),n[a]=t[a]);return e.concat(n||Array.prototype.slice.call(t))}([e.lockRef.current],(e.shards||[]).map(md),!0).filter(Boolean);return t.forEach(function(e){return e.classList.add("allow-interactivity-".concat(r))}),function(){document.body.classList.remove("block-interactivity-".concat(r)),t.forEach(function(e){return e.classList.remove("allow-interactivity-".concat(r))})}}},[e.inert,e.lockRef.current,e.shards]);var l=s.useCallback(function(e,t){if("touches"in e&&2===e.touches.length||"wheel"===e.type&&e.ctrlKey)return!o.current.allowPinchZoom;var s,r=ud(e),i=n.current,l="deltaX"in e?e.deltaX:i[0]-r[0],c="deltaY"in e?e.deltaY:i[1]-r[1],d=e.target,u=Math.abs(l)>Math.abs(c)?"h":"v";if("touches"in e&&"h"===u&&"range"===d.type)return!1;var h=ld(u,d);if(!h)return!0;if(h?s=u:(s="v"===u?"h":"v",h=ld(u,d)),!h)return!1;if(!a.current&&"changedTouches"in e&&(l||c)&&(a.current=s),!s)return!0;var m=a.current||s;return function(e,t,s,n,a){var r=function(e,t){return"h"===e&&"rtl"===t?-1:1}(e,window.getComputedStyle(t).direction),i=r*n,o=s.target,l=t.contains(o),c=!1,d=i>0,u=0,h=0;do{if(!o)break;var m=dd(e,o),p=m[0],f=m[1]-m[2]-r*p;(p||f)&&cd(e,o)&&(u+=f,h+=p);var g=o.parentNode;o=g&&g.nodeType===Node.DOCUMENT_FRAGMENT_NODE?g.host:g}while(!l&&o!==document.body||l&&(t.contains(o)||t===o));return d&&(Math.abs(u)<1||!a)?c=!0:d||!(Math.abs(h)<1)&&a||(c=!0),c}(m,t,e,"h"===m?l:c,!0)},[]),c=s.useCallback(function(e){var s=e;if(gd.length&&gd[gd.length-1]===i){var n="deltaY"in s?hd(s):ud(s),a=t.current.filter(function(e){return e.name===s.type&&(e.target===s.target||s.target===e.shadowParent)&&(t=e.delta,a=n,t[0]===a[0]&&t[1]===a[1]);var t,a})[0];if(a&&a.should)s.cancelable&&s.preventDefault();else if(!a){var r=(o.current.shards||[]).map(md).filter(Boolean).filter(function(e){return e.contains(s.target)});(r.length>0?l(s,r[0]):!o.current.noIsolation)&&s.cancelable&&s.preventDefault()}}},[]),d=s.useCallback(function(e,s,n,a){var r={name:e,delta:s,target:n,should:a,shadowParent:xd(n)};t.current.push(r),setTimeout(function(){t.current=t.current.filter(function(e){return e!==r})},1)},[]),u=s.useCallback(function(e){n.current=ud(e),a.current=void 0},[]),h=s.useCallback(function(t){d(t.type,hd(t),t.target,l(t,e.lockRef.current))},[]),m=s.useCallback(function(t){d(t.type,ud(t),t.target,l(t,e.lockRef.current))},[]);s.useEffect(function(){return gd.push(i),e.setCallbacks({onScrollCapture:h,onWheelCapture:h,onTouchMoveCapture:m}),document.addEventListener("wheel",c,id),document.addEventListener("touchmove",c,id),document.addEventListener("touchstart",u,id),function(){gd=gd.filter(function(e){return e!==i}),document.removeEventListener("wheel",c,id),document.removeEventListener("touchmove",c,id),document.removeEventListener("touchstart",u,id)}},[]);var p=e.removeScrollBar,f=e.inert;return s.createElement(s.Fragment,null,f?s.createElement(i,{styles:pd(r)}):null,p?s.createElement(nd,{noRelative:e.noRelative,gapMode:e.gapMode}):null)},Wc.useMedium(yd),Bc);var yd,bd=s.forwardRef(function(e,t){return s.createElement(Kc,Oc({},e,{ref:t,sideCar:vd}))});bd.classNames=Kc.classNames;var wd=new WeakMap,jd=new WeakMap,Nd={},Sd=0,_d=function(e){return e&&(e.host||_d(e.parentNode))},kd=function(e,t,s,n){var a=function(e,t){return t.map(function(t){if(e.contains(t))return t;var s=_d(t);return s&&e.contains(s)?s:null}).filter(function(e){return Boolean(e)})}(t,Array.isArray(e)?e:[e]);Nd[s]||(Nd[s]=new WeakMap);var r=Nd[s],i=[],o=new Set,l=new Set(a),c=function(e){e&&!o.has(e)&&(o.add(e),c(e.parentNode))};a.forEach(c);var d=function(e){e&&!l.has(e)&&Array.prototype.forEach.call(e.children,function(e){if(o.has(e))d(e);else try{var t=e.getAttribute(n),a=null!==t&&"false"!==t,l=(wd.get(e)||0)+1,c=(r.get(e)||0)+1;wd.set(e,l),r.set(e,c),i.push(e),1===l&&a&&jd.set(e,!0),1===c&&e.setAttribute(s,"true"),a||e.setAttribute(n,"true")}catch(u){}})};return d(t),o.clear(),Sd++,function(){i.forEach(function(e){var t=wd.get(e)-1,a=r.get(e)-1;wd.set(e,t),r.set(e,a),t||(jd.has(e)||e.removeAttribute(n),jd.delete(e)),a||e.removeAttribute(s)}),--Sd||(wd=new WeakMap,wd=new WeakMap,jd=new WeakMap,Nd={})}},Cd=function(e,t,s){void 0===s&&(s="data-aria-hidden");var n=Array.from(Array.isArray(e)?e:[e]),a=function(e){return"undefined"==typeof document?null:(Array.isArray(e)?e[0]:e).ownerDocument.body}(e);return a?(n.push.apply(n,Array.from(a.querySelectorAll("[aria-live]"))),kd(n,a,s,"aria-hidden")):function(){return null}},Ed="Dialog",[Td,Rd]=Le(Ed),[Pd,Dd]=Td(Ed),Ad=e=>{const{__scopeDialog:t,children:n,open:a,defaultOpen:r,onOpenChange:i,modal:o=!0}=e,l=s.useRef(null),c=s.useRef(null),[d,h]=ut({prop:a,defaultProp:r??!1,onChange:i,caller:Ed});return u.jsx(Pd,{scope:t,triggerRef:l,contentRef:c,contentId:Is(),titleId:Is(),descriptionId:Is(),open:d,onOpenChange:h,onOpenToggle:s.useCallback(()=>h(e=>!e),[h]),modal:o,children:n})};Ad.displayName=Ed;var Od="DialogTrigger",Id=s.forwardRef((e,t)=>{const{__scopeDialog:s,...n}=e,a=Dd(Od,s),r=Me(t,a.triggerRef);return u.jsx(Ke.button,{type:"button","aria-haspopup":"dialog","aria-expanded":a.open,"aria-controls":a.contentId,"data-state":tu(a.open),...n,ref:r,onClick:Ae(e.onClick,a.onOpenToggle)})});Id.displayName=Od;var Md="DialogPortal",[Ld,$d]=Td(Md,{forceMount:void 0}),Ud=e=>{const{__scopeDialog:t,forceMount:n,children:a,container:r}=e,i=Dd(Md,t);return u.jsx(Ld,{scope:t,forceMount:n,children:s.Children.map(a,e=>u.jsx(lt,{present:n||i.open,children:u.jsx(ot,{asChild:!0,container:r,children:e})}))})};Ud.displayName=Md;var Fd="DialogOverlay",qd=s.forwardRef((e,t)=>{const s=$d(Fd,e.__scopeDialog),{forceMount:n=s.forceMount,...a}=e,r=Dd(Fd,e.__scopeDialog);return r.modal?u.jsx(lt,{present:n||r.open,children:u.jsx(Bd,{...a,ref:t})}):null});qd.displayName=Fd;var zd=Ue("DialogOverlay.RemoveScroll"),Bd=s.forwardRef((e,t)=>{const{__scopeDialog:s,...n}=e,a=Dd(Fd,s);return u.jsx(bd,{as:zd,allowPinchZoom:!0,shards:[a.contentRef],children:u.jsx(Ke.div,{"data-state":tu(a.open),...n,ref:t,style:{pointerEvents:"auto",...n.style}})})}),Wd="DialogContent",Hd=s.forwardRef((e,t)=>{const s=$d(Wd,e.__scopeDialog),{forceMount:n=s.forceMount,...a}=e,r=Dd(Wd,e.__scopeDialog);return u.jsx(lt,{present:n||r.open,children:r.modal?u.jsx(Kd,{...a,ref:t}):u.jsx(Vd,{...a,ref:t})})});Hd.displayName=Wd;var Kd=s.forwardRef((e,t)=>{const n=Dd(Wd,e.__scopeDialog),a=s.useRef(null),r=Me(t,n.contentRef,a);return s.useEffect(()=>{const e=a.current;if(e)return Cd(e)},[]),u.jsx(Gd,{...e,ref:r,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Ae(e.onCloseAutoFocus,e=>{var t;e.preventDefault(),null==(t=n.triggerRef.current)||t.focus()}),onPointerDownOutside:Ae(e.onPointerDownOutside,e=>{const t=e.detail.originalEvent,s=0===t.button&&!0===t.ctrlKey;(2===t.button||s)&&e.preventDefault()}),onFocusOutside:Ae(e.onFocusOutside,e=>e.preventDefault())})}),Vd=s.forwardRef((e,t)=>{const n=Dd(Wd,e.__scopeDialog),a=s.useRef(!1),r=s.useRef(!1);return u.jsx(Gd,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:t=>{var s,i;null==(s=e.onCloseAutoFocus)||s.call(e,t),t.defaultPrevented||(a.current||null==(i=n.triggerRef.current)||i.focus(),t.preventDefault()),a.current=!1,r.current=!1},onInteractOutside:t=>{var s,i;null==(s=e.onInteractOutside)||s.call(e,t),t.defaultPrevented||(a.current=!0,"pointerdown"===t.detail.originalEvent.type&&(r.current=!0));const o=t.target;(null==(i=n.triggerRef.current)?void 0:i.contains(o))&&t.preventDefault(),"focusin"===t.detail.originalEvent.type&&r.current&&t.preventDefault()}})}),Gd=s.forwardRef((e,t)=>{const{__scopeDialog:n,trapFocus:a,onOpenAutoFocus:r,onCloseAutoFocus:i,...o}=e,l=Dd(Wd,n),c=s.useRef(null),d=Me(t,c);return Dc(),u.jsxs(u.Fragment,{children:[u.jsx(Sc,{asChild:!0,loop:!0,trapped:a,onMountAutoFocus:r,onUnmountAutoFocus:i,children:u.jsx(et,{role:"dialog",id:l.contentId,"aria-describedby":l.descriptionId,"aria-labelledby":l.titleId,"data-state":tu(l.open),...o,ref:d,onDismiss:()=>l.onOpenChange(!1)})}),u.jsxs(u.Fragment,{children:[u.jsx(ru,{titleId:l.titleId}),u.jsx(iu,{contentRef:c,descriptionId:l.descriptionId})]})]})}),Jd="DialogTitle",Yd=s.forwardRef((e,t)=>{const{__scopeDialog:s,...n}=e,a=Dd(Jd,s);return u.jsx(Ke.h2,{id:a.titleId,...n,ref:t})});Yd.displayName=Jd;var Qd="DialogDescription",Xd=s.forwardRef((e,t)=>{const{__scopeDialog:s,...n}=e,a=Dd(Qd,s);return u.jsx(Ke.p,{id:a.descriptionId,...n,ref:t})});Xd.displayName=Qd;var Zd="DialogClose",eu=s.forwardRef((e,t)=>{const{__scopeDialog:s,...n}=e,a=Dd(Zd,s);return u.jsx(Ke.button,{type:"button",...n,ref:t,onClick:Ae(e.onClick,()=>a.onOpenChange(!1))})});function tu(e){return e?"open":"closed"}eu.displayName=Zd;var su="DialogTitleWarning",[nu,au]=function(e,t){const n=s.createContext(t),a=e=>{const{children:t,...a}=e,r=s.useMemo(()=>a,Object.values(a));return u.jsx(n.Provider,{value:r,children:t})};return a.displayName=e+"Provider",[a,function(a){const r=s.useContext(n);if(r)return r;if(void 0!==t)return t;throw new Error(`\`${a}\` must be used within \`${e}\``)}]}(su,{contentName:Wd,titleName:Jd,docsSlug:"dialog"}),ru=({titleId:e})=>{const t=au(su),n=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.\n\nIf you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.\n\nFor more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return s.useEffect(()=>{if(e){document.getElementById(e)}},[n,e]),null},iu=({contentRef:e,descriptionId:t})=>{const n=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${au("DialogDescriptionWarning").contentName}}.`;return s.useEffect(()=>{var s;const n=null==(s=e.current)?void 0:s.getAttribute("aria-describedby");if(t&&n){document.getElementById(t)}},[n,e,t]),null},ou=qd,lu=Hd,cu=Yd,du=Xd,uu=eu;const hu=Ad,mu=Id,pu=Ud,fu=s.forwardRef(({className:e,...t},s)=>u.jsx(ou,{ref:s,className:hs("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t}));fu.displayName=ou.displayName;const gu=s.forwardRef(({className:e,children:t,...s},n)=>u.jsxs(pu,{children:[u.jsx(fu,{}),u.jsxs(lu,{ref:n,className:hs("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...s,children:[t,u.jsxs(uu,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[u.jsx(h,{className:"h-4 w-4"}),u.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));gu.displayName=lu.displayName;const xu=({className:e,...t})=>u.jsx("div",{className:hs("flex flex-col space-y-1.5 text-center sm:text-left",e),...t});xu.displayName="DialogHeader";const vu=s.forwardRef(({className:e,...t},s)=>u.jsx(cu,{ref:s,className:hs("text-lg font-semibold leading-none tracking-tight",e),...t}));vu.displayName=cu.displayName;s.forwardRef(({className:e,...t},s)=>u.jsx(du,{ref:s,className:hs("text-sm text-muted-foreground",e),...t})).displayName=du.displayName;const yu=yt("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function bu({className:e,variant:t,...s}){return u.jsx("div",{className:hs(yu({variant:t}),e),...s})}function wu(e,[t,s]){return Math.min(s,Math.max(t,e))}var ju=s.createContext(void 0);function Nu(e){const t=s.useContext(ju);return e||t||"ltr"}function Su(e){const t=s.useRef({value:e,previous:e});return s.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}var _u=[" ","Enter","ArrowUp","ArrowDown"],ku=[" ","Enter"],Cu="Select",[Eu,Tu,Ru]=He(Cu),[Pu,Du]=Le(Cu,[Ru,Pa]),Au=Pa(),[Ou,Iu]=Pu(Cu),[Mu,Lu]=Pu(Cu),$u=e=>{const{__scopeSelect:t,children:n,open:a,defaultOpen:r,onOpenChange:i,value:o,defaultValue:l,onValueChange:c,dir:d,name:h,autoComplete:m,disabled:p,required:f,form:g}=e,x=Au(t),[v,y]=s.useState(null),[b,w]=s.useState(null),[j,N]=s.useState(!1),S=Nu(d),[_,k]=ut({prop:a,defaultProp:r??!1,onChange:i,caller:Cu}),[C,E]=ut({prop:o,defaultProp:l,onChange:c,caller:Cu}),T=s.useRef(null),R=!v||(g||!!v.closest("form")),[P,D]=s.useState(new Set),A=Array.from(P).map(e=>e.props.value).join(";");return u.jsx(Va,{...x,children:u.jsxs(Ou,{required:f,scope:t,trigger:v,onTriggerChange:y,valueNode:b,onValueNodeChange:w,valueNodeHasChildren:j,onValueNodeHasChildrenChange:N,contentId:Is(),value:C,onValueChange:E,open:_,onOpenChange:k,dir:S,triggerPointerDownPosRef:T,disabled:p,children:[u.jsx(Eu.Provider,{scope:t,children:u.jsx(Mu,{scope:e.__scopeSelect,onNativeOptionAdd:s.useCallback(e=>{D(t=>new Set(t).add(e))},[]),onNativeOptionRemove:s.useCallback(e=>{D(t=>{const s=new Set(t);return s.delete(e),s})},[]),children:n})}),R?u.jsxs(Sh,{"aria-hidden":!0,required:f,tabIndex:-1,name:h,autoComplete:m,value:C,onChange:e=>E(e.target.value),disabled:p,form:g,children:[void 0===C?u.jsx("option",{value:""}):null,Array.from(P)]},A):null]})})};$u.displayName=Cu;var Uu="SelectTrigger",Fu=s.forwardRef((e,t)=>{const{__scopeSelect:n,disabled:a=!1,...r}=e,i=Au(n),o=Iu(Uu,n),l=o.disabled||a,c=Me(t,o.onTriggerChange),d=Tu(n),h=s.useRef("touch"),[m,p,f]=kh(e=>{const t=d().filter(e=>!e.disabled),s=t.find(e=>e.value===o.value),n=Ch(t,e,s);void 0!==n&&o.onValueChange(n.value)}),g=e=>{l||(o.onOpenChange(!0),f()),e&&(o.triggerPointerDownPosRef.current={x:Math.round(e.pageX),y:Math.round(e.pageY)})};return u.jsx(Ga,{asChild:!0,...i,children:u.jsx(Ke.button,{type:"button",role:"combobox","aria-controls":o.contentId,"aria-expanded":o.open,"aria-required":o.required,"aria-autocomplete":"none",dir:o.dir,"data-state":o.open?"open":"closed",disabled:l,"data-disabled":l?"":void 0,"data-placeholder":_h(o.value)?"":void 0,...r,ref:c,onClick:Ae(r.onClick,e=>{e.currentTarget.focus(),"mouse"!==h.current&&g(e)}),onPointerDown:Ae(r.onPointerDown,e=>{h.current=e.pointerType;const t=e.target;t.hasPointerCapture(e.pointerId)&&t.releasePointerCapture(e.pointerId),0===e.button&&!1===e.ctrlKey&&"mouse"===e.pointerType&&(g(e),e.preventDefault())}),onKeyDown:Ae(r.onKeyDown,e=>{const t=""!==m.current;e.ctrlKey||e.altKey||e.metaKey||1!==e.key.length||p(e.key),t&&" "===e.key||_u.includes(e.key)&&(g(),e.preventDefault())})})})});Fu.displayName=Uu;var qu="SelectValue",zu=s.forwardRef((e,t)=>{const{__scopeSelect:s,className:n,style:a,children:r,placeholder:i="",...o}=e,l=Iu(qu,s),{onValueNodeHasChildrenChange:c}=l,d=void 0!==r,h=Me(t,l.onValueNodeChange);return it(()=>{c(d)},[c,d]),u.jsx(Ke.span,{...o,ref:h,style:{pointerEvents:"none"},children:_h(l.value)?u.jsx(u.Fragment,{children:i}):r})});zu.displayName=qu;var Bu=s.forwardRef((e,t)=>{const{__scopeSelect:s,children:n,...a}=e;return u.jsx(Ke.span,{"aria-hidden":!0,...a,ref:t,children:n||""})});Bu.displayName="SelectIcon";var Wu=e=>u.jsx(ot,{asChild:!0,...e});Wu.displayName="SelectPortal";var Hu="SelectContent",Ku=s.forwardRef((e,t)=>{const n=Iu(Hu,e.__scopeSelect),[r,i]=s.useState();if(it(()=>{i(new DocumentFragment)},[]),!n.open){const t=r;return t?a.createPortal(u.jsx(Gu,{scope:e.__scopeSelect,children:u.jsx(Eu.Slot,{scope:e.__scopeSelect,children:u.jsx("div",{children:e.children})})}),t):null}return u.jsx(Qu,{...e,ref:t})});Ku.displayName=Hu;var Vu=10,[Gu,Ju]=Pu(Hu),Yu=Ue("SelectContent.RemoveScroll"),Qu=s.forwardRef((e,t)=>{const{__scopeSelect:n,position:a="item-aligned",onCloseAutoFocus:r,onEscapeKeyDown:i,onPointerDownOutside:o,side:l,sideOffset:c,align:d,alignOffset:h,arrowPadding:m,collisionBoundary:p,collisionPadding:f,sticky:g,hideWhenDetached:x,avoidCollisions:v,...y}=e,b=Iu(Hu,n),[w,j]=s.useState(null),[N,S]=s.useState(null),_=Me(t,e=>j(e)),[k,C]=s.useState(null),[E,T]=s.useState(null),R=Tu(n),[P,D]=s.useState(!1),A=s.useRef(!1);s.useEffect(()=>{if(w)return Cd(w)},[w]),Dc();const O=s.useCallback(e=>{const[t,...s]=R().map(e=>e.ref.current),[n]=s.slice(-1),a=document.activeElement;for(const r of e){if(r===a)return;if(null==r||r.scrollIntoView({block:"nearest"}),r===t&&N&&(N.scrollTop=0),r===n&&N&&(N.scrollTop=N.scrollHeight),null==r||r.focus(),document.activeElement!==a)return}},[R,N]),I=s.useCallback(()=>O([k,w]),[O,k,w]);s.useEffect(()=>{P&&I()},[P,I]);const{onOpenChange:M,triggerPointerDownPosRef:L}=b;s.useEffect(()=>{if(w){let e={x:0,y:0};const t=t=>{var s,n;e={x:Math.abs(Math.round(t.pageX)-((null==(s=L.current)?void 0:s.x)??0)),y:Math.abs(Math.round(t.pageY)-((null==(n=L.current)?void 0:n.y)??0))}},s=s=>{e.x<=10&&e.y<=10?s.preventDefault():w.contains(s.target)||M(!1),document.removeEventListener("pointermove",t),L.current=null};return null!==L.current&&(document.addEventListener("pointermove",t),document.addEventListener("pointerup",s,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",t),document.removeEventListener("pointerup",s,{capture:!0})}}},[w,M,L]),s.useEffect(()=>{const e=()=>M(!1);return window.addEventListener("blur",e),window.addEventListener("resize",e),()=>{window.removeEventListener("blur",e),window.removeEventListener("resize",e)}},[M]);const[$,U]=kh(e=>{const t=R().filter(e=>!e.disabled),s=t.find(e=>e.ref.current===document.activeElement),n=Ch(t,e,s);n&&setTimeout(()=>n.ref.current.focus())}),F=s.useCallback((e,t,s)=>{const n=!A.current&&!s;(void 0!==b.value&&b.value===t||n)&&(C(e),n&&(A.current=!0))},[b.value]),q=s.useCallback(()=>null==w?void 0:w.focus(),[w]),z=s.useCallback((e,t,s)=>{const n=!A.current&&!s;(void 0!==b.value&&b.value===t||n)&&T(e)},[b.value]),B="popper"===a?Zu:Xu,W=B===Zu?{side:l,sideOffset:c,align:d,alignOffset:h,arrowPadding:m,collisionBoundary:p,collisionPadding:f,sticky:g,hideWhenDetached:x,avoidCollisions:v}:{};return u.jsx(Gu,{scope:n,content:w,viewport:N,onViewportChange:S,itemRefCallback:F,selectedItem:k,onItemLeave:q,itemTextRefCallback:z,focusSelectedItem:I,selectedItemText:E,position:a,isPositioned:P,searchRef:$,children:u.jsx(bd,{as:Yu,allowPinchZoom:!0,children:u.jsx(Sc,{asChild:!0,trapped:b.open,onMountAutoFocus:e=>{e.preventDefault()},onUnmountAutoFocus:Ae(r,e=>{var t;null==(t=b.trigger)||t.focus({preventScroll:!0}),e.preventDefault()}),children:u.jsx(et,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:e=>e.preventDefault(),onDismiss:()=>b.onOpenChange(!1),children:u.jsx(B,{role:"listbox",id:b.contentId,"data-state":b.open?"open":"closed",dir:b.dir,onContextMenu:e=>e.preventDefault(),...y,...W,onPlaced:()=>D(!0),ref:_,style:{display:"flex",flexDirection:"column",outline:"none",...y.style},onKeyDown:Ae(y.onKeyDown,e=>{const t=e.ctrlKey||e.altKey||e.metaKey;if("Tab"===e.key&&e.preventDefault(),t||1!==e.key.length||U(e.key),["ArrowUp","ArrowDown","Home","End"].includes(e.key)){let t=R().filter(e=>!e.disabled).map(e=>e.ref.current);if(["ArrowUp","End"].includes(e.key)&&(t=t.slice().reverse()),["ArrowUp","ArrowDown"].includes(e.key)){const s=e.target,n=t.indexOf(s);t=t.slice(n+1)}setTimeout(()=>O(t)),e.preventDefault()}})})})})})})});Qu.displayName="SelectContentImpl";var Xu=s.forwardRef((e,t)=>{const{__scopeSelect:n,onPlaced:a,...r}=e,i=Iu(Hu,n),o=Ju(Hu,n),[l,c]=s.useState(null),[d,h]=s.useState(null),m=Me(t,e=>h(e)),p=Tu(n),f=s.useRef(!1),g=s.useRef(!0),{viewport:x,selectedItem:v,selectedItemText:y,focusSelectedItem:b}=o,w=s.useCallback(()=>{if(i.trigger&&i.valueNode&&l&&d&&x&&v&&y){const e=i.trigger.getBoundingClientRect(),t=d.getBoundingClientRect(),s=i.valueNode.getBoundingClientRect(),n=y.getBoundingClientRect();if("rtl"!==i.dir){const a=n.left-t.left,r=s.left-a,i=e.left-r,o=e.width+i,c=Math.max(o,t.width),d=window.innerWidth-Vu,u=wu(r,[Vu,Math.max(Vu,d-c)]);l.style.minWidth=o+"px",l.style.left=u+"px"}else{const a=t.right-n.right,r=window.innerWidth-s.right-a,i=window.innerWidth-e.right-r,o=e.width+i,c=Math.max(o,t.width),d=window.innerWidth-Vu,u=wu(r,[Vu,Math.max(Vu,d-c)]);l.style.minWidth=o+"px",l.style.right=u+"px"}const r=p(),o=window.innerHeight-2*Vu,c=x.scrollHeight,u=window.getComputedStyle(d),h=parseInt(u.borderTopWidth,10),m=parseInt(u.paddingTop,10),g=parseInt(u.borderBottomWidth,10),b=h+m+c+parseInt(u.paddingBottom,10)+g,w=Math.min(5*v.offsetHeight,b),j=window.getComputedStyle(x),N=parseInt(j.paddingTop,10),S=parseInt(j.paddingBottom,10),_=e.top+e.height/2-Vu,k=o-_,C=v.offsetHeight/2,E=h+m+(v.offsetTop+C),T=b-E;if(E<=_){const e=r.length>0&&v===r[r.length-1].ref.current;l.style.bottom="0px";const t=d.clientHeight-x.offsetTop-x.offsetHeight,s=E+Math.max(k,C+(e?S:0)+t+g);l.style.height=s+"px"}else{const e=r.length>0&&v===r[0].ref.current;l.style.top="0px";const t=Math.max(_,h+x.offsetTop+(e?N:0)+C)+T;l.style.height=t+"px",x.scrollTop=E-_+x.offsetTop}l.style.margin=`${Vu}px 0`,l.style.minHeight=w+"px",l.style.maxHeight=o+"px",null==a||a(),requestAnimationFrame(()=>f.current=!0)}},[p,i.trigger,i.valueNode,l,d,x,v,y,i.dir,a]);it(()=>w(),[w]);const[j,N]=s.useState();it(()=>{d&&N(window.getComputedStyle(d).zIndex)},[d]);const S=s.useCallback(e=>{e&&!0===g.current&&(w(),null==b||b(),g.current=!1)},[w,b]);return u.jsx(eh,{scope:n,contentWrapper:l,shouldExpandOnScrollRef:f,onScrollButtonChange:S,children:u.jsx("div",{ref:c,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:j},children:u.jsx(Ke.div,{...r,ref:m,style:{boxSizing:"border-box",maxHeight:"100%",...r.style}})})})});Xu.displayName="SelectItemAlignedPosition";var Zu=s.forwardRef((e,t)=>{const{__scopeSelect:s,align:n="start",collisionPadding:a=Vu,...r}=e,i=Au(s);return u.jsx(Ja,{...i,...r,ref:t,align:n,collisionPadding:a,style:{boxSizing:"border-box",...r.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});Zu.displayName="SelectPopperPosition";var[eh,th]=Pu(Hu,{}),sh="SelectViewport",nh=s.forwardRef((e,t)=>{const{__scopeSelect:n,nonce:a,...r}=e,i=Ju(sh,n),o=th(sh,n),l=Me(t,i.onViewportChange),c=s.useRef(0);return u.jsxs(u.Fragment,{children:[u.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:a}),u.jsx(Eu.Slot,{scope:n,children:u.jsx(Ke.div,{"data-radix-select-viewport":"",role:"presentation",...r,ref:l,style:{position:"relative",flex:1,overflow:"hidden auto",...r.style},onScroll:Ae(r.onScroll,e=>{const t=e.currentTarget,{contentWrapper:s,shouldExpandOnScrollRef:n}=o;if((null==n?void 0:n.current)&&s){const e=Math.abs(c.current-t.scrollTop);if(e>0){const n=window.innerHeight-2*Vu,a=parseFloat(s.style.minHeight),r=parseFloat(s.style.height),i=Math.max(a,r);if(i<n){const a=i+e,r=Math.min(n,a),o=a-r;s.style.height=r+"px","0px"===s.style.bottom&&(t.scrollTop=o>0?o:0,s.style.justifyContent="flex-end")}}}c.current=t.scrollTop})})})]})});nh.displayName=sh;var ah="SelectGroup",[rh,ih]=Pu(ah);s.forwardRef((e,t)=>{const{__scopeSelect:s,...n}=e,a=Is();return u.jsx(rh,{scope:s,id:a,children:u.jsx(Ke.div,{role:"group","aria-labelledby":a,...n,ref:t})})}).displayName=ah;var oh="SelectLabel",lh=s.forwardRef((e,t)=>{const{__scopeSelect:s,...n}=e,a=ih(oh,s);return u.jsx(Ke.div,{id:a.id,...n,ref:t})});lh.displayName=oh;var ch="SelectItem",[dh,uh]=Pu(ch),hh=s.forwardRef((e,t)=>{const{__scopeSelect:n,value:a,disabled:r=!1,textValue:i,...o}=e,l=Iu(ch,n),c=Ju(ch,n),d=l.value===a,[h,m]=s.useState(i??""),[p,f]=s.useState(!1),g=Me(t,e=>{var t;return null==(t=c.itemRefCallback)?void 0:t.call(c,e,a,r)}),x=Is(),v=s.useRef("touch"),y=()=>{r||(l.onValueChange(a),l.onOpenChange(!1))};if(""===a)throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return u.jsx(dh,{scope:n,value:a,disabled:r,textId:x,isSelected:d,onItemTextChange:s.useCallback(e=>{m(t=>t||((null==e?void 0:e.textContent)??"").trim())},[]),children:u.jsx(Eu.ItemSlot,{scope:n,value:a,disabled:r,textValue:h,children:u.jsx(Ke.div,{role:"option","aria-labelledby":x,"data-highlighted":p?"":void 0,"aria-selected":d&&p,"data-state":d?"checked":"unchecked","aria-disabled":r||void 0,"data-disabled":r?"":void 0,tabIndex:r?void 0:-1,...o,ref:g,onFocus:Ae(o.onFocus,()=>f(!0)),onBlur:Ae(o.onBlur,()=>f(!1)),onClick:Ae(o.onClick,()=>{"mouse"!==v.current&&y()}),onPointerUp:Ae(o.onPointerUp,()=>{"mouse"===v.current&&y()}),onPointerDown:Ae(o.onPointerDown,e=>{v.current=e.pointerType}),onPointerMove:Ae(o.onPointerMove,e=>{var t;v.current=e.pointerType,r?null==(t=c.onItemLeave)||t.call(c):"mouse"===v.current&&e.currentTarget.focus({preventScroll:!0})}),onPointerLeave:Ae(o.onPointerLeave,e=>{var t;e.currentTarget===document.activeElement&&(null==(t=c.onItemLeave)||t.call(c))}),onKeyDown:Ae(o.onKeyDown,e=>{var t;""!==(null==(t=c.searchRef)?void 0:t.current)&&" "===e.key||(ku.includes(e.key)&&y()," "===e.key&&e.preventDefault())})})})})});hh.displayName=ch;var mh="SelectItemText",ph=s.forwardRef((e,t)=>{const{__scopeSelect:n,className:r,style:i,...o}=e,l=Iu(mh,n),c=Ju(mh,n),d=uh(mh,n),h=Lu(mh,n),[m,p]=s.useState(null),f=Me(t,e=>p(e),d.onItemTextChange,e=>{var t;return null==(t=c.itemTextRefCallback)?void 0:t.call(c,e,d.value,d.disabled)}),g=null==m?void 0:m.textContent,x=s.useMemo(()=>u.jsx("option",{value:d.value,disabled:d.disabled,children:g},d.value),[d.disabled,d.value,g]),{onNativeOptionAdd:v,onNativeOptionRemove:y}=h;return it(()=>(v(x),()=>y(x)),[v,y,x]),u.jsxs(u.Fragment,{children:[u.jsx(Ke.span,{id:d.textId,...o,ref:f}),d.isSelected&&l.valueNode&&!l.valueNodeHasChildren?a.createPortal(o.children,l.valueNode):null]})});ph.displayName=mh;var fh="SelectItemIndicator",gh=s.forwardRef((e,t)=>{const{__scopeSelect:s,...n}=e;return uh(fh,s).isSelected?u.jsx(Ke.span,{"aria-hidden":!0,...n,ref:t}):null});gh.displayName=fh;var xh="SelectScrollUpButton",vh=s.forwardRef((e,t)=>{const n=Ju(xh,e.__scopeSelect),a=th(xh,e.__scopeSelect),[r,i]=s.useState(!1),o=Me(t,a.onScrollButtonChange);return it(()=>{if(n.viewport&&n.isPositioned){let e=function(){const e=t.scrollTop>0;i(e)};const t=n.viewport;return e(),t.addEventListener("scroll",e),()=>t.removeEventListener("scroll",e)}},[n.viewport,n.isPositioned]),r?u.jsx(wh,{...e,ref:o,onAutoScroll:()=>{const{viewport:e,selectedItem:t}=n;e&&t&&(e.scrollTop=e.scrollTop-t.offsetHeight)}}):null});vh.displayName=xh;var yh="SelectScrollDownButton",bh=s.forwardRef((e,t)=>{const n=Ju(yh,e.__scopeSelect),a=th(yh,e.__scopeSelect),[r,i]=s.useState(!1),o=Me(t,a.onScrollButtonChange);return it(()=>{if(n.viewport&&n.isPositioned){let e=function(){const e=t.scrollHeight-t.clientHeight,s=Math.ceil(t.scrollTop)<e;i(s)};const t=n.viewport;return e(),t.addEventListener("scroll",e),()=>t.removeEventListener("scroll",e)}},[n.viewport,n.isPositioned]),r?u.jsx(wh,{...e,ref:o,onAutoScroll:()=>{const{viewport:e,selectedItem:t}=n;e&&t&&(e.scrollTop=e.scrollTop+t.offsetHeight)}}):null});bh.displayName=yh;var wh=s.forwardRef((e,t)=>{const{__scopeSelect:n,onAutoScroll:a,...r}=e,i=Ju("SelectScrollButton",n),o=s.useRef(null),l=Tu(n),c=s.useCallback(()=>{null!==o.current&&(window.clearInterval(o.current),o.current=null)},[]);return s.useEffect(()=>()=>c(),[c]),it(()=>{var e;const t=l().find(e=>e.ref.current===document.activeElement);null==(e=null==t?void 0:t.ref.current)||e.scrollIntoView({block:"nearest"})},[l]),u.jsx(Ke.div,{"aria-hidden":!0,...r,ref:t,style:{flexShrink:0,...r.style},onPointerDown:Ae(r.onPointerDown,()=>{null===o.current&&(o.current=window.setInterval(a,50))}),onPointerMove:Ae(r.onPointerMove,()=>{var e;null==(e=i.onItemLeave)||e.call(i),null===o.current&&(o.current=window.setInterval(a,50))}),onPointerLeave:Ae(r.onPointerLeave,()=>{c()})})}),jh=s.forwardRef((e,t)=>{const{__scopeSelect:s,...n}=e;return u.jsx(Ke.div,{"aria-hidden":!0,...n,ref:t})});jh.displayName="SelectSeparator";var Nh="SelectArrow";s.forwardRef((e,t)=>{const{__scopeSelect:s,...n}=e,a=Au(s),r=Iu(Nh,s),i=Ju(Nh,s);return r.open&&"popper"===i.position?u.jsx(Ya,{...a,...n,ref:t}):null}).displayName=Nh;var Sh=s.forwardRef(({__scopeSelect:e,value:t,...n},a)=>{const r=s.useRef(null),i=Me(a,r),o=Su(t);return s.useEffect(()=>{const e=r.current;if(!e)return;const s=window.HTMLSelectElement.prototype,n=Object.getOwnPropertyDescriptor(s,"value").set;if(o!==t&&n){const s=new Event("change",{bubbles:!0});n.call(e,t),e.dispatchEvent(s)}},[o,t]),u.jsx(Ke.select,{...n,style:{...ht,...n.style},ref:i,defaultValue:t})});function _h(e){return""===e||void 0===e}function kh(e){const t=Ge(e),n=s.useRef(""),a=s.useRef(0),r=s.useCallback(e=>{const s=n.current+e;t(s),function e(t){n.current=t,window.clearTimeout(a.current),""!==t&&(a.current=window.setTimeout(()=>e(""),1e3))}(s)},[t]),i=s.useCallback(()=>{n.current="",window.clearTimeout(a.current)},[]);return s.useEffect(()=>()=>window.clearTimeout(a.current),[]),[n,r,i]}function Ch(e,t,s){const n=t.length>1&&Array.from(t).every(e=>e===t[0])?t[0]:t,a=s?e.indexOf(s):-1;let r=(i=e,o=Math.max(a,0),i.map((e,t)=>i[(o+t)%i.length]));var i,o;1===n.length&&(r=r.filter(e=>e!==s));const l=r.find(e=>e.textValue.toLowerCase().startsWith(n.toLowerCase()));return l!==s?l:void 0}Sh.displayName="SelectBubbleInput";var Eh=Fu,Th=Bu,Rh=Wu,Ph=Ku,Dh=nh,Ah=lh,Oh=hh,Ih=ph,Mh=gh,Lh=vh,$h=bh,Uh=jh;const Fh=$u,qh=zu,zh=s.forwardRef(({className:e,children:t,...s},n)=>u.jsxs(Eh,{ref:n,className:hs("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...s,children:[t,u.jsx(Th,{asChild:!0,children:u.jsx(b,{className:"h-4 w-4 opacity-50"})})]}));zh.displayName=Eh.displayName;const Bh=s.forwardRef(({className:e,...t},s)=>u.jsx(Lh,{ref:s,className:hs("flex cursor-default items-center justify-center py-1",e),...t,children:u.jsx(w,{className:"h-4 w-4"})}));Bh.displayName=Lh.displayName;const Wh=s.forwardRef(({className:e,...t},s)=>u.jsx($h,{ref:s,className:hs("flex cursor-default items-center justify-center py-1",e),...t,children:u.jsx(b,{className:"h-4 w-4"})}));Wh.displayName=$h.displayName;const Hh=s.forwardRef(({className:e,children:t,position:s="popper",...n},a)=>u.jsx(Rh,{children:u.jsxs(Ph,{ref:a,className:hs("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===s&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:s,...n,children:[u.jsx(Bh,{}),u.jsx(Dh,{className:hs("p-1","popper"===s&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),u.jsx(Wh,{})]})}));Hh.displayName=Ph.displayName;s.forwardRef(({className:e,...t},s)=>u.jsx(Ah,{ref:s,className:hs("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...t})).displayName=Ah.displayName;const Kh=s.forwardRef(({className:e,children:t,...s},n)=>u.jsxs(Oh,{ref:n,className:hs("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...s,children:[u.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:u.jsx(Mh,{children:u.jsx(j,{className:"h-4 w-4"})})}),u.jsx(Ih,{children:t})]}));Kh.displayName=Oh.displayName;s.forwardRef(({className:e,...t},s)=>u.jsx(Uh,{ref:s,className:hs("-mx-1 my-1 h-px bg-muted",e),...t})).displayName=Uh.displayName;var Vh="rovingFocusGroup.onEntryFocus",Gh={bubbles:!1,cancelable:!0},Jh="RovingFocusGroup",[Yh,Qh,Xh]=He(Jh),[Zh,em]=Le(Jh,[Xh]),[tm,sm]=Zh(Jh),nm=s.forwardRef((e,t)=>u.jsx(Yh.Provider,{scope:e.__scopeRovingFocusGroup,children:u.jsx(Yh.Slot,{scope:e.__scopeRovingFocusGroup,children:u.jsx(am,{...e,ref:t})})}));nm.displayName=Jh;var am=s.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,orientation:a,loop:r=!1,dir:i,currentTabStopId:o,defaultCurrentTabStopId:l,onCurrentTabStopIdChange:c,onEntryFocus:d,preventScrollOnEntryFocus:h=!1,...m}=e,p=s.useRef(null),f=Me(t,p),g=Nu(i),[x,v]=ut({prop:o,defaultProp:l??null,onChange:c,caller:Jh}),[y,b]=s.useState(!1),w=Ge(d),j=Qh(n),N=s.useRef(!1),[S,_]=s.useState(0);return s.useEffect(()=>{const e=p.current;if(e)return e.addEventListener(Vh,w),()=>e.removeEventListener(Vh,w)},[w]),u.jsx(tm,{scope:n,orientation:a,dir:g,loop:r,currentTabStopId:x,onItemFocus:s.useCallback(e=>v(e),[v]),onItemShiftTab:s.useCallback(()=>b(!0),[]),onFocusableItemAdd:s.useCallback(()=>_(e=>e+1),[]),onFocusableItemRemove:s.useCallback(()=>_(e=>e-1),[]),children:u.jsx(Ke.div,{tabIndex:y||0===S?-1:0,"data-orientation":a,...m,ref:f,style:{outline:"none",...e.style},onMouseDown:Ae(e.onMouseDown,()=>{N.current=!0}),onFocus:Ae(e.onFocus,e=>{const t=!N.current;if(e.target===e.currentTarget&&t&&!y){const t=new CustomEvent(Vh,Gh);if(e.currentTarget.dispatchEvent(t),!t.defaultPrevented){const e=j().filter(e=>e.focusable);lm([e.find(e=>e.active),e.find(e=>e.id===x),...e].filter(Boolean).map(e=>e.ref.current),h)}}N.current=!1}),onBlur:Ae(e.onBlur,()=>b(!1))})})}),rm="RovingFocusGroupItem",im=s.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,focusable:a=!0,active:r=!1,tabStopId:i,children:o,...l}=e,c=Is(),d=i||c,h=sm(rm,n),m=h.currentTabStopId===d,p=Qh(n),{onFocusableItemAdd:f,onFocusableItemRemove:g,currentTabStopId:x}=h;return s.useEffect(()=>{if(a)return f(),()=>g()},[a,f,g]),u.jsx(Yh.ItemSlot,{scope:n,id:d,focusable:a,active:r,children:u.jsx(Ke.span,{tabIndex:m?0:-1,"data-orientation":h.orientation,...l,ref:t,onMouseDown:Ae(e.onMouseDown,e=>{a?h.onItemFocus(d):e.preventDefault()}),onFocus:Ae(e.onFocus,()=>h.onItemFocus(d)),onKeyDown:Ae(e.onKeyDown,e=>{if("Tab"===e.key&&e.shiftKey)return void h.onItemShiftTab();if(e.target!==e.currentTarget)return;const t=function(e,t,s){const n=function(e,t){return"rtl"!==t?e:"ArrowLeft"===e?"ArrowRight":"ArrowRight"===e?"ArrowLeft":e}(e.key,s);return"vertical"===t&&["ArrowLeft","ArrowRight"].includes(n)||"horizontal"===t&&["ArrowUp","ArrowDown"].includes(n)?void 0:om[n]}(e,h.orientation,h.dir);if(void 0!==t){if(e.metaKey||e.ctrlKey||e.altKey||e.shiftKey)return;e.preventDefault();let a=p().filter(e=>e.focusable).map(e=>e.ref.current);if("last"===t)a.reverse();else if("prev"===t||"next"===t){"prev"===t&&a.reverse();const r=a.indexOf(e.currentTarget);a=h.loop?(n=r+1,(s=a).map((e,t)=>s[(n+t)%s.length])):a.slice(r+1)}setTimeout(()=>lm(a))}var s,n}),children:"function"==typeof o?o({isCurrentTabStop:m,hasTabStop:null!=x}):o})})});im.displayName=rm;var om={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function lm(e,t=!1){const s=document.activeElement;for(const n of e){if(n===s)return;if(n.focus({preventScroll:t}),document.activeElement!==s)return}}var cm=nm,dm=im,um="Tabs",[hm,mm]=Le(um,[em]),pm=em(),[fm,gm]=hm(um),xm=s.forwardRef((e,t)=>{const{__scopeTabs:s,value:n,onValueChange:a,defaultValue:r,orientation:i="horizontal",dir:o,activationMode:l="automatic",...c}=e,d=Nu(o),[h,m]=ut({prop:n,onChange:a,defaultProp:r??"",caller:um});return u.jsx(fm,{scope:s,baseId:Is(),value:h,onValueChange:m,orientation:i,dir:d,activationMode:l,children:u.jsx(Ke.div,{dir:d,"data-orientation":i,...c,ref:t})})});xm.displayName=um;var vm="TabsList",ym=s.forwardRef((e,t)=>{const{__scopeTabs:s,loop:n=!0,...a}=e,r=gm(vm,s),i=pm(s);return u.jsx(cm,{asChild:!0,...i,orientation:r.orientation,dir:r.dir,loop:n,children:u.jsx(Ke.div,{role:"tablist","aria-orientation":r.orientation,...a,ref:t})})});ym.displayName=vm;var bm="TabsTrigger",wm=s.forwardRef((e,t)=>{const{__scopeTabs:s,value:n,disabled:a=!1,...r}=e,i=gm(bm,s),o=pm(s),l=Sm(i.baseId,n),c=_m(i.baseId,n),d=n===i.value;return u.jsx(dm,{asChild:!0,...o,focusable:!a,active:d,children:u.jsx(Ke.button,{type:"button",role:"tab","aria-selected":d,"aria-controls":c,"data-state":d?"active":"inactive","data-disabled":a?"":void 0,disabled:a,id:l,...r,ref:t,onMouseDown:Ae(e.onMouseDown,e=>{a||0!==e.button||!1!==e.ctrlKey?e.preventDefault():i.onValueChange(n)}),onKeyDown:Ae(e.onKeyDown,e=>{[" ","Enter"].includes(e.key)&&i.onValueChange(n)}),onFocus:Ae(e.onFocus,()=>{const e="manual"!==i.activationMode;d||a||!e||i.onValueChange(n)})})})});wm.displayName=bm;var jm="TabsContent",Nm=s.forwardRef((e,t)=>{const{__scopeTabs:n,value:a,forceMount:r,children:i,...o}=e,l=gm(jm,n),c=Sm(l.baseId,a),d=_m(l.baseId,a),h=a===l.value,m=s.useRef(h);return s.useEffect(()=>{const e=requestAnimationFrame(()=>m.current=!1);return()=>cancelAnimationFrame(e)},[]),u.jsx(lt,{present:r||h,children:({present:s})=>u.jsx(Ke.div,{"data-state":h?"active":"inactive","data-orientation":l.orientation,role:"tabpanel","aria-labelledby":c,hidden:!s,id:d,tabIndex:0,...o,ref:t,style:{...e.style,animationDuration:m.current?"0s":void 0},children:s&&i})})});function Sm(e,t){return`${e}-trigger-${t}`}function _m(e,t){return`${e}-content-${t}`}Nm.displayName=jm;var km=ym,Cm=wm,Em=Nm;const Tm=xm,Rm=s.forwardRef(({className:e,...t},s)=>u.jsx(km,{ref:s,className:hs("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",e),...t}));Rm.displayName=km.displayName;const Pm=s.forwardRef(({className:e,...t},s)=>u.jsx(Cm,{ref:s,className:hs("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",e),...t}));Pm.displayName=Cm.displayName;const Dm=s.forwardRef(({className:e,...t},s)=>u.jsx(Em,{ref:s,className:hs("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...t}));Dm.displayName=Em.displayName;const Am=Object.freeze(Object.defineProperty({__proto__:null,default:()=>{const[e,t]=s.useState(null),[n,a]=s.useState(null),[r,i]=s.useState(!0),[o,l]=s.useState({totalClaims:0,totalQuotes:0,totalConsultations:0,totalOutsourcingRequests:0,totalPayments:0,totalDiasporaRequests:0,totalUsers:0,pendingClaims:0,activePolicies:0,monthlyRevenue:0,conversionRate:0,totalSubmissions:0,allSubmissions:{claims:[],outsourcing:[],consultations:[],payments:[],diaspora:[]}}),[c,h]=s.useState([]),m=d(),{toast:p}=De();s.useEffect(()=>{f()},[]);const f=async()=>{try{if(!localStorage.getItem("auth_token"))return void m("/auth");const e=await uc.getProfile();if(!e.success||!e.data||!["ADMIN","SUPER_ADMIN"].includes(e.data.role))return p({title:"Access Denied",description:"You don't have permission to access this page.",variant:"destructive"}),void m("/");a({id:e.data.id,full_name:e.data.name,role:e.data.role,email:e.data.email}),t(e),await g()}catch(e){p({title:"Authentication Error",description:"Please log in to access the admin dashboard.",variant:"destructive"}),m("/auth")}finally{i(!1)}},g=async()=>{try{const[e,t]=await Promise.all([vc.getStats(),vc.getActivities()]);e.success&&e.data?(l(e.data),e.data.isRealTime?p({title:"Dashboard Updated",description:"Real-time data from database loaded successfully."}):e.data.isMockData&&p({title:"Demo Data Mode",description:e.message||"Using demo data due to database connectivity.",variant:"default"})):l(e.data||{}),t.success&&t.data?h(t.data):h([])}catch(e){p({title:"Error",description:"Failed to load dashboard data. Using offline mode.",variant:"destructive"}),l({totalClaims:0,totalQuotes:0,totalConsultations:0,totalOutsourcingRequests:0,totalPayments:0,totalDiasporaRequests:0,totalUsers:0,pendingClaims:0,activePolicies:0,monthlyRevenue:0,conversionRate:0,totalSubmissions:0,allSubmissions:{claims:[],outsourcing:[],consultations:[],payments:[],diaspora:[]}}),h([])}},x=e=>new Date(e).toLocaleDateString(),v=e=>{switch(null==e?void 0:e.toLowerCase()){case"pending":return"bg-yellow-100 text-yellow-800";case"approved":case"completed":return"bg-green-100 text-green-800";case"rejected":case"cancelled":return"bg-red-100 text-red-800";case"in_progress":case"processing":return"bg-blue-100 text-blue-800";default:return"bg-gray-100 text-gray-800"}};if(r)return u.jsxs("div",{className:"min-h-screen bg-background",children:[u.jsx(Kl,{}),u.jsx("div",{className:"flex items-center justify-center h-96",children:u.jsxs("div",{className:"text-center",children:[u.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto"}),u.jsx("p",{className:"mt-4 text-muted-foreground",children:"Loading dashboard..."})]})}),u.jsx(Vl,{})]});const y=({title:e,value:t,icon:s,trend:n})=>u.jsx(Gl,{children:u.jsx(Xl,{className:"p-6",children:u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{children:[u.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:e}),u.jsx("p",{className:"text-2xl font-bold",children:t}),n&&u.jsx("p",{className:"text-xs text-muted-foreground",children:n})]}),u.jsx("div",{className:"text-muted-foreground",children:s})]})})}),b=({title:e,value:t,icon:s,change:n,color:a="primary"})=>u.jsx(Gl,{children:u.jsx(Xl,{className:"p-6",children:u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{children:[u.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:e}),u.jsx("p",{className:"text-2xl font-bold",children:t}),n&&u.jsxs("p",{className:"text-xs "+(n>=0?"text-green-600":"text-red-600"),children:[n>=0?"+":"",n,"% from last month"]})]}),u.jsx(s,{className:`h-8 w-8 text-${a}`})]})})}),w=({title:e,description:t,icon:s,onClick:n})=>u.jsx(Gl,{className:"cursor-pointer hover:shadow-md transition-shadow",onClick:n,children:u.jsx(Xl,{className:"p-6",children:u.jsxs("div",{className:"flex items-center space-x-4",children:[u.jsx(s,{className:"h-8 w-8 text-primary"}),u.jsxs("div",{className:"flex-1",children:[u.jsx("h3",{className:"font-semibold",children:e}),u.jsx("p",{className:"text-sm text-muted-foreground",children:t})]}),u.jsx(I,{className:"h-5 w-5 text-muted-foreground"})]})})});return u.jsxs("div",{className:"min-h-screen bg-background",children:[u.jsx(Kl,{}),u.jsx("div",{className:"bg-primary text-primary-foreground py-4",children:u.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:u.jsxs("div",{className:"flex justify-between items-center",children:[u.jsxs("div",{children:[u.jsx("h1",{className:"text-2xl font-bold",children:"Admin Dashboard"}),u.jsxs("p",{className:"text-sm opacity-90",children:["Welcome back, ",null==n?void 0:n.full_name]})]}),u.jsxs("div",{className:"flex items-center space-x-4",children:[u.jsxs(Hl,{variant:"outline",size:"sm",onClick:async()=>{try{if(!localStorage.getItem("auth_token"))throw new Error("No authentication token found");if(!(await vc.exportPDF()).success)throw new Error("Failed to generate PDF report");const e=`Dashboard Report - ${(new Date).toISOString().split("T")[0]}\n\nThis is a sample PDF export.\nIn a full implementation, this would contain:\n- User statistics\n- Claims data\n- Revenue reports\n- Activity summaries\n\nGenerated on: ${(new Date).toLocaleString()}\n`,t=new Blob([e],{type:"text/plain"}),s=window.URL.createObjectURL(t),n=document.createElement("a");n.href=s,n.download=`dashboard-report-${(new Date).toISOString().split("T")[0]}.txt`,document.body.appendChild(n),n.click(),window.URL.revokeObjectURL(s),document.body.removeChild(n),p({title:"Success",description:"Report downloaded successfully!"})}catch(e){p({title:"Error",description:"Failed to export PDF report. Please try again.",variant:"destructive"})}},className:"flex items-center gap-2",children:[u.jsx(N,{className:"h-4 w-4"}),"Export PDF Report"]}),u.jsx(bu,{variant:"secondary",children:null==n?void 0:n.role}),u.jsxs(Hl,{variant:"secondary",size:"sm",onClick:()=>{uc.logout(),localStorage.removeItem("auth_token"),m("/")},children:[u.jsx(S,{className:"h-4 w-4 mr-2"}),"Sign Out"]})]})]})})}),u.jsxs("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[u.jsx(y,{title:"Total Claims",value:o.totalClaims,icon:u.jsx(N,{className:"h-6 w-6"}),trend:"+12%"}),u.jsx(y,{title:"Total Quotes",value:o.totalQuotes,icon:u.jsx(_,{className:"h-6 w-6"}),trend:"+8%"}),u.jsx(y,{title:"Consultations",value:o.totalConsultations,icon:u.jsx(k,{className:"h-6 w-6"}),trend:"+15%"}),u.jsx(y,{title:"Pending Claims",value:o.pendingClaims,icon:u.jsx(C,{className:"h-6 w-6"}),trend:"-5%"})]}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-8",children:[u.jsx(y,{title:"Outsourcing Requests",value:o.totalOutsourcingRequests,icon:u.jsx(N,{className:"h-6 w-6"})}),u.jsx(y,{title:"Payments",value:o.totalPayments,icon:u.jsx(_,{className:"h-6 w-6"})}),u.jsx(y,{title:"Diaspora Requests",value:o.totalDiasporaRequests,icon:u.jsx(k,{className:"h-6 w-6"})})]}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8",children:[u.jsx(b,{title:"Monthly Revenue",value:`KES ${o.monthlyRevenue.toLocaleString()}`,icon:_,change:15,color:"green-600"}),u.jsx(b,{title:"Conversion Rate",value:`${o.conversionRate}%`,icon:E,change:2,color:"purple-600"})]}),u.jsxs("div",{className:"mb-8",children:[u.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Quick Actions"}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[u.jsx(w,{title:"Manage Leads",description:"View and update lead status",icon:k,onClick:()=>{}}),u.jsx(w,{title:"Policy Overview",description:"Track active policies and renewals",icon:T,onClick:()=>{}}),u.jsx(w,{title:"Claims Review",description:"Process pending claims",icon:N,onClick:()=>{}}),u.jsx(w,{title:"Payment Tracking",description:"Monitor payments and transactions",icon:_,onClick:()=>{}}),u.jsx(w,{title:"Client Communications",description:"Send notifications and updates",icon:R,onClick:()=>{}}),u.jsx(w,{title:"Resource Library",description:"Manage documents and materials",icon:N,onClick:()=>{}})]})]}),u.jsxs(Tm,{defaultValue:"claims",className:"w-full",children:[u.jsxs(Rm,{className:"grid w-full grid-cols-5",children:[u.jsx(Pm,{value:"claims",children:"Claims"}),u.jsx(Pm,{value:"outsourcing",children:"Outsourcing"}),u.jsx(Pm,{value:"consultations",children:"Consultations"}),u.jsx(Pm,{value:"payments",children:"Payments"}),u.jsx(Pm,{value:"diaspora",children:"Diaspora"})]}),u.jsx(Dm,{value:"claims",className:"mt-6",children:u.jsxs(Gl,{children:[u.jsx(Jl,{children:u.jsxs(Yl,{className:"flex items-center gap-2",children:[u.jsx(N,{className:"h-5 w-5"}),"All Claims (",o.allSubmissions.claims.length,")"]})}),u.jsx(Xl,{children:o.allSubmissions.claims.length>0?u.jsx("div",{className:"overflow-x-auto",children:u.jsxs("table",{className:"w-full text-sm",children:[u.jsx("thead",{children:u.jsxs("tr",{className:"border-b",children:[u.jsx("th",{className:"text-left p-2",children:"ID"}),u.jsx("th",{className:"text-left p-2",children:"Policy Number"}),u.jsx("th",{className:"text-left p-2",children:"Client Email"}),u.jsx("th",{className:"text-left p-2",children:"Incident Type"}),u.jsx("th",{className:"text-left p-2",children:"Amount"}),u.jsx("th",{className:"text-left p-2",children:"Status"}),u.jsx("th",{className:"text-left p-2",children:"Date"})]})}),u.jsx("tbody",{children:o.allSubmissions.claims.map(e=>{var t;return u.jsxs("tr",{className:"border-b hover:bg-gray-50",children:[u.jsx("td",{className:"p-2",children:e.id}),u.jsx("td",{className:"p-2",children:e.policyNumber}),u.jsx("td",{className:"p-2",children:e.clientEmail}),u.jsx("td",{className:"p-2",children:e.incidentType}),u.jsxs("td",{className:"p-2",children:["KSh ",null==(t=e.claimAmount)?void 0:t.toLocaleString()]}),u.jsx("td",{className:"p-2",children:u.jsx("span",{className:`px-2 py-1 rounded text-xs ${v(e.status)}`,children:e.status})}),u.jsx("td",{className:"p-2",children:x(e.createdAt)})]},e.id)})})]})}):u.jsx("p",{className:"text-gray-500 text-center py-8",children:"No claims submitted yet."})})]})}),u.jsx(Dm,{value:"outsourcing",className:"mt-6",children:u.jsxs(Gl,{children:[u.jsx(Jl,{children:u.jsxs(Yl,{className:"flex items-center gap-2",children:[u.jsx(P,{className:"h-5 w-5"}),"All Outsourcing Requests (",o.allSubmissions.outsourcing.length,")"]})}),u.jsx(Xl,{children:o.allSubmissions.outsourcing.length>0?u.jsx("div",{className:"overflow-x-auto",children:u.jsxs("table",{className:"w-full text-sm",children:[u.jsx("thead",{children:u.jsxs("tr",{className:"border-b",children:[u.jsx("th",{className:"text-left p-2",children:"ID"}),u.jsx("th",{className:"text-left p-2",children:"Company"}),u.jsx("th",{className:"text-left p-2",children:"Contact Email"}),u.jsx("th",{className:"text-left p-2",children:"Service Type"}),u.jsx("th",{className:"text-left p-2",children:"Budget Range"}),u.jsx("th",{className:"text-left p-2",children:"Status"}),u.jsx("th",{className:"text-left p-2",children:"Date"})]})}),u.jsx("tbody",{children:o.allSubmissions.outsourcing.map(e=>u.jsxs("tr",{className:"border-b hover:bg-gray-50",children:[u.jsx("td",{className:"p-2",children:e.id}),u.jsx("td",{className:"p-2",children:e.companyName}),u.jsx("td",{className:"p-2",children:e.contactEmail}),u.jsx("td",{className:"p-2",children:e.serviceType}),u.jsx("td",{className:"p-2",children:e.budgetRange}),u.jsx("td",{className:"p-2",children:u.jsx("span",{className:`px-2 py-1 rounded text-xs ${v(e.status)}`,children:e.status})}),u.jsx("td",{className:"p-2",children:x(e.createdAt)})]},e.id))})]})}):u.jsx("p",{className:"text-gray-500 text-center py-8",children:"No outsourcing requests submitted yet."})})]})}),u.jsx(Dm,{value:"consultations",className:"mt-6",children:u.jsxs(Gl,{children:[u.jsx(Jl,{children:u.jsxs(Yl,{className:"flex items-center gap-2",children:[u.jsx(D,{className:"h-5 w-5"}),"All Consultations (",o.allSubmissions.consultations.length,")"]})}),u.jsx(Xl,{children:o.allSubmissions.consultations.length>0?u.jsx("div",{className:"overflow-x-auto",children:u.jsxs("table",{className:"w-full text-sm",children:[u.jsx("thead",{children:u.jsxs("tr",{className:"border-b",children:[u.jsx("th",{className:"text-left p-2",children:"ID"}),u.jsx("th",{className:"text-left p-2",children:"Name"}),u.jsx("th",{className:"text-left p-2",children:"Email"}),u.jsx("th",{className:"text-left p-2",children:"Service"}),u.jsx("th",{className:"text-left p-2",children:"Preferred Date"}),u.jsx("th",{className:"text-left p-2",children:"Status"}),u.jsx("th",{className:"text-left p-2",children:"Submitted"})]})}),u.jsx("tbody",{children:o.allSubmissions.consultations.map(e=>u.jsxs("tr",{className:"border-b hover:bg-gray-50",children:[u.jsx("td",{className:"p-2",children:e.id}),u.jsx("td",{className:"p-2",children:e.fullName}),u.jsx("td",{className:"p-2",children:e.email}),u.jsx("td",{className:"p-2",children:e.serviceType}),u.jsx("td",{className:"p-2",children:e.preferredDate?x(e.preferredDate):"N/A"}),u.jsx("td",{className:"p-2",children:u.jsx("span",{className:`px-2 py-1 rounded text-xs ${v(e.status)}`,children:e.status})}),u.jsx("td",{className:"p-2",children:x(e.createdAt)})]},e.id))})]})}):u.jsx("p",{className:"text-gray-500 text-center py-8",children:"No consultations scheduled yet."})})]})}),u.jsx(Dm,{value:"payments",className:"mt-6",children:u.jsxs(Gl,{children:[u.jsx(Jl,{children:u.jsxs(Yl,{className:"flex items-center gap-2",children:[u.jsx(A,{className:"h-5 w-5"}),"All Payments (",o.allSubmissions.payments.length,")"]})}),u.jsx(Xl,{children:o.allSubmissions.payments.length>0?u.jsx("div",{className:"overflow-x-auto",children:u.jsxs("table",{className:"w-full text-sm",children:[u.jsx("thead",{children:u.jsxs("tr",{className:"border-b",children:[u.jsx("th",{className:"text-left p-2",children:"ID"}),u.jsx("th",{className:"text-left p-2",children:"Policy Number"}),u.jsx("th",{className:"text-left p-2",children:"Client Email"}),u.jsx("th",{className:"text-left p-2",children:"Amount"}),u.jsx("th",{className:"text-left p-2",children:"Payment Method"}),u.jsx("th",{className:"text-left p-2",children:"Status"}),u.jsx("th",{className:"text-left p-2",children:"Date"})]})}),u.jsx("tbody",{children:o.allSubmissions.payments.map(e=>{var t;return u.jsxs("tr",{className:"border-b hover:bg-gray-50",children:[u.jsx("td",{className:"p-2",children:e.id}),u.jsx("td",{className:"p-2",children:e.policyNumber}),u.jsx("td",{className:"p-2",children:e.clientEmail}),u.jsxs("td",{className:"p-2",children:["KSh ",null==(t=e.amount)?void 0:t.toLocaleString()]}),u.jsx("td",{className:"p-2",children:e.paymentMethod}),u.jsx("td",{className:"p-2",children:u.jsx("span",{className:`px-2 py-1 rounded text-xs ${v(e.status)}`,children:e.status})}),u.jsx("td",{className:"p-2",children:x(e.createdAt)})]},e.id)})})]})}):u.jsx("p",{className:"text-gray-500 text-center py-8",children:"No payments recorded yet."})})]})}),u.jsx(Dm,{value:"diaspora",className:"mt-6",children:u.jsxs(Gl,{children:[u.jsx(Jl,{children:u.jsxs(Yl,{className:"flex items-center gap-2",children:[u.jsx(O,{className:"h-5 w-5"}),"All Diaspora Requests (",o.allSubmissions.diaspora.length,")"]})}),u.jsx(Xl,{children:o.allSubmissions.diaspora.length>0?u.jsx("div",{className:"overflow-x-auto",children:u.jsxs("table",{className:"w-full text-sm",children:[u.jsx("thead",{children:u.jsxs("tr",{className:"border-b",children:[u.jsx("th",{className:"text-left p-2",children:"ID"}),u.jsx("th",{className:"text-left p-2",children:"Name"}),u.jsx("th",{className:"text-left p-2",children:"Email"}),u.jsx("th",{className:"text-left p-2",children:"Country"}),u.jsx("th",{className:"text-left p-2",children:"Service Type"}),u.jsx("th",{className:"text-left p-2",children:"Status"}),u.jsx("th",{className:"text-left p-2",children:"Date"})]})}),u.jsx("tbody",{children:o.allSubmissions.diaspora.map(e=>u.jsxs("tr",{className:"border-b hover:bg-gray-50",children:[u.jsx("td",{className:"p-2",children:e.id}),u.jsx("td",{className:"p-2",children:e.fullName}),u.jsx("td",{className:"p-2",children:e.email}),u.jsx("td",{className:"p-2",children:e.currentCountry}),u.jsx("td",{className:"p-2",children:e.serviceType}),u.jsx("td",{className:"p-2",children:u.jsx("span",{className:`px-2 py-1 rounded text-xs ${v(e.status)}`,children:e.status})}),u.jsx("td",{className:"p-2",children:x(e.createdAt)})]},e.id))})]})}):u.jsx("p",{className:"text-gray-500 text-center py-8",children:"No diaspora requests submitted yet."})})]})})]})]}),u.jsx(Vl,{})]})}},Symbol.toStringTag,{value:"Module"}));function Om(){const[e,t]=s.useState([]),[n,a]=s.useState(!0),[r,i]=s.useState(null),[o,l]=s.useState(!1),[c,d]=s.useState(!1),[h,m]=s.useState(""),[p,f]=s.useState(""),[g,b]=s.useState(1),[w,j]=s.useState(1),[S,_]=s.useState({total:0,pending:0,approved:0,rejected:0,draft:0}),{toast:k}=De();s.useEffect(()=>{C();const e=setInterval(()=>{C()},1e4);return()=>clearInterval(e)},[g,p,h]);const C=async()=>{var e;try{a(!0);const s="all"===p?void 0:p,n=await yc.getAllQuotes(g,20,s,h||void 0);if(n.success){const s=n.data.quotes||[];t(s),j((null==(e=n.data.pagination)?void 0:e.totalPages)||1);const a={total:s.length,pending:s.filter(e=>"pending"===e.status).length,approved:s.filter(e=>"approved"===e.status).length,rejected:s.filter(e=>"rejected"===e.status).length,draft:s.filter(e=>"draft"===e.status).length};_(a)}else t([]),k({title:"Error",description:"Failed to fetch quotes data.",variant:"destructive"})}catch(s){t([]),k({title:"Error",description:"Failed to fetch quotes data.",variant:"destructive"})}finally{a(!1)}},E=async(e,t)=>{try{const s=await yc.updateQuoteStatus(e,t);s.success?(await C(),d(!1),r&&r.id===e&&i({...r,status:t}),k({title:"Status Updated",description:`Quote status updated to ${t}`})):k({title:"Update Failed",description:s.error||"Failed to update quote status",variant:"destructive"})}catch(s){k({title:"Update Failed",description:s.message||"Failed to update quote status",variant:"destructive"})}},T=async e=>{if(window.confirm("Are you sure you want to delete this quote? This action cannot be undone."))try{await yc.deleteQuote(e),await C(),l(!1),k({title:"Quote Deleted",description:"Quote has been successfully deleted."})}catch(t){k({title:"Delete Failed",description:"Failed to delete quote.",variant:"destructive"})}},P=async e=>{try{const t=await yc.exportData("quotes",e),s=new Blob([t.data],{type:"csv"===e?"text/csv":"application/json"}),n=window.URL.createObjectURL(s),a=document.createElement("a");a.href=n,a.download=`quotes-export.${e}`,document.body.appendChild(a),a.click(),window.URL.revokeObjectURL(n),document.body.removeChild(a),k({title:"Export Complete",description:`Quotes exported as ${e.toUpperCase()}`})}catch(t){k({title:"Export Failed",description:"Failed to export quotes data.",variant:"destructive"})}},A=e=>{switch(e.toLowerCase()){case"pending":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"approved":return"bg-green-100 text-green-800 border-green-200";case"rejected":return"bg-red-100 text-red-800 border-red-200";case"draft":return"bg-gray-100 text-gray-800 border-gray-200";default:return"bg-blue-100 text-blue-800 border-blue-200"}},O=e=>new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"2-digit"});return u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"flex justify-between items-center",children:[u.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Quote Management"}),u.jsxs("div",{className:"flex gap-2",children:[u.jsxs(Hl,{onClick:()=>P("csv"),variant:"outline",children:[u.jsx(M,{className:"h-4 w-4 mr-2"}),"Export CSV"]}),u.jsxs(Hl,{onClick:()=>P("json"),variant:"outline",children:[u.jsx(M,{className:"h-4 w-4 mr-2"}),"Export JSON"]}),u.jsxs(Hl,{onClick:C,variant:"outline",children:[u.jsx(L,{className:"h-4 w-4 mr-2"}),"Refresh"]})]})]}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[u.jsxs(Gl,{children:[u.jsxs(Jl,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[u.jsx(Yl,{className:"text-sm font-medium",children:"Total Quotes"}),u.jsx(N,{className:"h-4 w-4 text-muted-foreground"})]}),u.jsx(Xl,{children:u.jsx("div",{className:"text-2xl font-bold",children:S.total})})]}),u.jsxs(Gl,{children:[u.jsxs(Jl,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[u.jsx(Yl,{className:"text-sm font-medium",children:"Pending"}),u.jsx($,{className:"h-4 w-4 text-muted-foreground"})]}),u.jsx(Xl,{children:u.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:S.pending})})]}),u.jsxs(Gl,{children:[u.jsxs(Jl,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[u.jsx(Yl,{className:"text-sm font-medium",children:"Approved"}),u.jsx(D,{className:"h-4 w-4 text-muted-foreground"})]}),u.jsx(Xl,{children:u.jsx("div",{className:"text-2xl font-bold text-green-600",children:S.approved})})]}),u.jsxs(Gl,{children:[u.jsxs(Jl,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[u.jsx(Yl,{className:"text-sm font-medium",children:"Rejected"}),u.jsx(N,{className:"h-4 w-4 text-muted-foreground"})]}),u.jsx(Xl,{children:u.jsx("div",{className:"text-2xl font-bold text-red-600",children:S.rejected})})]}),u.jsxs(Gl,{children:[u.jsxs(Jl,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[u.jsx(Yl,{className:"text-sm font-medium",children:"Drafts"}),u.jsx(U,{className:"h-4 w-4 text-muted-foreground"})]}),u.jsx(Xl,{children:u.jsx("div",{className:"text-2xl font-bold text-gray-600",children:S.draft})})]})]}),u.jsxs(Gl,{children:[u.jsx(Jl,{children:u.jsxs(Yl,{className:"flex items-center gap-2",children:[u.jsx(F,{className:"h-5 w-5"}),"Filters"]})}),u.jsx(Xl,{children:u.jsxs("div",{className:"flex flex-wrap gap-4",children:[u.jsxs("div",{className:"flex-1 min-w-64",children:[u.jsx(ac,{htmlFor:"search",children:"Search Quotes"}),u.jsxs("div",{className:"relative",children:[u.jsx(q,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),u.jsx(Zl,{id:"search",type:"text",placeholder:"Search by name, email, or product...",value:h,onChange:e=>m(e.target.value),className:"pl-10"})]})]}),u.jsxs("div",{children:[u.jsx(ac,{htmlFor:"status-filter",children:"Status"}),u.jsxs(Fh,{value:p,onValueChange:f,children:[u.jsx(zh,{className:"w-40",children:u.jsx(qh,{placeholder:"All Status"})}),u.jsxs(Hh,{children:[u.jsx(Kh,{value:"all",children:"All Status"}),u.jsx(Kh,{value:"pending",children:"Pending"}),u.jsx(Kh,{value:"approved",children:"Approved"}),u.jsx(Kh,{value:"rejected",children:"Rejected"}),u.jsx(Kh,{value:"draft",children:"Draft"})]})]})]})]})})]}),u.jsxs(Gl,{children:[u.jsx(Jl,{children:u.jsxs(Yl,{children:["Quote Requests (",e.length,")"]})}),u.jsx(Xl,{children:n?u.jsxs("div",{className:"flex justify-center items-center py-8",children:[u.jsx(L,{className:"h-6 w-6 animate-spin mr-2"}),"Loading quotes..."]}):u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"overflow-x-auto",children:u.jsxs("table",{className:"w-full border-collapse",children:[u.jsx("thead",{children:u.jsxs("tr",{className:"border-b",children:[u.jsx("th",{className:"p-3 text-left",children:"Customer"}),u.jsx("th",{className:"p-3 text-left",children:"Product"}),u.jsx("th",{className:"p-3 text-left",children:"Location"}),u.jsx("th",{className:"p-3 text-left",children:"Budget"}),u.jsx("th",{className:"p-3 text-left",children:"Contact"}),u.jsx("th",{className:"p-3 text-left",children:"Status"}),u.jsx("th",{className:"p-3 text-left",children:"Created"}),u.jsx("th",{className:"p-3 text-left",children:"Actions"})]})}),u.jsx("tbody",{children:e.length>0?e.map(e=>u.jsxs("tr",{className:"border-b hover:bg-gray-50",children:[u.jsx("td",{className:"p-3",children:u.jsxs("div",{children:[u.jsxs("div",{className:"font-medium",children:[e.firstName," ",e.lastName]}),u.jsx("div",{className:"text-sm text-gray-500",children:e.email})]})}),u.jsx("td",{className:"p-3",children:u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx(z,{className:"h-4 w-4 text-gray-400"}),u.jsx("span",{className:"truncate max-w-32",title:e.product,children:e.product})]})}),u.jsx("td",{className:"p-3",children:u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx(y,{className:"h-4 w-4 text-gray-400"}),u.jsx("span",{children:e.location||"Not specified"})]})}),u.jsx("td",{className:"p-3",children:e.budget||"Not specified"}),u.jsx("td",{className:"p-3",children:u.jsxs("div",{className:"text-sm",children:[u.jsxs("div",{className:"flex items-center gap-1",children:[u.jsx(x,{className:"h-3 w-3"}),e.phone]}),u.jsx("div",{className:"text-gray-500",children:e.contactMethod})]})}),u.jsx("td",{className:"p-3",children:u.jsx(bu,{className:A(e.status),children:e.status.charAt(0).toUpperCase()+e.status.slice(1)})}),u.jsx("td",{className:"p-3",children:O(e.createdAt)}),u.jsx("td",{className:"p-3",children:u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx(Hl,{variant:"ghost",size:"sm",onClick:()=>(e=>{i(e),l(!0)})(e),children:u.jsx(B,{className:"h-4 w-4"})}),u.jsx(Hl,{variant:"ghost",size:"sm",onClick:()=>{i(e),d(!0)},children:u.jsx(U,{className:"h-4 w-4"})}),u.jsx(Hl,{variant:"ghost",size:"sm",className:"text-red-600 hover:text-red-800",onClick:()=>T(e.id),children:u.jsx(W,{className:"h-4 w-4"})})]})})]},e.id)):u.jsx("tr",{children:u.jsx("td",{colSpan:8,className:"p-8 text-center text-gray-500",children:"No quotes found"})})})]})}),w>1&&u.jsxs("div",{className:"flex justify-center items-center gap-2 mt-6",children:[u.jsx(Hl,{variant:"outline",onClick:()=>b(e=>Math.max(e-1,1)),disabled:1===g,children:"Previous"}),u.jsxs("span",{className:"px-4 py-2",children:["Page ",g," of ",w]}),u.jsx(Hl,{variant:"outline",onClick:()=>b(e=>Math.min(e+1,w)),disabled:g===w,children:"Next"})]})]})})]}),u.jsx(hu,{open:o,onOpenChange:l,children:u.jsxs(gu,{className:"max-w-4xl max-h-[80vh] overflow-y-auto",children:[u.jsx(xu,{children:u.jsx(vu,{children:"Quote Request Details"})}),r&&u.jsx("div",{className:"space-y-6",children:u.jsxs(Tm,{defaultValue:"details",className:"w-full",children:[u.jsxs(Rm,{className:"grid w-full grid-cols-3",children:[u.jsx(Pm,{value:"details",children:"Details"}),u.jsx(Pm,{value:"requirements",children:"Requirements"}),u.jsx(Pm,{value:"actions",children:"Actions"})]}),u.jsx(Dm,{value:"details",className:"space-y-4",children:u.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[u.jsxs("div",{children:[u.jsx(ac,{className:"text-sm font-medium",children:"Customer Name"}),u.jsxs("p",{className:"text-sm text-gray-600",children:[r.firstName," ",r.lastName]})]}),u.jsxs("div",{children:[u.jsx(ac,{className:"text-sm font-medium",children:"Email"}),u.jsx("p",{className:"text-sm text-gray-600",children:r.email})]}),u.jsxs("div",{children:[u.jsx(ac,{className:"text-sm font-medium",children:"Phone"}),u.jsx("p",{className:"text-sm text-gray-600",children:r.phone})]}),u.jsxs("div",{children:[u.jsx(ac,{className:"text-sm font-medium",children:"Location"}),u.jsx("p",{className:"text-sm text-gray-600",children:r.location||"Not specified"})]}),u.jsxs("div",{children:[u.jsx(ac,{className:"text-sm font-medium",children:"Product"}),u.jsx("p",{className:"text-sm text-gray-600",children:r.product})]}),u.jsxs("div",{children:[u.jsx(ac,{className:"text-sm font-medium",children:"Budget"}),u.jsx("p",{className:"text-sm text-gray-600",children:r.budget||"Not specified"})]}),u.jsxs("div",{children:[u.jsx(ac,{className:"text-sm font-medium",children:"Coverage"}),u.jsx("p",{className:"text-sm text-gray-600",children:r.coverage||"Not specified"})]}),u.jsxs("div",{children:[u.jsx(ac,{className:"text-sm font-medium",children:"Contact Method"}),u.jsx("p",{className:"text-sm text-gray-600",children:r.contactMethod})]}),u.jsxs("div",{children:[u.jsx(ac,{className:"text-sm font-medium",children:"Best Time"}),u.jsx("p",{className:"text-sm text-gray-600",children:r.bestTime||"Not specified"})]}),u.jsxs("div",{children:[u.jsx(ac,{className:"text-sm font-medium",children:"Status"}),u.jsx(bu,{className:A(r.status),children:r.status.charAt(0).toUpperCase()+r.status.slice(1)})]}),u.jsxs("div",{children:[u.jsx(ac,{className:"text-sm font-medium",children:"Created"}),u.jsx("p",{className:"text-sm text-gray-600",children:O(r.createdAt)})]}),u.jsxs("div",{children:[u.jsx(ac,{className:"text-sm font-medium",children:"Updated"}),u.jsx("p",{className:"text-sm text-gray-600",children:O(r.updatedAt)})]}),u.jsxs("div",{className:"col-span-2",children:[u.jsx(ac,{className:"text-sm font-medium",children:"Attached Documents"}),r.documents&&r.documents.length>0?u.jsx("ul",{className:"mt-2 space-y-2",children:r.documents.map(e=>{var t;const s=null==(t=e.originalName.split(".").pop())?void 0:t.toLowerCase();let n=u.jsx(N,{className:"h-4 w-4 text-muted-foreground"});return["pdf"].includes(s)&&(n=u.jsx(N,{className:"h-4 w-4 text-red-600"})),["jpg","jpeg","png","gif","svg"].includes(s)&&(n=u.jsx("span",{className:"h-4 w-4 inline-block bg-gray-300 rounded",children:"IMG"})),["doc","docx"].includes(s)&&(n=u.jsx(N,{className:"h-4 w-4 text-blue-600"})),u.jsxs("li",{className:"flex items-center gap-2 bg-gray-100 rounded px-2 py-1",children:[n,u.jsx("span",{className:"truncate max-w-xs",title:e.originalName,children:e.originalName}),u.jsx(Hl,{size:"sm",variant:"outline",onClick:()=>yc.downloadDocument(e.id,e.originalName),children:"Download"})]},e.id)})}):u.jsx("p",{className:"text-gray-500 mt-2",children:"No documents attached"})]})]})}),u.jsx(Dm,{value:"requirements",className:"space-y-4",children:r.details?u.jsxs("div",{children:[u.jsx(ac,{className:"text-sm font-medium",children:"Insurance Product Details"}),(()=>{let e;try{e=JSON.parse(r.details)}catch{e=r.details}return"object"==typeof e&&null!==e?u.jsx("table",{className:"w-full text-sm bg-gray-50 rounded-lg mt-2",children:u.jsx("tbody",{children:Object.entries(e).map(([e,t])=>u.jsxs("tr",{className:"border-b last:border-b-0",children:[u.jsx("td",{className:"py-2 px-3 font-medium text-gray-700 capitalize whitespace-nowrap",children:e.replace(/([A-Z])/g," $1")}),u.jsx("td",{className:"py-2 px-3 text-gray-600 break-all",children:String(t)})]},e))})}):u.jsx("p",{className:"text-sm text-gray-600 mt-1 p-3 bg-gray-50 rounded-lg whitespace-pre-wrap",children:r.details})})()]}):u.jsx("p",{className:"text-gray-500 text-center py-8",children:"No additional requirements provided"})}),u.jsxs(Dm,{value:"actions",className:"space-y-4",children:[u.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[u.jsxs(Hl,{className:"w-full",onClick:()=>E(r.id,"approved"),disabled:"approved"===r.status,children:[u.jsx(D,{className:"h-4 w-4 mr-2"}),"Approve Quote"]}),u.jsxs(Hl,{variant:"destructive",className:"w-full",onClick:()=>E(r.id,"rejected"),disabled:"rejected"===r.status,children:[u.jsx(N,{className:"h-4 w-4 mr-2"}),"Reject Quote"]}),u.jsxs(Hl,{variant:"outline",className:"w-full",onClick:()=>E(r.id,"pending"),disabled:"pending"===r.status,children:[u.jsx($,{className:"h-4 w-4 mr-2"}),"Mark Pending"]}),u.jsxs(Hl,{variant:"outline",className:"w-full text-red-600 hover:text-red-800",onClick:()=>T(r.id),children:[u.jsx(W,{className:"h-4 w-4 mr-2"}),"Delete Quote"]})]}),u.jsxs("div",{className:"grid grid-cols-2 gap-4 mt-6",children:[u.jsxs(Hl,{className:"w-full flex items-center gap-2 bg-green-600 hover:bg-green-700 text-white",onClick:()=>{let e=r.phone||"";e=e.replace(/\D/g,""),e.startsWith("0")?e="254"+e.slice(1):e.startsWith("254")||e.startsWith("7")&&(e="254"+e);const t=encodeURIComponent(`Hello ${r.firstName}, regarding your quote for ${r.product}: ...`);window.open(`https://wa.me/${e}?text=${t}`,"_blank")},children:[u.jsx(R,{className:"h-4 w-4"}),"Respond via WhatsApp"]}),u.jsxs(Hl,{className:"w-full flex items-center gap-2 bg-blue-600 hover:bg-blue-700 text-white",onClick:()=>{const e=encodeURIComponent(`Your Insurance Quote Request for ${r.product}`),t=encodeURIComponent(`Hello ${r.firstName},\n\nThank you for your quote request for ${r.product}. ...`);window.open(`mailto:${r.email}?subject=${e}&body=${t}`)},children:[u.jsx(v,{className:"h-4 w-4"}),"Respond via Email"]})]})]})]})})]})}),u.jsx(hu,{open:c,onOpenChange:d,children:u.jsxs(gu,{className:"max-w-md",children:[u.jsx(xu,{children:u.jsx(vu,{children:"Edit Quote Status"})}),r&&u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{children:[u.jsx(ac,{htmlFor:"edit-status",children:"Status"}),u.jsxs(Fh,{value:r.status,onValueChange:e=>i({...r,status:e}),children:[u.jsx(zh,{children:u.jsx(qh,{})}),u.jsxs(Hh,{children:[u.jsx(Kh,{value:"pending",children:"Pending"}),u.jsx(Kh,{value:"approved",children:"Approved"}),u.jsx(Kh,{value:"rejected",children:"Rejected"}),u.jsx(Kh,{value:"draft",children:"Draft"})]})]})]}),u.jsxs("div",{className:"flex gap-2",children:[u.jsx(Hl,{className:"flex-1",onClick:()=>E(r.id,r.status),children:"Save Changes"}),u.jsx(Hl,{variant:"outline",onClick:()=>d(!1),children:"Cancel"})]})]})]})})]})}function Im(){const[e,t]=s.useState([]),[n,a]=s.useState(!0),[r,i]=s.useState(null),[o,l]=s.useState(!1),[c,d]=s.useState(""),[h,m]=s.useState(""),[p,f]=s.useState(1),[g,x]=s.useState(1),{toast:y}=De(),b=async()=>{var e;try{a(!0);const s="all"===h?void 0:h,n=await yc.getAllDiasporaRequests(p,20,s,c||void 0);n.success?(t(n.data.diasporaRequests||[]),x((null==(e=n.data.pagination)?void 0:e.totalPages)||1)):(t([]),y({title:"Error",description:"Failed to fetch diaspora requests.",variant:"destructive"}))}catch(s){t([]),y({title:"Error",description:"Failed to fetch diaspora requests.",variant:"destructive"})}finally{a(!1)}};s.useEffect(()=>{b()},[p,h,c]);const w=e=>{switch(e.toLowerCase()){case"pending":return"bg-yellow-100 text-yellow-800";case"contacted":return"bg-blue-100 text-blue-800";case"scheduled":return"bg-purple-100 text-purple-800";case"completed":return"bg-green-100 text-green-800";case"cancelled":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},j=e=>({USA:"",UK:"",Canada:"",Australia:"",Germany:"",France:"",Japan:"","South Africa":"",UAE:"","Saudi Arabia":"",Qatar:"",Kuwait:""}[e]||"");return u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-between",children:[u.jsx("h2",{className:"text-2xl font-bold",children:"Diaspora Services"}),u.jsxs(Hl,{onClick:b,variant:"outline",size:"sm",disabled:n,children:[u.jsx(L,{className:"h-4 w-4 mr-2"}),"Refresh"]})]}),u.jsxs(Gl,{children:[u.jsx(Jl,{children:u.jsxs(Yl,{className:"text-lg flex items-center gap-2",children:[u.jsx(F,{className:"h-5 w-5"}),"Filters"]})}),u.jsx(Xl,{children:u.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[u.jsx("div",{className:"flex-1",children:u.jsx(Zl,{placeholder:"Search diaspora requests...",value:c,onChange:e=>d(e.target.value),className:"w-full"})}),u.jsxs(Fh,{value:h,onValueChange:m,children:[u.jsx(zh,{className:"w-[180px]",children:u.jsx(qh,{placeholder:"Filter by status"})}),u.jsxs(Hh,{children:[u.jsx(Kh,{value:"all",children:"All Statuses"}),u.jsx(Kh,{value:"pending",children:"Pending"}),u.jsx(Kh,{value:"contacted",children:"Contacted"}),u.jsx(Kh,{value:"scheduled",children:"Scheduled"}),u.jsx(Kh,{value:"completed",children:"Completed"}),u.jsx(Kh,{value:"cancelled",children:"Cancelled"})]})]})]})})]}),u.jsxs(Gl,{children:[u.jsx(Jl,{children:u.jsxs(Yl,{children:["Diaspora Service Requests (",e.length,")"]})}),u.jsxs(Xl,{children:[n?u.jsx("div",{className:"flex justify-center items-center py-8",children:u.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})}):0===e.length?u.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[u.jsx(O,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),u.jsx("p",{children:"No diaspora requests found"})]}):u.jsx("div",{className:"space-y-4",children:e.map(e=>u.jsx("div",{className:"border rounded-lg p-4 hover:bg-muted/50 transition-colors",children:u.jsxs("div",{className:"flex justify-between items-start",children:[u.jsxs("div",{className:"flex-1",children:[u.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[u.jsx("h3",{className:"font-semibold",children:e.name}),u.jsx(bu,{className:w(e.status),children:e.status}),u.jsx("span",{className:"text-lg",children:j(e.country)})]}),u.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 text-sm text-muted-foreground",children:[u.jsxs("div",{className:"flex items-center gap-1",children:[u.jsx(v,{className:"h-4 w-4"}),e.email]}),u.jsxs("div",{className:"flex items-center gap-1",children:[u.jsx(O,{className:"h-4 w-4"}),e.country]}),u.jsxs("div",{className:"flex items-center gap-1",children:[u.jsx(H,{className:"h-4 w-4"}),e.serviceInterest]}),u.jsxs("div",{className:"flex items-center gap-1",children:[u.jsx(D,{className:"h-4 w-4"}),new Date(e.createdAt).toLocaleDateString()]})]}),e.scheduledAt&&u.jsxs("div",{className:"mt-2 text-sm text-green-600 flex items-center gap-1",children:[u.jsx($,{className:"h-4 w-4"}),"Scheduled: ",new Date(e.scheduledAt).toLocaleString()]})]}),u.jsxs("div",{className:"flex gap-2 ml-4",children:[u.jsxs(Hl,{variant:"outline",size:"sm",onClick:()=>(e=>{i(e),l(!0)})(e),children:[u.jsx(B,{className:"h-4 w-4 mr-1"}),"View"]}),u.jsxs(Fh,{value:e.status,onValueChange:t=>(async(e,t)=>{try{const s=await yc.updateDiasporaRequestStatus(e,t);s.success?(await b(),y({title:"Status Updated",description:`Diaspora request status updated to ${t}`})):y({title:"Update Failed",description:s.error||"Failed to update request status",variant:"destructive"})}catch(s){y({title:"Update Failed",description:s.message||"Failed to update request status",variant:"destructive"})}})(e.id,t),children:[u.jsx(zh,{className:"w-32",children:u.jsx(qh,{})}),u.jsxs(Hh,{children:[u.jsx(Kh,{value:"pending",children:"Pending"}),u.jsx(Kh,{value:"contacted",children:"Contacted"}),u.jsx(Kh,{value:"scheduled",children:"Scheduled"}),u.jsx(Kh,{value:"completed",children:"Completed"}),u.jsx(Kh,{value:"cancelled",children:"Cancelled"})]})]})]})]})},e.id))}),g>1&&u.jsxs("div",{className:"flex justify-center gap-2 mt-6",children:[u.jsx(Hl,{variant:"outline",size:"sm",onClick:()=>f(e=>Math.max(e-1,1)),disabled:1===p,children:"Previous"}),u.jsxs("span",{className:"px-4 py-2 text-sm",children:["Page ",p," of ",g]}),u.jsx(Hl,{variant:"outline",size:"sm",onClick:()=>f(e=>Math.min(e+1,g)),disabled:p===g,children:"Next"})]})]})]}),u.jsx(hu,{open:o,onOpenChange:l,children:u.jsxs(gu,{className:"max-w-2xl",children:[u.jsx(xu,{children:u.jsx(vu,{children:"Diaspora Service Request Details"})}),r&&u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"font-semibold",children:"Client Name:"}),u.jsx("p",{children:r.name})]}),u.jsxs("div",{children:[u.jsx("label",{className:"font-semibold",children:"Email:"}),u.jsx("p",{children:r.email})]}),u.jsxs("div",{children:[u.jsx("label",{className:"font-semibold",children:"Phone:"}),u.jsx("p",{children:r.phone})]}),u.jsxs("div",{children:[u.jsx("label",{className:"font-semibold",children:"Country:"}),u.jsxs("p",{className:"flex items-center gap-2",children:[u.jsx("span",{children:j(r.country)}),r.country]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"font-semibold",children:"Timezone:"}),u.jsx("p",{children:r.timezone})]}),u.jsxs("div",{children:[u.jsx("label",{className:"font-semibold",children:"Service Interest:"}),u.jsx("p",{children:r.serviceInterest})]})]}),u.jsx("div",{className:"flex gap-2 mt-4",children:u.jsx(Hl,{variant:"outline",className:"bg-blue-600 hover:bg-blue-700 text-white",onClick:async()=>{try{const e=await yc.createNotification({type:"project-consultation",diasporaRequestId:r.id,name:r.name,email:r.email,phone:r.phone,country:r.country,timezone:r.timezone,serviceInterest:r.serviceInterest,createdAt:r.createdAt});e.success?(y({title:"Project-Based Consultation Created",description:"Consultation has been created and will appear in the dashboard."}),b()):y({title:"Error",description:e.message||"Failed to create project-based consultation.",variant:"destructive"})}catch(e){y({title:"Error",description:e.message||"Failed to create project-based consultation.",variant:"destructive"})}},children:"Project-Based Consultation"})}),r.scheduledAt&&u.jsxs("div",{children:[u.jsx("label",{className:"font-semibold",children:"Scheduled Appointment:"}),u.jsx("p",{className:"text-green-600",children:new Date(r.scheduledAt).toLocaleString()})]}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("label",{className:"font-semibold",children:"Status:"}),u.jsx(bu,{className:w(r.status),children:r.status})]}),u.jsxs("div",{children:[u.jsx("label",{className:"font-semibold",children:"Submitted:"}),u.jsx("p",{children:new Date(r.createdAt).toLocaleString()})]})]})]})})]})}function Mm(){const[e,t]=s.useState([]),[n,a]=s.useState({total:0,pending:0,approved:0,rejected:0,inProgress:0,completed:0,totalValue:0,avgBudget:0}),[r,i]=s.useState(!0),[o,l]=s.useState(""),[c,d]=s.useState("all"),[h,m]=s.useState("all"),[p,f]=s.useState(1),[g,x]=s.useState(1),[v,y]=s.useState(null),[b,w]=s.useState(!1),[j,N]=s.useState(!1),S=s.useCallback(async()=>{var e;try{i(!0);const s="all"===c?void 0:c,n=await yc.getAllOutsourcingRequests(p,20,s,o||void 0);n.success?(t(n.data.outsourcingRequests||[]),x((null==(e=n.data.pagination)?void 0:e.totalPages)||1)):(t([]),Ss.error("Failed to fetch outsourcing requests"))}catch(s){t([]),Ss.error("Failed to fetch outsourcing requests data")}finally{i(!1)}},[p,c,o]),k=s.useCallback(async()=>{try{const e=await yc.getOutsourcingStats();e.success&&a(e.data)}catch(e){Ss.error("Failed to fetch outsourcing statistics")}},[]);s.useEffect(()=>{S(),k()},[S,k]);const C=async(e,t)=>{try{await yc.updateOutsourcingStatus(parseInt(e),t),await S()}catch(s){}},T=async e=>{try{const t=await yc.exportOutsourcingData(e);if(t.success){const s=new Blob([t.data],{type:"csv"===e?"text/csv":"application/json"}),n=window.URL.createObjectURL(s),a=document.createElement("a");a.href=n,a.download=`outsourcing_requests_${(new Date).toISOString().split("T")[0]}.${e}`,document.body.appendChild(a),a.click(),document.body.removeChild(a),window.URL.revokeObjectURL(n),Ss.success(`Outsourcing data exported as ${e.toUpperCase()}`)}}catch(t){Ss.error("Failed to export outsourcing data")}},R=e=>{switch(e.toLowerCase()){case"pending":return"bg-yellow-100 text-yellow-800";case"approved":return"bg-green-100 text-green-800";case"rejected":return"bg-red-100 text-red-800";case"in_progress":return"bg-blue-100 text-blue-800";case"completed":return"bg-purple-100 text-purple-800";default:return"bg-gray-100 text-gray-800"}},P=e=>new Intl.NumberFormat("en-KE",{style:"currency",currency:"KES"}).format(e);return u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"flex justify-between items-center",children:[u.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Outsourcing Management"}),u.jsxs("div",{className:"flex gap-2",children:[u.jsxs(Hl,{onClick:()=>T("csv"),variant:"outline",children:[u.jsx(M,{className:"h-4 w-4 mr-2"}),"Export CSV"]}),u.jsxs(Hl,{onClick:()=>T("json"),variant:"outline",children:[u.jsx(M,{className:"h-4 w-4 mr-2"}),"Export JSON"]}),u.jsxs(Hl,{onClick:S,variant:"outline",children:[u.jsx(L,{className:"h-4 w-4 mr-2"}),"Refresh"]})]})]}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[u.jsxs(Gl,{children:[u.jsxs(Jl,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[u.jsx(Yl,{className:"text-sm font-medium",children:"Total Requests"}),u.jsx(K,{className:"h-4 w-4 text-muted-foreground"})]}),u.jsxs(Xl,{children:[u.jsx("div",{className:"text-2xl font-bold",children:n.total}),u.jsxs("p",{className:"text-xs text-muted-foreground",children:[n.pending," pending approval"]})]})]}),u.jsxs(Gl,{children:[u.jsxs(Jl,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[u.jsx(Yl,{className:"text-sm font-medium",children:"In Progress"}),u.jsx($,{className:"h-4 w-4 text-muted-foreground"})]}),u.jsxs(Xl,{children:[u.jsx("div",{className:"text-2xl font-bold",children:n.inProgress}),u.jsx("p",{className:"text-xs text-muted-foreground",children:"Active projects"})]})]}),u.jsxs(Gl,{children:[u.jsxs(Jl,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[u.jsx(Yl,{className:"text-sm font-medium",children:"Total Value"}),u.jsx(_,{className:"h-4 w-4 text-muted-foreground"})]}),u.jsxs(Xl,{children:[u.jsx("div",{className:"text-2xl font-bold",children:P(n.totalValue)}),u.jsxs("p",{className:"text-xs text-muted-foreground",children:["Avg: ",P(n.avgBudget)]})]})]}),u.jsxs(Gl,{children:[u.jsxs(Jl,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[u.jsx(Yl,{className:"text-sm font-medium",children:"Completion Rate"}),u.jsx(E,{className:"h-4 w-4 text-muted-foreground"})]}),u.jsxs(Xl,{children:[u.jsxs("div",{className:"text-2xl font-bold",children:[n.total>0?Math.round(n.completed/n.total*100):0,"%"]}),u.jsxs("p",{className:"text-xs text-muted-foreground",children:[n.completed," completed"]})]})]})]}),u.jsx(Gl,{children:u.jsx(Xl,{className:"pt-6",children:u.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[u.jsxs("div",{className:"flex-1",children:[u.jsx(ac,{htmlFor:"search",children:"Search Requests"}),u.jsxs("div",{className:"relative",children:[u.jsx(q,{className:"absolute left-2 top-2.5 h-4 w-4 text-muted-foreground"}),u.jsx(Zl,{id:"search",placeholder:"Search by business name, contact person, or email...",value:o,onChange:e=>l(e.target.value),className:"pl-8"})]})]}),u.jsxs("div",{children:[u.jsx(ac,{htmlFor:"status-filter",children:"Status"}),u.jsxs(Fh,{value:c,onValueChange:d,children:[u.jsx(zh,{id:"status-filter",children:u.jsx(qh,{placeholder:"All Statuses"})}),u.jsxs(Hh,{children:[u.jsx(Kh,{value:"all",children:"All Statuses"}),u.jsx(Kh,{value:"pending",children:"Pending"}),u.jsx(Kh,{value:"approved",children:"Approved"}),u.jsx(Kh,{value:"rejected",children:"Rejected"}),u.jsx(Kh,{value:"in_progress",children:"In Progress"}),u.jsx(Kh,{value:"completed",children:"Completed"})]})]})]}),u.jsxs("div",{children:[u.jsx(ac,{htmlFor:"priority-filter",children:"Priority"}),u.jsxs(Fh,{value:h,onValueChange:m,children:[u.jsx(zh,{id:"priority-filter",children:u.jsx(qh,{placeholder:"All Priorities"})}),u.jsxs(Hh,{children:[u.jsx(Kh,{value:"all",children:"All Priorities"}),u.jsx(Kh,{value:"high",children:"High"}),u.jsx(Kh,{value:"medium",children:"Medium"}),u.jsx(Kh,{value:"low",children:"Low"})]})]})]})]})})}),u.jsxs(Gl,{children:[u.jsx(Jl,{children:u.jsx(Yl,{children:"Outsourcing Requests"})}),u.jsx(Xl,{children:r?u.jsxs("div",{className:"flex justify-center items-center py-8",children:[u.jsx(L,{className:"h-6 w-6 animate-spin mr-2"}),"Loading outsourcing requests..."]}):u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"overflow-x-auto",children:u.jsxs("table",{className:"w-full border-collapse",children:[u.jsx("thead",{children:u.jsxs("tr",{className:"border-b",children:[u.jsx("th",{className:"p-3 text-left",children:"Organization"}),u.jsx("th",{className:"p-3 text-left",children:"Location"}),u.jsx("th",{className:"p-3 text-left",children:"Services"}),u.jsx("th",{className:"p-3 text-left",children:"Budget Range"}),u.jsx("th",{className:"p-3 text-left",children:"Nature"}),u.jsx("th",{className:"p-3 text-left",children:"Status"}),u.jsx("th",{className:"p-3 text-left",children:"Created"}),u.jsx("th",{className:"p-3 text-left",children:"Actions"})]})}),u.jsx("tbody",{children:e.length>0?e.map(e=>{return u.jsxs("tr",{className:"border-b hover:bg-gray-50",children:[u.jsx("td",{className:"p-3",children:u.jsxs("div",{children:[u.jsx("div",{className:"font-medium",children:e.organizationName}),u.jsx("div",{className:"text-sm text-gray-500",children:e.coreFunctions})]})}),u.jsx("td",{className:"p-3",children:u.jsxs("div",{children:[u.jsx("div",{className:"font-medium",children:e.location}),u.jsx("div",{className:"text-sm text-gray-500",children:e.address})]})}),u.jsx("td",{className:"p-3",children:u.jsxs("div",{className:"text-sm",children:[Array.isArray(e.services)?e.services.slice(0,2).join(", "):e.services,Array.isArray(e.services)&&e.services.length>2&&"..."]})}),u.jsx("td",{className:"p-3 font-medium",children:e.budgetRange}),u.jsx("td",{className:"p-3",children:u.jsx("div",{className:"text-sm text-gray-600 truncate max-w-32",title:e.natureOfOutsourcing,children:e.natureOfOutsourcing})}),u.jsx("td",{className:"p-3",children:u.jsx(bu,{className:R(e.status),children:e.status.replace("_"," ")})}),u.jsx("td",{className:"p-3",children:(t=e.createdAt,new Date(t).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"2-digit"}))}),u.jsx("td",{className:"p-3",children:u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx(Hl,{variant:"ghost",size:"sm",onClick:()=>{y(e),w(!0)},children:u.jsx(B,{className:"h-4 w-4"})}),u.jsx(Hl,{variant:"ghost",size:"sm",onClick:()=>{y(e),N(!0)},children:u.jsx(U,{className:"h-4 w-4"})}),u.jsx(Hl,{variant:"ghost",size:"sm",className:"text-red-600 hover:text-red-800",onClick:()=>(async e=>{if(window.confirm("Are you sure you want to delete this outsourcing request?"))try{await yc.deleteOutsourcingRequest(parseInt(e)),await S()}catch(t){}})(e.id),children:u.jsx(W,{className:"h-4 w-4"})})]})})]},e.id);var t}):u.jsx("tr",{children:u.jsx("td",{colSpan:8,className:"p-8 text-center text-gray-500",children:"No outsourcing requests found"})})})]})}),g>1&&u.jsxs("div",{className:"flex justify-center items-center gap-2 mt-6",children:[u.jsx(Hl,{variant:"outline",onClick:()=>f(e=>Math.max(e-1,1)),disabled:1===p,children:"Previous"}),u.jsxs("span",{className:"px-4 py-2",children:["Page ",p," of ",g]}),u.jsx(Hl,{variant:"outline",onClick:()=>f(e=>Math.min(e+1,g)),disabled:p===g,children:"Next"})]})]})})]}),u.jsx(hu,{open:b,onOpenChange:w,children:u.jsxs(gu,{className:"max-w-4xl max-h-[80vh] overflow-y-auto",children:[u.jsx(xu,{children:u.jsx(vu,{children:"Outsourcing Request Details"})}),v&&u.jsx("div",{className:"space-y-6",children:u.jsxs(Tm,{defaultValue:"details",className:"w-full",children:[u.jsxs(Rm,{className:"grid w-full grid-cols-3",children:[u.jsx(Pm,{value:"details",children:"Details"}),u.jsx(Pm,{value:"requirements",children:"Requirements"}),u.jsx(Pm,{value:"actions",children:"Actions"})]}),u.jsxs(Dm,{value:"details",className:"space-y-4",children:[u.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[u.jsxs("div",{children:[u.jsx(ac,{className:"text-sm font-medium",children:"Organization Name"}),u.jsx("p",{className:"text-sm text-gray-600",children:v.organizationName})]}),u.jsxs("div",{children:[u.jsx(ac,{className:"text-sm font-medium",children:"Core Functions"}),u.jsx("p",{className:"text-sm text-gray-600",children:v.coreFunctions})]}),u.jsxs("div",{children:[u.jsx(ac,{className:"text-sm font-medium",children:"Contact Email"}),u.jsx("p",{className:"text-sm text-gray-600",children:v.contactEmail})]}),u.jsxs("div",{children:[u.jsx(ac,{className:"text-sm font-medium",children:"Contact Phone"}),u.jsx("p",{className:"text-sm text-gray-600",children:v.contactPhone})]}),u.jsxs("div",{children:[u.jsx(ac,{className:"text-sm font-medium",children:"Location"}),u.jsx("p",{className:"text-sm text-gray-600",children:v.location})]}),u.jsxs("div",{children:[u.jsx(ac,{className:"text-sm font-medium",children:"Address"}),u.jsx("p",{className:"text-sm text-gray-600",children:v.address})]}),u.jsxs("div",{children:[u.jsx(ac,{className:"text-sm font-medium",children:"Budget Range"}),u.jsx("p",{className:"text-sm text-gray-600",children:v.budgetRange})]}),u.jsxs("div",{children:[u.jsx(ac,{className:"text-sm font-medium",children:"Timeline"}),u.jsx("p",{className:"text-sm text-gray-600",children:v.timeline})]}),u.jsxs("div",{children:[u.jsx(ac,{className:"text-sm font-medium",children:"Status"}),u.jsx(bu,{className:R(v.status),children:v.status.replace("_"," ")})]}),u.jsxs("div",{children:[u.jsx(ac,{className:"text-sm font-medium",children:"Services Required"}),u.jsx("div",{className:"flex flex-wrap gap-2 mt-1",children:Array.isArray(v.services)?v.services.map((e,t)=>u.jsx("span",{className:"bg-blue-100 text-blue-800 text-xs px-2 py-1 rounded-full",children:e},t)):u.jsx("p",{className:"text-sm text-gray-600",children:v.services})})]})]}),u.jsxs("div",{children:[u.jsx(ac,{className:"text-sm font-medium",children:"Nature of Outsourcing"}),u.jsx("p",{className:"text-sm text-gray-600 mt-1 p-3 bg-gray-50 rounded-lg",children:v.natureOfOutsourcing})]}),v.specificRequirements&&u.jsxs("div",{children:[u.jsx(ac,{className:"text-sm font-medium",children:"Specific Requirements"}),u.jsx("p",{className:"text-sm text-gray-600 mt-1 p-3 bg-gray-50 rounded-lg whitespace-pre-wrap",children:v.specificRequirements})]})]}),u.jsx(Dm,{value:"requirements",className:"space-y-4",children:v.specificRequirements?u.jsxs("div",{children:[u.jsx(ac,{className:"text-sm font-medium",children:"Specific Requirements"}),u.jsx("p",{className:"text-sm text-gray-600 mt-1 p-3 bg-gray-50 rounded-lg whitespace-pre-wrap",children:v.specificRequirements})]}):u.jsx("p",{className:"text-gray-500 text-center py-8",children:"No specific requirements provided"})}),u.jsx(Dm,{value:"actions",className:"space-y-4",children:u.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[u.jsxs(Hl,{className:"w-full",onClick:()=>C(v.id,"APPROVED"),disabled:"approved"===v.status,children:[u.jsx(V,{className:"h-4 w-4 mr-2"}),"Approve Request"]}),u.jsxs(Hl,{variant:"destructive",className:"w-full",onClick:()=>C(v.id,"REJECTED"),disabled:"rejected"===v.status,children:[u.jsx(G,{className:"h-4 w-4 mr-2"}),"Reject Request"]}),u.jsxs(Hl,{variant:"outline",className:"w-full",onClick:()=>C(v.id,"IN_PROGRESS"),disabled:"in_progress"===v.status,children:[u.jsx($,{className:"h-4 w-4 mr-2"}),"Mark In Progress"]}),u.jsxs(Hl,{variant:"outline",className:"w-full",onClick:()=>C(v.id,"COMPLETED"),disabled:"completed"===v.status,children:[u.jsx(V,{className:"h-4 w-4 mr-2"}),"Mark Completed"]})]})})]})})]})}),u.jsx(hu,{open:j,onOpenChange:N,children:u.jsxs(gu,{className:"max-w-2xl",children:[u.jsx(xu,{children:u.jsx(vu,{children:"Edit Outsourcing Request"})}),v&&u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[u.jsxs("div",{children:[u.jsx(ac,{htmlFor:"status",children:"Status"}),u.jsxs(Fh,{value:v.status,onValueChange:e=>y({...v,status:e}),children:[u.jsx(zh,{children:u.jsx(qh,{})}),u.jsxs(Hh,{children:[u.jsx(Kh,{value:"pending",children:"Pending"}),u.jsx(Kh,{value:"approved",children:"Approved"}),u.jsx(Kh,{value:"rejected",children:"Rejected"}),u.jsx(Kh,{value:"in_progress",children:"In Progress"}),u.jsx(Kh,{value:"completed",children:"Completed"})]})]})]}),u.jsxs("div",{children:[u.jsx(ac,{htmlFor:"priority",children:"Priority"}),u.jsxs(Fh,{value:v.status,onValueChange:e=>y({...v,status:e}),children:[u.jsx(zh,{children:u.jsx(qh,{})}),u.jsxs(Hh,{children:[u.jsx(Kh,{value:"low",children:"Low"}),u.jsx(Kh,{value:"medium",children:"Medium"}),u.jsx(Kh,{value:"high",children:"High"})]})]})]})]}),u.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[u.jsx(Hl,{variant:"outline",onClick:()=>N(!1),children:"Cancel"}),u.jsx(Hl,{onClick:()=>C(v.id,v.status),children:"Save Changes"})]})]})]})})]})}const Lm=[{id:"dashboard",label:"Dashboard",icon:Q,description:"System Overview",color:"from-blue-500 to-blue-600"},{id:"users",label:"Users",icon:k,description:"User Management",color:"from-green-500 to-green-600"},{id:"claims",label:"Claims",icon:N,description:"Claims Processing",color:"from-purple-500 to-purple-600"},{id:"quotes",label:"Quotes",icon:R,description:"Quote Management",color:"from-blue-500 to-purple-600"},{id:"diaspora",label:"Diaspora",icon:O,description:"Diaspora Requests",color:"from-cyan-500 to-blue-600"},{id:"outsourcing",label:"Outsourcing",icon:K,description:"Outsourcing Requests",color:"from-amber-500 to-orange-600"},{id:"consultations",label:"Consultations",icon:D,description:"Booking Management",color:"from-orange-500 to-orange-600"},{id:"payments",label:"Payments",icon:A,description:"Financial Overview",color:"from-emerald-500 to-emerald-600"},{id:"notifications",label:"Notifications",icon:X,description:"System Alerts",color:"from-red-500 to-red-600"},{id:"analytics",label:"Analytics",icon:E,description:"Data Insights",color:"from-indigo-500 to-indigo-600"},{id:"settings",label:"Settings",icon:Z,description:"System Config",color:"from-slate-500 to-slate-600"}];function $m({activeTab:e,setActiveTab:t,isOpen:n,toggleSidebar:a}){const[r,i]=s.useState(null);return u.jsxs(u.Fragment,{children:[n&&u.jsx("div",{className:"fixed inset-0 z-40 bg-black/30 backdrop-blur-sm lg:hidden animate-in fade-in duration-300",onClick:a}),u.jsxs("div",{className:`\n        fixed inset-y-0 left-0 z-50 w-72 \n        bg-white/95 backdrop-blur-xl border-r border-white/20\n        shadow-2xl shadow-blue-500/10\n        transform transition-all duration-500 ease-out\n        lg:translate-x-0 lg:static lg:inset-0\n        before:absolute before:inset-0 before:bg-gradient-to-b before:from-white/50 before:to-white/30 before:pointer-events-none\n        ${n?"translate-x-0":"-translate-x-full"}\n      `,children:[u.jsxs("div",{className:"relative flex items-center justify-between h-20 px-6 border-b border-white/10 bg-gradient-to-r from-blue-600/5 to-purple-600/5",children:[u.jsxs("div",{className:"flex items-center space-x-3",children:[u.jsxs("div",{className:"relative",children:[u.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-600 to-purple-600 rounded-xl flex items-center justify-center shadow-lg",children:u.jsx(J,{className:"h-5 w-5 text-white"})}),u.jsx("div",{className:"absolute -top-1 -right-1 w-4 h-4 bg-gradient-to-r from-yellow-400 to-orange-500 rounded-full flex items-center justify-center",children:u.jsx(Y,{className:"h-2.5 w-2.5 text-white"})})]}),u.jsxs("div",{children:[u.jsx("h1",{className:"text-xl font-bold bg-gradient-to-r from-slate-800 to-slate-600 bg-clip-text text-transparent",children:"Admin Panel"}),u.jsx("p",{className:"text-xs text-slate-500 font-medium",children:"Enterprise Suite"})]})]}),u.jsx(Hl,{variant:"ghost",size:"sm",onClick:a,className:"lg:hidden hover:bg-white/20 rounded-xl p-2 transition-all duration-200",children:u.jsx(h,{className:"h-5 w-5 text-slate-600"})})]}),u.jsx("nav",{className:"flex-1 px-4 py-8 space-y-3 overflow-y-auto",children:Lm.map((s,n)=>{const a=s.icon,o=e===s.id,l=r===s.id;return u.jsxs("button",{onClick:()=>t(s.id),onMouseEnter:()=>i(s.id),onMouseLeave:()=>i(null),className:`\n                  group relative w-full flex items-center px-4 py-4 text-sm font-semibold rounded-2xl \n                  transition-all duration-300 ease-out transform\n                  ${o?"bg-gradient-to-r from-blue-50 to-purple-50 text-blue-700 shadow-lg shadow-blue-500/20 scale-105 translate-x-1":l?"bg-white/60 text-slate-700 shadow-md shadow-slate-500/10 scale-102 translate-x-0.5":"text-slate-600 hover:bg-white/40"}\n                `,style:{animationDelay:50*n+"ms"},children:[u.jsxs("div",{className:`\n                  relative mr-4 p-2 rounded-xl transition-all duration-300\n                  ${o?`bg-gradient-to-br ${s.color} shadow-lg shadow-blue-500/25`:l?`bg-gradient-to-br ${s.color} shadow-md shadow-slate-500/20`:"bg-slate-100 group-hover:bg-slate-200"}\n                `,children:[u.jsx(a,{className:"h-5 w-5 transition-all duration-300 "+(o||l?"text-white":"text-slate-600")}),o&&u.jsx("div",{className:"absolute inset-0 rounded-xl bg-gradient-to-br from-blue-400/20 to-purple-400/20 animate-pulse"})]}),u.jsxs("div",{className:"flex-1 text-left",children:[u.jsx("div",{className:"font-semibold",children:s.label}),u.jsx("div",{className:"text-xs opacity-70 font-normal",children:s.description})]}),l&&!o&&u.jsx("div",{className:"w-2 h-2 bg-slate-400 rounded-full animate-pulse"}),o&&u.jsx("div",{className:"w-2 h-8 bg-gradient-to-b from-blue-500 to-purple-500 rounded-full shadow-lg"}),u.jsx("div",{className:"absolute inset-0 rounded-2xl overflow-hidden",children:u.jsx("div",{className:"\n                    absolute inset-0 bg-gradient-to-r from-blue-400/0 to-purple-400/0 \n                    group-active:from-blue-400/20 group-active:to-purple-400/20\n                    transition-all duration-200\n                  "})})]},s.id)})}),u.jsxs("div",{className:"relative p-6 border-t border-white/10 bg-gradient-to-r from-slate-50/50 to-blue-50/50",children:[u.jsxs("div",{className:"flex items-center justify-between mb-3",children:[u.jsxs("div",{className:"flex items-center space-x-2",children:[u.jsx(T,{className:"h-4 w-4 text-green-500"}),u.jsx("span",{className:"text-xs font-medium text-slate-600",children:"System Secure"})]}),u.jsx("div",{className:"w-2 h-2 bg-green-400 rounded-full animate-pulse"})]}),u.jsx("div",{className:"text-xs text-slate-500 font-medium mb-1",children:"Galloways Admin Suite v2.0"}),u.jsx("div",{className:"text-xs text-slate-400",children:"Enterprise Edition"}),u.jsx("div",{className:"absolute top-2 right-2 w-3 h-3 bg-gradient-to-r from-green-400 to-emerald-500 rounded-full shadow-lg animate-pulse"})]}),u.jsx("div",{className:"absolute top-20 left-0 w-full h-32 bg-gradient-to-b from-blue-500/5 to-transparent pointer-events-none"}),u.jsx("div",{className:"absolute bottom-20 left-0 w-full h-32 bg-gradient-to-t from-purple-500/5 to-transparent pointer-events-none"})]})]})}var Um=["Enter"," "],Fm=["ArrowUp","PageDown","End"],qm=["ArrowDown","PageUp","Home",...Fm],zm={ltr:[...Um,"ArrowRight"],rtl:[...Um,"ArrowLeft"]},Bm={ltr:["ArrowLeft"],rtl:["ArrowRight"]},Wm="Menu",[Hm,Km,Vm]=He(Wm),[Gm,Jm]=Le(Wm,[Vm,Pa,em]),Ym=Pa(),Qm=em(),[Xm,Zm]=Gm(Wm),[ep,tp]=Gm(Wm),sp=e=>{const{__scopeMenu:t,open:n=!1,children:a,dir:r,onOpenChange:i,modal:o=!0}=e,l=Ym(t),[c,d]=s.useState(null),h=s.useRef(!1),m=Ge(i),p=Nu(r);return s.useEffect(()=>{const e=()=>{h.current=!0,document.addEventListener("pointerdown",t,{capture:!0,once:!0}),document.addEventListener("pointermove",t,{capture:!0,once:!0})},t=()=>h.current=!1;return document.addEventListener("keydown",e,{capture:!0}),()=>{document.removeEventListener("keydown",e,{capture:!0}),document.removeEventListener("pointerdown",t,{capture:!0}),document.removeEventListener("pointermove",t,{capture:!0})}},[]),u.jsx(Va,{...l,children:u.jsx(Xm,{scope:t,open:n,onOpenChange:m,content:c,onContentChange:d,children:u.jsx(ep,{scope:t,onClose:s.useCallback(()=>m(!1),[m]),isUsingKeyboardRef:h,dir:p,modal:o,children:a})})})};sp.displayName=Wm;var np=s.forwardRef((e,t)=>{const{__scopeMenu:s,...n}=e,a=Ym(s);return u.jsx(Ga,{...a,...n,ref:t})});np.displayName="MenuAnchor";var ap="MenuPortal",[rp,ip]=Gm(ap,{forceMount:void 0}),op=e=>{const{__scopeMenu:t,forceMount:s,children:n,container:a}=e,r=Zm(ap,t);return u.jsx(rp,{scope:t,forceMount:s,children:u.jsx(lt,{present:s||r.open,children:u.jsx(ot,{asChild:!0,container:a,children:n})})})};op.displayName=ap;var lp="MenuContent",[cp,dp]=Gm(lp),up=s.forwardRef((e,t)=>{const s=ip(lp,e.__scopeMenu),{forceMount:n=s.forceMount,...a}=e,r=Zm(lp,e.__scopeMenu),i=tp(lp,e.__scopeMenu);return u.jsx(Hm.Provider,{scope:e.__scopeMenu,children:u.jsx(lt,{present:n||r.open,children:u.jsx(Hm.Slot,{scope:e.__scopeMenu,children:i.modal?u.jsx(hp,{...a,ref:t}):u.jsx(mp,{...a,ref:t})})})})}),hp=s.forwardRef((e,t)=>{const n=Zm(lp,e.__scopeMenu),a=s.useRef(null),r=Me(t,a);return s.useEffect(()=>{const e=a.current;if(e)return Cd(e)},[]),u.jsx(fp,{...e,ref:r,trapFocus:n.open,disableOutsidePointerEvents:n.open,disableOutsideScroll:!0,onFocusOutside:Ae(e.onFocusOutside,e=>e.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>n.onOpenChange(!1)})}),mp=s.forwardRef((e,t)=>{const s=Zm(lp,e.__scopeMenu);return u.jsx(fp,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>s.onOpenChange(!1)})}),pp=Ue("MenuContent.ScrollLock"),fp=s.forwardRef((e,t)=>{const{__scopeMenu:n,loop:a=!1,trapFocus:r,onOpenAutoFocus:i,onCloseAutoFocus:o,disableOutsidePointerEvents:l,onEntryFocus:c,onEscapeKeyDown:d,onPointerDownOutside:h,onFocusOutside:m,onInteractOutside:p,onDismiss:f,disableOutsideScroll:g,...x}=e,v=Zm(lp,n),y=tp(lp,n),b=Ym(n),w=Qm(n),j=Km(n),[N,S]=s.useState(null),_=s.useRef(null),k=Me(t,_,v.onContentChange),C=s.useRef(0),E=s.useRef(""),T=s.useRef(0),R=s.useRef(null),P=s.useRef("right"),D=s.useRef(0),A=g?bd:s.Fragment,O=g?{as:pp,allowPinchZoom:!0}:void 0,I=e=>{var t,s;const n=E.current+e,a=j().filter(e=>!e.disabled),r=document.activeElement,i=null==(t=a.find(e=>e.ref.current===r))?void 0:t.textValue,o=function(e,t,s){const n=t.length>1&&Array.from(t).every(e=>e===t[0]),a=n?t[0]:t,r=s?e.indexOf(s):-1;let i=(o=e,l=Math.max(r,0),o.map((e,t)=>o[(l+t)%o.length]));var o,l;1===a.length&&(i=i.filter(e=>e!==s));const c=i.find(e=>e.toLowerCase().startsWith(a.toLowerCase()));return c!==s?c:void 0}(a.map(e=>e.textValue),n,i),l=null==(s=a.find(e=>e.textValue===o))?void 0:s.ref.current;!function e(t){E.current=t,window.clearTimeout(C.current),""!==t&&(C.current=window.setTimeout(()=>e(""),1e3))}(n),l&&setTimeout(()=>l.focus())};s.useEffect(()=>()=>window.clearTimeout(C.current),[]),Dc();const M=s.useCallback(e=>{var t,s;return P.current===(null==(t=R.current)?void 0:t.side)&&function(e,t){if(!t)return!1;const s={x:e.clientX,y:e.clientY};return function(e,t){const{x:s,y:n}=e;let a=!1;for(let r=0,i=t.length-1;r<t.length;i=r++){const e=t[r],o=t[i],l=e.x,c=e.y,d=o.x,u=o.y;c>n!=u>n&&s<(d-l)*(n-c)/(u-c)+l&&(a=!a)}return a}(s,t)}(e,null==(s=R.current)?void 0:s.area)},[]);return u.jsx(cp,{scope:n,searchRef:E,onItemEnter:s.useCallback(e=>{M(e)&&e.preventDefault()},[M]),onItemLeave:s.useCallback(e=>{var t;M(e)||(null==(t=_.current)||t.focus(),S(null))},[M]),onTriggerLeave:s.useCallback(e=>{M(e)&&e.preventDefault()},[M]),pointerGraceTimerRef:T,onPointerGraceIntentChange:s.useCallback(e=>{R.current=e},[]),children:u.jsx(A,{...O,children:u.jsx(Sc,{asChild:!0,trapped:r,onMountAutoFocus:Ae(i,e=>{var t;e.preventDefault(),null==(t=_.current)||t.focus({preventScroll:!0})}),onUnmountAutoFocus:o,children:u.jsx(et,{asChild:!0,disableOutsidePointerEvents:l,onEscapeKeyDown:d,onPointerDownOutside:h,onFocusOutside:m,onInteractOutside:p,onDismiss:f,children:u.jsx(cm,{asChild:!0,...w,dir:y.dir,orientation:"vertical",loop:a,currentTabStopId:N,onCurrentTabStopIdChange:S,onEntryFocus:Ae(c,e=>{y.isUsingKeyboardRef.current||e.preventDefault()}),preventScrollOnEntryFocus:!0,children:u.jsx(Ja,{role:"menu","aria-orientation":"vertical","data-state":qp(v.open),"data-radix-menu-content":"",dir:y.dir,...b,...x,ref:k,style:{outline:"none",...x.style},onKeyDown:Ae(x.onKeyDown,e=>{const t=e.target.closest("[data-radix-menu-content]")===e.currentTarget,s=e.ctrlKey||e.altKey||e.metaKey,n=1===e.key.length;t&&("Tab"===e.key&&e.preventDefault(),!s&&n&&I(e.key));const a=_.current;if(e.target!==a)return;if(!qm.includes(e.key))return;e.preventDefault();const r=j().filter(e=>!e.disabled).map(e=>e.ref.current);Fm.includes(e.key)&&r.reverse(),function(e){const t=document.activeElement;for(const s of e){if(s===t)return;if(s.focus(),document.activeElement!==t)return}}(r)}),onBlur:Ae(e.onBlur,e=>{e.currentTarget.contains(e.target)||(window.clearTimeout(C.current),E.current="")}),onPointerMove:Ae(e.onPointerMove,Wp(e=>{const t=e.target,s=D.current!==e.clientX;if(e.currentTarget.contains(t)&&s){const t=e.clientX>D.current?"right":"left";P.current=t,D.current=e.clientX}}))})})})})})})});up.displayName=lp;var gp=s.forwardRef((e,t)=>{const{__scopeMenu:s,...n}=e;return u.jsx(Ke.div,{role:"group",...n,ref:t})});gp.displayName="MenuGroup";var xp=s.forwardRef((e,t)=>{const{__scopeMenu:s,...n}=e;return u.jsx(Ke.div,{...n,ref:t})});xp.displayName="MenuLabel";var vp="MenuItem",yp="menu.itemSelect",bp=s.forwardRef((e,t)=>{const{disabled:n=!1,onSelect:a,...r}=e,i=s.useRef(null),o=tp(vp,e.__scopeMenu),l=dp(vp,e.__scopeMenu),c=Me(t,i),d=s.useRef(!1);return u.jsx(wp,{...r,ref:c,disabled:n,onClick:Ae(e.onClick,()=>{const e=i.current;if(!n&&e){const t=new CustomEvent(yp,{bubbles:!0,cancelable:!0});e.addEventListener(yp,e=>null==a?void 0:a(e),{once:!0}),Ve(e,t),t.defaultPrevented?d.current=!1:o.onClose()}}),onPointerDown:t=>{var s;null==(s=e.onPointerDown)||s.call(e,t),d.current=!0},onPointerUp:Ae(e.onPointerUp,e=>{var t;d.current||null==(t=e.currentTarget)||t.click()}),onKeyDown:Ae(e.onKeyDown,e=>{const t=""!==l.searchRef.current;n||t&&" "===e.key||Um.includes(e.key)&&(e.currentTarget.click(),e.preventDefault())})})});bp.displayName=vp;var wp=s.forwardRef((e,t)=>{const{__scopeMenu:n,disabled:a=!1,textValue:r,...i}=e,o=dp(vp,n),l=Qm(n),c=s.useRef(null),d=Me(t,c),[h,m]=s.useState(!1),[p,f]=s.useState("");return s.useEffect(()=>{const e=c.current;e&&f((e.textContent??"").trim())},[i.children]),u.jsx(Hm.ItemSlot,{scope:n,disabled:a,textValue:r??p,children:u.jsx(dm,{asChild:!0,...l,focusable:!a,children:u.jsx(Ke.div,{role:"menuitem","data-highlighted":h?"":void 0,"aria-disabled":a||void 0,"data-disabled":a?"":void 0,...i,ref:d,onPointerMove:Ae(e.onPointerMove,Wp(e=>{if(a)o.onItemLeave(e);else if(o.onItemEnter(e),!e.defaultPrevented){e.currentTarget.focus({preventScroll:!0})}})),onPointerLeave:Ae(e.onPointerLeave,Wp(e=>o.onItemLeave(e))),onFocus:Ae(e.onFocus,()=>m(!0)),onBlur:Ae(e.onBlur,()=>m(!1))})})})}),jp=s.forwardRef((e,t)=>{const{checked:s=!1,onCheckedChange:n,...a}=e;return u.jsx(Rp,{scope:e.__scopeMenu,checked:s,children:u.jsx(bp,{role:"menuitemcheckbox","aria-checked":zp(s)?"mixed":s,...a,ref:t,"data-state":Bp(s),onSelect:Ae(a.onSelect,()=>null==n?void 0:n(!!zp(s)||!s),{checkForDefaultPrevented:!1})})})});jp.displayName="MenuCheckboxItem";var Np="MenuRadioGroup",[Sp,_p]=Gm(Np,{value:void 0,onValueChange:()=>{}}),kp=s.forwardRef((e,t)=>{const{value:s,onValueChange:n,...a}=e,r=Ge(n);return u.jsx(Sp,{scope:e.__scopeMenu,value:s,onValueChange:r,children:u.jsx(gp,{...a,ref:t})})});kp.displayName=Np;var Cp="MenuRadioItem",Ep=s.forwardRef((e,t)=>{const{value:s,...n}=e,a=_p(Cp,e.__scopeMenu),r=s===a.value;return u.jsx(Rp,{scope:e.__scopeMenu,checked:r,children:u.jsx(bp,{role:"menuitemradio","aria-checked":r,...n,ref:t,"data-state":Bp(r),onSelect:Ae(n.onSelect,()=>{var e;return null==(e=a.onValueChange)?void 0:e.call(a,s)},{checkForDefaultPrevented:!1})})})});Ep.displayName=Cp;var Tp="MenuItemIndicator",[Rp,Pp]=Gm(Tp,{checked:!1}),Dp=s.forwardRef((e,t)=>{const{__scopeMenu:s,forceMount:n,...a}=e,r=Pp(Tp,s);return u.jsx(lt,{present:n||zp(r.checked)||!0===r.checked,children:u.jsx(Ke.span,{...a,ref:t,"data-state":Bp(r.checked)})})});Dp.displayName=Tp;var Ap=s.forwardRef((e,t)=>{const{__scopeMenu:s,...n}=e;return u.jsx(Ke.div,{role:"separator","aria-orientation":"horizontal",...n,ref:t})});Ap.displayName="MenuSeparator";var Op=s.forwardRef((e,t)=>{const{__scopeMenu:s,...n}=e,a=Ym(s);return u.jsx(Ya,{...a,...n,ref:t})});Op.displayName="MenuArrow";var[Ip,Mp]=Gm("MenuSub"),Lp="MenuSubTrigger",$p=s.forwardRef((e,t)=>{const n=Zm(Lp,e.__scopeMenu),a=tp(Lp,e.__scopeMenu),r=Mp(Lp,e.__scopeMenu),i=dp(Lp,e.__scopeMenu),o=s.useRef(null),{pointerGraceTimerRef:l,onPointerGraceIntentChange:c}=i,d={__scopeMenu:e.__scopeMenu},h=s.useCallback(()=>{o.current&&window.clearTimeout(o.current),o.current=null},[]);return s.useEffect(()=>h,[h]),s.useEffect(()=>{const e=l.current;return()=>{window.clearTimeout(e),c(null)}},[l,c]),u.jsx(np,{asChild:!0,...d,children:u.jsx(wp,{id:r.triggerId,"aria-haspopup":"menu","aria-expanded":n.open,"aria-controls":r.contentId,"data-state":qp(n.open),...e,ref:Ie(t,r.onTriggerChange),onClick:t=>{var s;null==(s=e.onClick)||s.call(e,t),e.disabled||t.defaultPrevented||(t.currentTarget.focus(),n.open||n.onOpenChange(!0))},onPointerMove:Ae(e.onPointerMove,Wp(t=>{i.onItemEnter(t),t.defaultPrevented||e.disabled||n.open||o.current||(i.onPointerGraceIntentChange(null),o.current=window.setTimeout(()=>{n.onOpenChange(!0),h()},100))})),onPointerLeave:Ae(e.onPointerLeave,Wp(e=>{var t,s;h();const a=null==(t=n.content)?void 0:t.getBoundingClientRect();if(a){const t=null==(s=n.content)?void 0:s.dataset.side,r="right"===t,o=r?-5:5,c=a[r?"left":"right"],d=a[r?"right":"left"];i.onPointerGraceIntentChange({area:[{x:e.clientX+o,y:e.clientY},{x:c,y:a.top},{x:d,y:a.top},{x:d,y:a.bottom},{x:c,y:a.bottom}],side:t}),window.clearTimeout(l.current),l.current=window.setTimeout(()=>i.onPointerGraceIntentChange(null),300)}else{if(i.onTriggerLeave(e),e.defaultPrevented)return;i.onPointerGraceIntentChange(null)}})),onKeyDown:Ae(e.onKeyDown,t=>{var s;const r=""!==i.searchRef.current;e.disabled||r&&" "===t.key||zm[a.dir].includes(t.key)&&(n.onOpenChange(!0),null==(s=n.content)||s.focus(),t.preventDefault())})})})});$p.displayName=Lp;var Up="MenuSubContent",Fp=s.forwardRef((e,t)=>{const n=ip(lp,e.__scopeMenu),{forceMount:a=n.forceMount,...r}=e,i=Zm(lp,e.__scopeMenu),o=tp(lp,e.__scopeMenu),l=Mp(Up,e.__scopeMenu),c=s.useRef(null),d=Me(t,c);return u.jsx(Hm.Provider,{scope:e.__scopeMenu,children:u.jsx(lt,{present:a||i.open,children:u.jsx(Hm.Slot,{scope:e.__scopeMenu,children:u.jsx(fp,{id:l.contentId,"aria-labelledby":l.triggerId,...r,ref:d,align:"start",side:"rtl"===o.dir?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:e=>{var t;o.isUsingKeyboardRef.current&&(null==(t=c.current)||t.focus()),e.preventDefault()},onCloseAutoFocus:e=>e.preventDefault(),onFocusOutside:Ae(e.onFocusOutside,e=>{e.target!==l.trigger&&i.onOpenChange(!1)}),onEscapeKeyDown:Ae(e.onEscapeKeyDown,e=>{o.onClose(),e.preventDefault()}),onKeyDown:Ae(e.onKeyDown,e=>{var t;const s=e.currentTarget.contains(e.target),n=Bm[o.dir].includes(e.key);s&&n&&(i.onOpenChange(!1),null==(t=l.trigger)||t.focus(),e.preventDefault())})})})})})});function qp(e){return e?"open":"closed"}function zp(e){return"indeterminate"===e}function Bp(e){return zp(e)?"indeterminate":e?"checked":"unchecked"}function Wp(e){return t=>"mouse"===t.pointerType?e(t):void 0}Fp.displayName=Up;var Hp=sp,Kp=np,Vp=op,Gp=up,Jp=gp,Yp=xp,Qp=bp,Xp=jp,Zp=kp,ef=Ep,tf=Dp,sf=Ap,nf=Op,af=$p,rf=Fp,of="DropdownMenu",[lf,cf]=Le(of,[Jm]),df=Jm(),[uf,hf]=lf(of),mf=e=>{const{__scopeDropdownMenu:t,children:n,dir:a,open:r,defaultOpen:i,onOpenChange:o,modal:l=!0}=e,c=df(t),d=s.useRef(null),[h,m]=ut({prop:r,defaultProp:i??!1,onChange:o,caller:of});return u.jsx(uf,{scope:t,triggerId:Is(),triggerRef:d,contentId:Is(),open:h,onOpenChange:m,onOpenToggle:s.useCallback(()=>m(e=>!e),[m]),modal:l,children:u.jsx(Hp,{...c,open:h,onOpenChange:m,dir:a,modal:l,children:n})})};mf.displayName=of;var pf="DropdownMenuTrigger",ff=s.forwardRef((e,t)=>{const{__scopeDropdownMenu:s,disabled:n=!1,...a}=e,r=hf(pf,s),i=df(s);return u.jsx(Kp,{asChild:!0,...i,children:u.jsx(Ke.button,{type:"button",id:r.triggerId,"aria-haspopup":"menu","aria-expanded":r.open,"aria-controls":r.open?r.contentId:void 0,"data-state":r.open?"open":"closed","data-disabled":n?"":void 0,disabled:n,...a,ref:Ie(t,r.triggerRef),onPointerDown:Ae(e.onPointerDown,e=>{n||0!==e.button||!1!==e.ctrlKey||(r.onOpenToggle(),r.open||e.preventDefault())}),onKeyDown:Ae(e.onKeyDown,e=>{n||(["Enter"," "].includes(e.key)&&r.onOpenToggle(),"ArrowDown"===e.key&&r.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(e.key)&&e.preventDefault())})})})});ff.displayName=pf;var gf=e=>{const{__scopeDropdownMenu:t,...s}=e,n=df(t);return u.jsx(Vp,{...n,...s})};gf.displayName="DropdownMenuPortal";var xf="DropdownMenuContent",vf=s.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...a}=e,r=hf(xf,n),i=df(n),o=s.useRef(!1);return u.jsx(Gp,{id:r.contentId,"aria-labelledby":r.triggerId,...i,...a,ref:t,onCloseAutoFocus:Ae(e.onCloseAutoFocus,e=>{var t;o.current||null==(t=r.triggerRef.current)||t.focus(),o.current=!1,e.preventDefault()}),onInteractOutside:Ae(e.onInteractOutside,e=>{const t=e.detail.originalEvent,s=0===t.button&&!0===t.ctrlKey,n=2===t.button||s;r.modal&&!n||(o.current=!0)}),style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});vf.displayName=xf;s.forwardRef((e,t)=>{const{__scopeDropdownMenu:s,...n}=e,a=df(s);return u.jsx(Jp,{...a,...n,ref:t})}).displayName="DropdownMenuGroup";var yf=s.forwardRef((e,t)=>{const{__scopeDropdownMenu:s,...n}=e,a=df(s);return u.jsx(Yp,{...a,...n,ref:t})});yf.displayName="DropdownMenuLabel";var bf=s.forwardRef((e,t)=>{const{__scopeDropdownMenu:s,...n}=e,a=df(s);return u.jsx(Qp,{...a,...n,ref:t})});bf.displayName="DropdownMenuItem";var wf=s.forwardRef((e,t)=>{const{__scopeDropdownMenu:s,...n}=e,a=df(s);return u.jsx(Xp,{...a,...n,ref:t})});wf.displayName="DropdownMenuCheckboxItem";s.forwardRef((e,t)=>{const{__scopeDropdownMenu:s,...n}=e,a=df(s);return u.jsx(Zp,{...a,...n,ref:t})}).displayName="DropdownMenuRadioGroup";var jf=s.forwardRef((e,t)=>{const{__scopeDropdownMenu:s,...n}=e,a=df(s);return u.jsx(ef,{...a,...n,ref:t})});jf.displayName="DropdownMenuRadioItem";var Nf=s.forwardRef((e,t)=>{const{__scopeDropdownMenu:s,...n}=e,a=df(s);return u.jsx(tf,{...a,...n,ref:t})});Nf.displayName="DropdownMenuItemIndicator";var Sf=s.forwardRef((e,t)=>{const{__scopeDropdownMenu:s,...n}=e,a=df(s);return u.jsx(sf,{...a,...n,ref:t})});Sf.displayName="DropdownMenuSeparator";s.forwardRef((e,t)=>{const{__scopeDropdownMenu:s,...n}=e,a=df(s);return u.jsx(nf,{...a,...n,ref:t})}).displayName="DropdownMenuArrow";var _f=s.forwardRef((e,t)=>{const{__scopeDropdownMenu:s,...n}=e,a=df(s);return u.jsx(af,{...a,...n,ref:t})});_f.displayName="DropdownMenuSubTrigger";var kf=s.forwardRef((e,t)=>{const{__scopeDropdownMenu:s,...n}=e,a=df(s);return u.jsx(rf,{...a,...n,ref:t,style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});kf.displayName="DropdownMenuSubContent";var Cf=gf,Ef=vf,Tf=yf,Rf=bf,Pf=wf,Df=jf,Af=Nf,Of=Sf,If=_f,Mf=kf;const Lf=mf,$f=ff;s.forwardRef(({className:e,inset:t,children:s,...n},a)=>u.jsxs(If,{ref:a,className:hs("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",t&&"pl-8",e),...n,children:[s,u.jsx(I,{className:"ml-auto h-4 w-4"})]})).displayName=If.displayName;s.forwardRef(({className:e,...t},s)=>u.jsx(Mf,{ref:s,className:hs("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...t})).displayName=Mf.displayName;const Uf=s.forwardRef(({className:e,sideOffset:t=4,...s},n)=>u.jsx(Cf,{children:u.jsx(Ef,{ref:n,sideOffset:t,className:hs("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...s})}));Uf.displayName=Ef.displayName;const Ff=s.forwardRef(({className:e,inset:t,...s},n)=>u.jsx(Rf,{ref:n,className:hs("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t&&"pl-8",e),...s}));Ff.displayName=Rf.displayName;s.forwardRef(({className:e,children:t,checked:s,...n},a)=>u.jsxs(Pf,{ref:a,className:hs("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),checked:s,...n,children:[u.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:u.jsx(Af,{children:u.jsx(j,{className:"h-4 w-4"})})}),t]})).displayName=Pf.displayName;s.forwardRef(({className:e,children:t,...s},n)=>u.jsxs(Df,{ref:n,className:hs("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...s,children:[u.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:u.jsx(Af,{children:u.jsx(ee,{className:"h-2 w-2 fill-current"})})}),t]})).displayName=Df.displayName;s.forwardRef(({className:e,inset:t,...s},n)=>u.jsx(Tf,{ref:n,className:hs("px-2 py-1.5 text-sm font-semibold",t&&"pl-8",e),...s})).displayName=Tf.displayName;const qf=s.forwardRef(({className:e,...t},s)=>u.jsx(Of,{ref:s,className:hs("-mx-1 my-1 h-px bg-muted",e),...t}));function zf({toggleSidebar:e}){const[t,n]=s.useState(""),[a,r]=s.useState(!1);s.useEffect(()=>{const e=localStorage.getItem("theme"),t=window.matchMedia("(prefers-color-scheme: dark)").matches,s="dark"===e||!e&&t;r(s),s?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")},[]);const[i,o]=s.useState(!1),[l,c]=s.useState([]),[d,h]=s.useState({status:"operational",uptime:"99.9%",activeUsers:0}),p=l.filter(e=>e.unread).length;s.useEffect(()=>{(async()=>{var e;try{const t=await yc.getNotifications(),s=((null==(e=t.data)?void 0:e.notifications)||[]).slice(0,5).map((e,t)=>({id:e.id||t,title:e.title||e.message||"New notification",time:e.createdAt?new Date(e.createdAt).toLocaleDateString():"Recent",unread:!1!==e.unread}));c(s)}catch(t){c([])}})(),(async()=>{try{const e=(await yc.getUserStats()).data||{};h(t=>({...t,activeUsers:e.totalUsers||0}))}catch(e){}})()},[]);const f=e=>{switch(e){case"refresh":Ss.success("System refreshed"),window.location.reload();break;case"export":Ss.success("Export initiated");break;case"settings":Ss.success("Opening settings");break;case"logout":Ss.success("Logging out...");break;default:Ss.success(`${e} executed`)}};return s.useEffect(()=>{const e=setInterval(()=>{h(e=>({...e,activeUsers:e.activeUsers+Math.floor(10*Math.random())-5}))},3e4);return()=>clearInterval(e)},[]),u.jsxs("header",{className:"relative bg-white/95 backdrop-blur-xl border-b border-white/20 shadow-lg shadow-blue-500/5",children:[u.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-50/50 via-white to-purple-50/50 pointer-events-none"}),u.jsx("div",{className:"relative px-6 py-4",children:u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{className:"flex items-center space-x-6",children:[u.jsx(Hl,{variant:"ghost",size:"sm",onClick:e,className:"lg:hidden hover:bg-blue-50 rounded-xl p-2 transition-all duration-200",children:u.jsx(m,{className:"h-5 w-5 text-slate-600"})}),u.jsxs("form",{onSubmit:e=>{e.preventDefault(),t.trim()&&Ss.success(`Searching for: ${t}`)},className:"relative",children:[u.jsx(q,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-slate-400 h-4 w-4"}),u.jsx(Zl,{value:t,onChange:e=>n(e.target.value),placeholder:"Search users, claims, consultations...",className:"pl-11 pr-4 w-80 bg-white/60 border-white/20 rounded-xl \n                         focus:bg-white focus:border-blue-300 focus:ring-2 focus:ring-blue-100\n                         placeholder:text-slate-400 text-slate-700 font-medium\n                         transition-all duration-200"}),t&&u.jsx(Hl,{type:"submit",size:"sm",className:"absolute right-2 top-1/2 transform -translate-y-1/2 h-7 px-3 \n                           bg-gradient-to-r from-blue-500 to-purple-500 hover:from-blue-600 hover:to-purple-600\n                           text-white rounded-lg text-xs font-medium transition-all duration-200",children:"Search"})]}),u.jsxs("div",{className:"hidden md:flex items-center space-x-2",children:[u.jsxs("div",{className:"flex items-center space-x-1.5",children:[u.jsx("div",{className:"w-2 h-2 rounded-full animate-pulse "+("operational"===d.status?"bg-green-400":"bg-red-400")}),u.jsx("span",{className:"text-xs font-medium text-slate-600",children:"operational"===d.status?"All Systems Operational":"Issues Detected"})]}),u.jsxs(bu,{variant:"secondary",className:"text-xs bg-blue-50 text-blue-700",children:[d.activeUsers," active"]})]})]}),u.jsxs("div",{className:"flex items-center space-x-3",children:[u.jsxs("div",{className:"hidden lg:flex items-center space-x-1",children:[u.jsx(Hl,{variant:"ghost",size:"sm",onClick:()=>f("refresh"),className:"h-9 w-9 rounded-xl hover:bg-blue-50 text-slate-600 hover:text-blue-600 transition-all duration-200",title:"Refresh System",children:u.jsx(L,{className:"h-4 w-4"})}),u.jsx(Hl,{variant:"ghost",size:"sm",onClick:()=>f("export"),className:"h-9 w-9 rounded-xl hover:bg-green-50 text-slate-600 hover:text-green-600 transition-all duration-200",title:"Export Data",children:u.jsx(M,{className:"h-4 w-4"})}),u.jsx(Hl,{variant:"ghost",size:"sm",onClick:()=>{const e=!a;r(e),e?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark"),localStorage.setItem("theme",e?"dark":"light"),Ss.success(`Switched to ${e?"dark":"light"} mode`)},className:"h-9 w-9 rounded-xl hover:bg-yellow-50 text-slate-600 hover:text-yellow-600 transition-all duration-200",title:"Toggle Theme",children:a?u.jsx(te,{className:"h-4 w-4"}):u.jsx(se,{className:"h-4 w-4"})}),u.jsx(Hl,{variant:"ghost",size:"sm",onClick:()=>{document.fullscreenElement?(document.exitFullscreen(),o(!1),Ss.success("Exited fullscreen mode")):(document.documentElement.requestFullscreen(),o(!0),Ss.success("Entered fullscreen mode"))},className:"h-9 w-9 rounded-xl hover:bg-purple-50 text-slate-600 hover:text-purple-600 transition-all duration-200",title:"Toggle Fullscreen",children:i?u.jsx(ne,{className:"h-4 w-4"}):u.jsx(ae,{className:"h-4 w-4"})})]}),u.jsxs(Lf,{children:[u.jsx($f,{asChild:!0,children:u.jsxs(Hl,{variant:"ghost",size:"sm",className:"relative h-10 w-10 rounded-xl hover:bg-red-50 text-slate-600 hover:text-red-600 transition-all duration-200",children:[u.jsx(X,{className:"h-5 w-5"}),p>0&&u.jsx(bu,{className:"absolute -top-1 -right-1 h-5 w-5 p-0 flex items-center justify-center \n                               bg-gradient-to-r from-red-500 to-pink-500 text-white text-xs rounded-full\n                               animate-pulse shadow-lg",children:p})]})}),u.jsxs(Uf,{align:"end",className:"w-80 bg-white/95 backdrop-blur-xl border-white/20 shadow-xl",children:[u.jsxs("div",{className:"p-3 border-b border-slate-100",children:[u.jsx("h3",{className:"font-semibold text-slate-800",children:"Notifications"}),u.jsxs("p",{className:"text-xs text-slate-500",children:[p," unread messages"]})]}),l.map(e=>u.jsx(Ff,{className:"p-3 cursor-pointer hover:bg-blue-50",onClick:()=>{return t=e.id,void c(e=>e.map(e=>e.id===t?{...e,unread:!1}:e));var t},children:u.jsxs("div",{className:"flex items-start space-x-3",children:[u.jsx("div",{className:"w-2 h-2 rounded-full mt-2 "+(e.unread?"bg-blue-500":"bg-slate-300")}),u.jsxs("div",{className:"flex-1",children:[u.jsx("p",{className:"text-sm font-medium text-slate-800",children:e.title}),u.jsx("p",{className:"text-xs text-slate-500",children:e.time})]})]})},e.id)),u.jsx(Ff,{className:"p-3 text-center text-blue-600 hover:bg-blue-50 font-medium",children:"View All Notifications"})]})]}),u.jsxs(Lf,{children:[u.jsx($f,{asChild:!0,children:u.jsxs(Hl,{variant:"ghost",className:"flex items-center space-x-2 h-10 px-3 rounded-xl hover:bg-slate-50 transition-all duration-200",children:[u.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full flex items-center justify-center shadow-lg",children:u.jsx(H,{className:"h-4 w-4 text-white"})}),u.jsxs("div",{className:"hidden sm:block text-left",children:[u.jsx("span",{className:"text-sm font-semibold text-slate-700",children:"Admin User"}),u.jsx("p",{className:"text-xs text-slate-500",children:"Super Admin"})]})]})}),u.jsxs(Uf,{align:"end",className:"w-56 bg-white/95 backdrop-blur-xl border-white/20 shadow-xl",children:[u.jsxs("div",{className:"p-3 border-b border-slate-100",children:[u.jsx("p",{className:"font-medium text-slate-800",children:"Admin User"}),u.jsx("p",{className:"text-sm text-slate-500",children:"admin@galloways.com"})]}),u.jsxs(Ff,{className:"flex items-center space-x-2 p-3 hover:bg-blue-50 cursor-pointer",onClick:()=>f("profile"),children:[u.jsx(H,{className:"h-4 w-4"}),u.jsx("span",{children:"Profile Settings"})]}),u.jsxs(Ff,{className:"flex items-center space-x-2 p-3 hover:bg-slate-50 cursor-pointer",onClick:()=>f("settings"),children:[u.jsx(Z,{className:"h-4 w-4"}),u.jsx("span",{children:"System Settings"})]}),u.jsxs(Ff,{className:"flex items-center space-x-2 p-3 hover:bg-green-50 cursor-pointer",children:[u.jsx(re,{className:"h-4 w-4"}),u.jsx("span",{children:"Activity Log"})]}),u.jsxs(Ff,{className:"flex items-center space-x-2 p-3 hover:bg-purple-50 cursor-pointer",children:[u.jsx(T,{className:"h-4 w-4"}),u.jsx("span",{children:"Security"})]}),u.jsx(qf,{}),u.jsxs(Ff,{className:"flex items-center space-x-2 p-3 hover:bg-red-50 text-red-600 cursor-pointer",onClick:()=>f("logout"),children:[u.jsx(S,{className:"h-4 w-4"}),u.jsx("span",{children:"Sign Out"})]})]})]})]})]})}),u.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-px bg-gradient-to-r from-transparent via-blue-200 to-transparent"})]})}qf.displayName=Of.displayName;var Bf="Switch",[Wf,Hf]=Le(Bf),[Kf,Vf]=Wf(Bf),Gf=s.forwardRef((e,t)=>{const{__scopeSwitch:n,name:a,checked:r,defaultChecked:i,required:o,disabled:l,value:c="on",onCheckedChange:d,form:h,...m}=e,[p,f]=s.useState(null),g=Me(t,e=>f(e)),x=s.useRef(!1),v=!p||(h||!!p.closest("form")),[y,b]=ut({prop:r,defaultProp:i??!1,onChange:d,caller:Bf});return u.jsxs(Kf,{scope:n,checked:y,disabled:l,children:[u.jsx(Ke.button,{type:"button",role:"switch","aria-checked":y,"aria-required":o,"data-state":Xf(y),"data-disabled":l?"":void 0,disabled:l,value:c,...m,ref:g,onClick:Ae(e.onClick,e=>{b(e=>!e),v&&(x.current=e.isPropagationStopped(),x.current||e.stopPropagation())})}),v&&u.jsx(Qf,{control:p,bubbles:!x.current,name:a,value:c,checked:y,required:o,disabled:l,form:h,style:{transform:"translateX(-100%)"}})]})});Gf.displayName=Bf;var Jf="SwitchThumb",Yf=s.forwardRef((e,t)=>{const{__scopeSwitch:s,...n}=e,a=Vf(Jf,s);return u.jsx(Ke.span,{"data-state":Xf(a.checked),"data-disabled":a.disabled?"":void 0,...n,ref:t})});Yf.displayName=Jf;var Qf=s.forwardRef(({__scopeSwitch:e,control:t,checked:n,bubbles:a=!0,...r},i)=>{const o=s.useRef(null),l=Me(o,i),c=Su(n),d=Ea(t);return s.useEffect(()=>{const e=o.current;if(!e)return;const t=window.HTMLInputElement.prototype,s=Object.getOwnPropertyDescriptor(t,"checked").set;if(c!==n&&s){const t=new Event("click",{bubbles:a});s.call(e,n),e.dispatchEvent(t)}},[c,n,a]),u.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:n,...r,tabIndex:-1,ref:l,style:{...r.style,...d,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});function Xf(e){return e?"checked":"unchecked"}Qf.displayName="SwitchBubbleInput";var Zf=Gf,eg=Yf;const tg=s.forwardRef(({className:e,...t},s)=>u.jsx(Zf,{className:hs("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",e),...t,ref:s,children:u.jsx(eg,{className:hs("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));function sg(){const[e,t]=s.useState({totalUsers:0,totalClaims:0,totalConsultations:0,totalPayments:0,totalQuotes:0,totalOutsourcingRequests:0,totalDiasporaRequests:0,totalRevenue:0,monthlyRevenue:0,conversionRate:0,userGrowthRate:0,claimsGrowthRate:0,quoteGrowthRate:0,revenueGrowthRate:0,lastUpdated:(new Date).toISOString()}),[n,a]=s.useState([]),[r,i]=s.useState(!0),[o,l]=s.useState(new Date),[c,d]=s.useState("connecting"),[h,m]=s.useState(!0),[p,f]=s.useState(30),[g,x]=s.useState(!0),v=s.useRef([]),y=s.useRef(),{toast:b}=De(),w=s.useCallback(async(e=!0)=>{i(!0),d("connecting");try{const[s,n]=await Promise.all([yc.getSystemMetrics(),vc.getActivities()]);if(!s.success)throw new Error(s.error||"Failed to fetch metrics");t(s.data),d("connected"),n.success&&a(n.data||[]),l(new Date),e&&b({title:"Dashboard Updated",description:`Data refreshed at ${(new Date).toLocaleTimeString()}`})}catch(s){d("disconnected"),b({title:"Connection Error",description:s.message||"Failed to fetch dashboard data",variant:"destructive"})}finally{i(!1)}},[b]),j=s.useCallback(e=>{const t=e.eventType||"UPDATE",s=e.table||"Unknown";Ss.info(`Real-time update: ${t} in ${s}`,{duration:3e3}),w(!1)},[w]),S=s.useCallback(()=>{if(g)try{const e=yc.subscribeToRealTimeUpdates(e=>{try{j(e)}catch(t){}});if(!(e&&e.length>0))throw new Error("Failed to create real-time channels");v.current=e,b({title:"Real-time Connected",description:"Dashboard will update automatically"})}catch(e){x(!1),m(!0),b({title:"Real-time Unavailable",description:"Using auto-refresh mode instead",variant:"destructive"})}},[g,j,b]),_=s.useCallback(()=>{h&&(y.current=setInterval(()=>{w(!1)},1e3*p))},[h,p,w]);s.useEffect(()=>(w(!0),g&&S(),h&&_(),()=>{v.current.length>0&&yc.unsubscribeFromRealTimeUpdates(v.current),y.current&&clearInterval(y.current)}),[]),s.useEffect(()=>{y.current&&clearInterval(y.current),h&&_()},[h,p,_]),s.useEffect(()=>{g?S():v.current.length>0&&(yc.unsubscribeFromRealTimeUpdates(v.current),v.current=[])},[g,S]);const C=e=>e>=1e6?`${(e/1e6).toFixed(1)}M`:e>=1e3?`${(e/1e3).toFixed(1)}K`:e.toString();return r?u.jsx("div",{className:"flex items-center justify-center h-64",children:u.jsxs("div",{className:"text-center",children:[u.jsx(L,{className:"h-8 w-8 animate-spin text-primary mx-auto mb-4"}),u.jsx("p",{className:"text-muted-foreground",children:"Loading dashboard data..."})]})}):u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{children:[u.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Admin Dashboard"}),u.jsxs("p",{className:"text-muted-foreground",children:["Real-time overview of your platform  Last updated: ",o.toLocaleTimeString()]})]}),u.jsxs("div",{className:"flex items-center space-x-4",children:[u.jsxs("div",{className:"flex items-center space-x-2",children:["connected"===c?u.jsx(V,{className:"h-4 w-4 text-green-500"}):"connecting"===c?u.jsx(L,{className:"h-4 w-4 text-yellow-500 animate-spin"}):u.jsx(G,{className:"h-4 w-4 text-red-500"}),u.jsx("span",{className:"text-sm capitalize",children:c})]}),u.jsxs("div",{className:"flex items-center space-x-2",children:[u.jsx(tg,{checked:g,onCheckedChange:x}),u.jsx("span",{className:"text-sm",children:"Real-time"})]}),u.jsxs("div",{className:"flex items-center space-x-2",children:[u.jsx(tg,{checked:h,onCheckedChange:m}),u.jsx("span",{className:"text-sm",children:"Auto-refresh"})]}),u.jsxs(Fh,{value:p.toString(),onValueChange:e=>f(Number(e)),children:[u.jsx(zh,{className:"w-20",children:u.jsx(qh,{})}),u.jsxs(Hh,{children:[u.jsx(Kh,{value:"15",children:"15s"}),u.jsx(Kh,{value:"30",children:"30s"}),u.jsx(Kh,{value:"60",children:"1m"}),u.jsx(Kh,{value:"300",children:"5m"})]})]}),u.jsxs(Hl,{onClick:()=>w(!0),size:"sm",children:[u.jsx(L,{className:"h-4 w-4 mr-2"}),"Refresh"]}),u.jsxs(Hl,{onClick:async()=>{try{const e=await yc.exportData("activities",{dateFrom:new Date(Date.now()-2592e6).toISOString()});if(e.success){const t=[["Type","Description","Entity Type","Created At"],...(e.data||[]).map(e=>[e.type,e.description,e.entity_type,new Date(e.created_at).toLocaleString()])].map(e=>e.map(e=>`"${e}"`).join(",")).join("\n"),s=new Blob([t],{type:"text/csv"}),n=window.URL.createObjectURL(s),a=document.createElement("a");a.href=n,a.download=`dashboard-export-${(new Date).toISOString().split("T")[0]}.csv`,document.body.appendChild(a),a.click(),document.body.removeChild(a),window.URL.revokeObjectURL(n),b({title:"Export Complete",description:"Dashboard data exported successfully"})}}catch(e){b({title:"Export Failed",description:"Could not export dashboard data",variant:"destructive"})}},variant:"outline",size:"sm",children:[u.jsx(M,{className:"h-4 w-4 mr-2"}),"Export"]})]})]}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[u.jsxs(Gl,{className:"hover:shadow-lg transition-shadow",children:[u.jsxs(Jl,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[u.jsx(Yl,{className:"text-sm font-medium",children:"Total Users"}),u.jsx(k,{className:"h-4 w-4 text-blue-600"})]}),u.jsxs(Xl,{children:[u.jsx("div",{className:"text-2xl font-bold",children:C(e.totalUsers)}),u.jsxs("div",{className:"flex items-center text-xs text-muted-foreground",children:[u.jsx(ie,{className:"h-3 w-3 text-green-500 mr-1"}),"+",e.userGrowthRate.toFixed(1),"% from last month"]})]})]}),u.jsxs(Gl,{className:"hover:shadow-lg transition-shadow",children:[u.jsxs(Jl,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[u.jsx(Yl,{className:"text-sm font-medium",children:"Total Claims"}),u.jsx(T,{className:"h-4 w-4 text-green-600"})]}),u.jsxs(Xl,{children:[u.jsx("div",{className:"text-2xl font-bold",children:C(e.totalClaims)}),u.jsxs("div",{className:"flex items-center text-xs text-muted-foreground",children:[u.jsx(ie,{className:"h-3 w-3 text-green-500 mr-1"}),"+",e.claimsGrowthRate.toFixed(1),"% from last month"]})]})]}),u.jsxs(Gl,{className:"hover:shadow-lg transition-shadow",children:[u.jsxs(Jl,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[u.jsx(Yl,{className:"text-sm font-medium",children:"Total Revenue"}),u.jsx(A,{className:"h-4 w-4 text-purple-600"})]}),u.jsxs(Xl,{children:[u.jsx("div",{className:"text-2xl font-bold",children:(E=e.totalRevenue,new Intl.NumberFormat("en-KE",{style:"currency",currency:"KES"}).format(E))}),u.jsxs("div",{className:"flex items-center text-xs text-muted-foreground",children:[u.jsx(ie,{className:"h-3 w-3 text-green-500 mr-1"}),"+",e.revenueGrowthRate.toFixed(1),"% from last month"]})]})]}),u.jsxs(Gl,{className:"hover:shadow-lg transition-shadow",children:[u.jsxs(Jl,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[u.jsx(Yl,{className:"text-sm font-medium",children:"Conversion Rate"}),u.jsx(oe,{className:"h-4 w-4 text-orange-600"})]}),u.jsxs(Xl,{children:[u.jsxs("div",{className:"text-2xl font-bold",children:[e.conversionRate.toFixed(1),"%"]}),u.jsxs("div",{className:"flex items-center text-xs text-muted-foreground",children:[u.jsx(le,{className:"h-3 w-3 text-green-500 mr-1"}),"Quotes to Claims ratio"]})]})]})]}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[u.jsxs(Gl,{children:[u.jsx(Jl,{children:u.jsxs(Yl,{className:"flex items-center",children:[u.jsx(N,{className:"mr-2 h-5 w-5"}),"Consultations"]})}),u.jsxs(Xl,{children:[u.jsx("div",{className:"text-3xl font-bold text-blue-600",children:e.totalConsultations}),u.jsx("p",{className:"text-sm text-muted-foreground",children:"Active consultation bookings"})]})]}),u.jsxs(Gl,{children:[u.jsx(Jl,{children:u.jsxs(Yl,{className:"flex items-center",children:[u.jsx(O,{className:"mr-2 h-5 w-5"}),"Diaspora Services"]})}),u.jsxs(Xl,{children:[u.jsx("div",{className:"text-3xl font-bold text-green-600",children:e.totalDiasporaRequests}),u.jsx("p",{className:"text-sm text-muted-foreground",children:"International service requests"})]})]}),u.jsxs(Gl,{children:[u.jsx(Jl,{children:u.jsxs(Yl,{className:"flex items-center",children:[u.jsx(ce,{className:"mr-2 h-5 w-5"}),"Outsourcing"]})}),u.jsxs(Xl,{children:[u.jsx("div",{className:"text-3xl font-bold text-purple-600",children:e.totalOutsourcingRequests}),u.jsx("p",{className:"text-sm text-muted-foreground",children:"Outsourcing project requests"})]})]})]}),u.jsxs(Gl,{children:[u.jsx(Jl,{children:u.jsxs(Yl,{className:"flex items-center",children:[u.jsx(re,{className:"mr-2 h-5 w-5"}),"Recent Activity"]})}),u.jsx(Xl,{children:u.jsxs("div",{className:"space-y-4",children:[n.slice(0,10).map(e=>u.jsxs("div",{className:"flex items-center justify-between p-3 bg-muted/50 rounded-lg",children:[u.jsxs("div",{className:"flex items-center space-x-3",children:[u.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full"}),u.jsxs("div",{children:[u.jsx("p",{className:"font-medium text-sm",children:e.type}),u.jsx("p",{className:"text-sm text-muted-foreground",children:e.description})]})]}),u.jsxs("div",{className:"text-right",children:[u.jsx(bu,{variant:"outline",className:"text-xs",children:e.entity_type}),u.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:new Date(e.created_at).toLocaleString()})]})]},e.id)),0===n.length&&u.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No recent activity found"})]})})]})]});var E}tg.displayName=Zf.displayName;const ng=s.forwardRef(({className:e,...t},s)=>u.jsx("div",{className:"relative w-full overflow-auto",children:u.jsx("table",{ref:s,className:hs("w-full caption-bottom text-sm",e),...t})}));ng.displayName="Table";const ag=s.forwardRef(({className:e,...t},s)=>u.jsx("thead",{ref:s,className:hs("[&_tr]:border-b",e),...t}));ag.displayName="TableHeader";const rg=s.forwardRef(({className:e,...t},s)=>u.jsx("tbody",{ref:s,className:hs("[&_tr:last-child]:border-0",e),...t}));rg.displayName="TableBody";s.forwardRef(({className:e,...t},s)=>u.jsx("tfoot",{ref:s,className:hs("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",e),...t})).displayName="TableFooter";const ig=s.forwardRef(({className:e,...t},s)=>u.jsx("tr",{ref:s,className:hs("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",e),...t}));ig.displayName="TableRow";const og=s.forwardRef(({className:e,...t},s)=>u.jsx("th",{ref:s,className:hs("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",e),...t}));og.displayName="TableHead";const lg=s.forwardRef(({className:e,...t},s)=>u.jsx("td",{ref:s,className:hs("p-4 align-middle [&:has([role=checkbox])]:pr-0",e),...t}));lg.displayName="TableCell";function cg(){const[e,t]=s.useState([]),[n,a]=s.useState(!0),[r,i]=s.useState(""),[o,l]=s.useState(1),[c,d]=s.useState(1),{toast:h}=De();s.useEffect(()=>{m()},[r,o]);const m=async()=>{try{a(!0);const e=await yc.getAllUsers(o,20);e.success?(t(e.data.users),d(e.data.pagination.totalPages)):h({title:"Error",description:e.message||"Failed to fetch users.",variant:"destructive"})}catch(e){h({title:"Error",description:"Failed to fetch users.",variant:"destructive"})}finally{a(!1)}},p=e=>{switch(e){case"ADMIN":return"bg-red-100 text-red-800";case"SUPER_ADMIN":return"bg-purple-100 text-purple-800";default:return"bg-gray-100 text-gray-800"}};return n?u.jsx("div",{className:"flex items-center justify-center h-64",children:u.jsx(L,{className:"h-8 w-8 animate-spin text-blue-600"})}):u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"User Management"}),u.jsxs("div",{className:"flex space-x-2",children:[u.jsxs(Hl,{variant:"outline",size:"sm",onClick:async()=>{try{const e=await yc.exportData("users","json");if(e.success){const t=Object.keys(e.data.records[0]||{}).join(","),s=e.data.records.map(e=>Object.values(e).join(",")).join("\n"),n=new Blob([t+"\n"+s],{type:"text/csv"}),a=window.URL.createObjectURL(n),r=document.createElement("a");r.href=a,r.download=`users-export-${(new Date).toISOString().split("T")[0]}.csv`,document.body.appendChild(r),r.click(),document.body.removeChild(r),window.URL.revokeObjectURL(a),h({title:"Export Complete",description:"Users data has been downloaded."})}}catch(e){h({title:"Export Failed",description:"Failed to export users data.",variant:"destructive"})}},children:[u.jsx(M,{className:"h-4 w-4 mr-2"}),"Export"]}),u.jsxs(Hl,{size:"sm",onClick:()=>h({title:"Feature Not Available",description:"Add user functionality will be implemented soon."}),children:[u.jsx(de,{className:"h-4 w-4 mr-2"}),"Add User"]})]})]}),u.jsxs(Gl,{children:[u.jsx(Jl,{children:u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx(Yl,{children:"Users"}),u.jsxs("div",{className:"flex items-center space-x-2",children:[u.jsxs("div",{className:"relative",children:[u.jsx(q,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),u.jsx(Zl,{placeholder:"Search users...",value:r,onChange:e=>i(e.target.value),className:"pl-10 w-64"})]}),u.jsx(Hl,{onClick:m,variant:"outline",size:"sm",children:u.jsx(L,{className:"h-4 w-4"})})]})]})}),u.jsxs(Xl,{children:[u.jsxs(ng,{children:[u.jsx(ag,{children:u.jsxs(ig,{children:[u.jsx(og,{children:"Name"}),u.jsx(og,{children:"Email"}),u.jsx(og,{children:"Role"}),u.jsx(og,{children:"Status"}),u.jsx(og,{children:"Payments"}),u.jsx(og,{children:"Claims"}),u.jsx(og,{children:"Joined"}),u.jsx(og,{children:"Actions"})]})}),u.jsx(rg,{children:e.map(e=>{var t,s;return u.jsxs(ig,{children:[u.jsx(lg,{className:"font-medium",children:e.name}),u.jsx(lg,{children:e.email}),u.jsx(lg,{children:u.jsx(bu,{className:p(e.role),children:e.role})}),u.jsx(lg,{children:u.jsxs(Fh,{onValueChange:t=>(async(e,t)=>{try{const s=await yc.updateUserStatus(e,t);s.success?(h({title:"Success",description:`User status updated to ${t}.`}),m()):h({title:"Error",description:s.message||"Failed to update user status.",variant:"destructive"})}catch(s){h({title:"Error",description:"Failed to update user status.",variant:"destructive"})}})(e.id,t),children:[u.jsx(zh,{className:"w-32",children:u.jsx(qh,{placeholder:"Update Status"})}),u.jsxs(Hh,{children:[u.jsx(Kh,{value:"active",children:"Active"}),u.jsx(Kh,{value:"suspended",children:"Suspended"}),u.jsx(Kh,{value:"inactive",children:"Inactive"})]})]})}),u.jsx(lg,{children:(null==(t=e._count)?void 0:t.payments)||0}),u.jsx(lg,{children:(null==(s=e._count)?void 0:s.claims)||0}),u.jsx(lg,{children:new Date(e.createdAt).toLocaleDateString()}),u.jsx(lg,{children:u.jsxs("div",{className:"flex space-x-2",children:[u.jsx(Hl,{variant:"outline",size:"sm",children:u.jsx(U,{className:"h-4 w-4"})}),u.jsx(Hl,{variant:"outline",size:"sm",onClick:()=>(async()=>{if(confirm("Are you sure you want to delete this user?"))try{h({title:"Feature Not Available",description:"User deletion is not currently available.",variant:"destructive"})}catch(e){h({title:"Error",description:"Failed to delete user.",variant:"destructive"})}})(e.id),className:"text-red-600 hover:text-red-700",children:u.jsx(W,{className:"h-4 w-4"})})]})})]},e.id)})})]}),u.jsxs("div",{className:"flex items-center justify-between mt-4",children:[u.jsxs("div",{className:"text-sm text-gray-500",children:["Showing ",e.length," users"]}),u.jsxs("div",{className:"flex space-x-2",children:[u.jsx(Hl,{variant:"outline",size:"sm",disabled:1===o,onClick:()=>l(o-1),children:"Previous"}),u.jsxs("span",{className:"px-3 py-1 text-sm",children:["Page ",o," of ",c]}),u.jsx(Hl,{variant:"outline",size:"sm",disabled:o===c,onClick:()=>l(o+1),children:"Next"})]})]})]})]})]})}function dg(){const[e,t]=s.useState([]),[n,a]=s.useState(null),[r,i]=s.useState(!0),[o,l]=s.useState(""),[c,d]=s.useState(1),[h,m]=s.useState(1);De(),s.useEffect(()=>{p(),f()},[o,c]);const p=async()=>{try{i(!0);const e=await yc.getAllPayments(c,20);if(e.success){let s=e.data;o.trim()&&(s=e.data.filter(e=>{var t,s,n;return(null==(t=e.reference)?void 0:t.toLowerCase().includes(o.toLowerCase()))||(null==(s=e.amount)?void 0:s.toString().includes(o))||(null==(n=e.status)?void 0:n.toLowerCase().includes(o.toLowerCase()))})),t(s),m(Math.ceil((e.count||0)/20))}}catch(e){}finally{i(!1)}},f=async()=>{try{const e=await yc.getPaymentStats();e.success&&a(e.data)}catch(e){}},g=e=>{switch(e){case"COMPLETED":return"bg-green-100 text-green-800";case"PENDING":return"bg-yellow-100 text-yellow-800";case"FAILED":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}};return r&&!e.length?u.jsx("div",{className:"flex items-center justify-center h-64",children:u.jsx(L,{className:"h-8 w-8 animate-spin text-blue-600"})}):u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Payment Management"}),u.jsx("div",{className:"flex space-x-2",children:u.jsxs(Hl,{variant:"outline",size:"sm",children:[u.jsx(M,{className:"h-4 w-4 mr-2"}),"Export"]})})]}),n&&u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[u.jsxs(Gl,{children:[u.jsxs(Jl,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[u.jsx(Yl,{className:"text-sm font-medium",children:"Total Revenue"}),u.jsx(_,{className:"h-4 w-4 text-green-600"})]}),u.jsx(Xl,{children:u.jsxs("div",{className:"text-2xl font-bold",children:["KES ",(n.totalRevenue||0).toLocaleString()]})})]}),u.jsxs(Gl,{children:[u.jsxs(Jl,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[u.jsx(Yl,{className:"text-sm font-medium",children:"Monthly Revenue"}),u.jsx(le,{className:"h-4 w-4 text-blue-600"})]}),u.jsx(Xl,{children:u.jsxs("div",{className:"text-2xl font-bold",children:["KES ",(n.monthlyRevenue||0).toLocaleString()]})})]}),u.jsxs(Gl,{children:[u.jsxs(Jl,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[u.jsx(Yl,{className:"text-sm font-medium",children:"Success Rate"}),u.jsx(le,{className:"h-4 w-4 text-purple-600"})]}),u.jsx(Xl,{children:u.jsx("div",{className:"text-2xl font-bold",children:"92%"})})]})]}),u.jsxs(Gl,{children:[u.jsx(Jl,{children:u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx(Yl,{children:"Recent Payments"}),u.jsxs("div",{className:"flex items-center space-x-2",children:[u.jsxs("div",{className:"relative",children:[u.jsx(q,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),u.jsx(Zl,{placeholder:"Search payments...",value:o,onChange:e=>l(e.target.value),className:"pl-10 w-64"})]}),u.jsx(Hl,{onClick:p,variant:"outline",size:"sm",children:u.jsx(L,{className:"h-4 w-4"})})]})]})}),u.jsxs(Xl,{children:[u.jsxs(ng,{children:[u.jsx(ag,{children:u.jsxs(ig,{children:[u.jsx(og,{children:"Transaction ID"}),u.jsx(og,{children:"User"}),u.jsx(og,{children:"Amount"}),u.jsx(og,{children:"Status"}),u.jsx(og,{children:"Method"}),u.jsx(og,{children:"Date"}),u.jsx(og,{children:"Actions"})]})}),u.jsx(rg,{children:e.map(e=>u.jsxs(ig,{children:[u.jsx(lg,{className:"font-mono text-sm",children:e.transactionId}),u.jsx(lg,{children:e.user?u.jsxs("div",{children:[u.jsx("div",{className:"font-medium",children:e.user.name}),u.jsx("div",{className:"text-sm text-gray-500",children:e.user.email})]}):u.jsx("div",{className:"text-sm text-gray-500",children:e.email})}),u.jsxs(lg,{children:["KES ",e.amount.toLocaleString()]}),u.jsx(lg,{children:u.jsx(bu,{className:g(e.status),children:e.status})}),u.jsx(lg,{children:e.method||"N/A"}),u.jsx(lg,{children:new Date(e.createdAt).toLocaleDateString()}),u.jsx(lg,{children:u.jsx(Hl,{variant:"outline",size:"sm",children:u.jsx(U,{className:"h-4 w-4"})})})]},e.id))})]}),u.jsxs("div",{className:"flex items-center justify-between mt-4",children:[u.jsxs("div",{className:"text-sm text-gray-500",children:["Showing ",e.length," payments"]}),u.jsxs("div",{className:"flex space-x-2",children:[u.jsx(Hl,{variant:"outline",size:"sm",disabled:1===c,onClick:()=>d(c-1),children:"Previous"}),u.jsxs("span",{className:"px-3 py-1 text-sm",children:["Page ",c," of ",h]}),u.jsx(Hl,{variant:"outline",size:"sm",disabled:c===h,onClick:()=>d(c+1),children:"Next"})]})]})]})]})]})}function ug(){const[e,t]=s.useState([]),[n,a]=s.useState(!0),[r,i]=s.useState(!1),[o,l]=s.useState({title:"",message:"",type:"info"});s.useEffect(()=>{c()},[]);const c=async()=>{try{a(!0);const e=await yc.getNotifications();e.success&&t(e.data.notifications)}catch(e){}finally{a(!1)}};return n?u.jsx("div",{className:"flex items-center justify-center h-64",children:u.jsx(L,{className:"h-8 w-8 animate-spin text-blue-600"})}):u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Notifications"}),u.jsxs(Hl,{onClick:()=>i(!0),size:"sm",children:[u.jsx(ue,{className:"h-4 w-4 mr-2"}),"Create Notification"]})]}),r&&u.jsxs(Gl,{children:[u.jsx(Jl,{children:u.jsx(Yl,{children:"Create New Notification"})}),u.jsx(Xl,{children:u.jsxs("form",{onSubmit:async e=>{e.preventDefault();try{(await yc.createNotification(o.title,o.message)).success&&(l({title:"",message:"",type:"info"}),i(!1),c())}catch(t){}},className:"space-y-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium mb-1",children:"Title"}),u.jsx(Zl,{value:o.title,onChange:e=>l({...o,title:e.target.value}),placeholder:"Notification title...",required:!0})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium mb-1",children:"Message"}),u.jsx(ec,{value:o.message,onChange:e=>l({...o,message:e.target.value}),placeholder:"Notification message...",rows:3,required:!0})]}),u.jsxs("div",{className:"flex space-x-2",children:[u.jsx(Hl,{type:"submit",size:"sm",children:"Create"}),u.jsx(Hl,{type:"button",variant:"outline",size:"sm",onClick:()=>i(!1),children:"Cancel"})]})]})})]}),u.jsxs(Gl,{children:[u.jsx(Jl,{children:u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx(Yl,{children:"System Notifications"}),u.jsx(Hl,{onClick:c,variant:"outline",size:"sm",children:u.jsx(L,{className:"h-4 w-4"})})]})}),u.jsx(Xl,{children:u.jsxs(ng,{children:[u.jsx(ag,{children:u.jsxs(ig,{children:[u.jsx(og,{children:"Message"}),u.jsx(og,{children:"Type"}),u.jsx(og,{children:"Entity"}),u.jsx(og,{children:"Created"}),u.jsx(og,{children:"Actions"})]})}),u.jsx(rg,{children:e.map(e=>u.jsxs(ig,{children:[u.jsx(lg,{className:"max-w-md",children:u.jsx("div",{className:"truncate",children:e.note})}),u.jsx(lg,{children:u.jsx(bu,{variant:"outline",children:e.entityType||"SYSTEM"})}),u.jsx(lg,{children:e.entityId||"-"}),u.jsx(lg,{children:new Date(e.createdAt).toLocaleDateString()}),u.jsx(lg,{children:u.jsxs("div",{className:"flex space-x-2",children:[u.jsx(Hl,{variant:"outline",size:"sm",onClick:()=>(async e=>{try{await yc.markNotificationAsRead(e),c()}catch(t){}})(e.id),children:u.jsx(B,{className:"h-4 w-4"})}),u.jsx(Hl,{variant:"outline",size:"sm",className:"text-red-600 hover:text-red-700",children:u.jsx(W,{className:"h-4 w-4"})})]})})]},e.id))})]})})]}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[u.jsxs(Gl,{children:[u.jsxs(Jl,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[u.jsx(Yl,{className:"text-sm font-medium",children:"Total Notifications"}),u.jsx(X,{className:"h-4 w-4 text-blue-600"})]}),u.jsx(Xl,{children:u.jsx("div",{className:"text-2xl font-bold",children:e.length})})]}),u.jsxs(Gl,{children:[u.jsxs(Jl,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[u.jsx(Yl,{className:"text-sm font-medium",children:"Recent"}),u.jsx(X,{className:"h-4 w-4 text-green-600"})]}),u.jsxs(Xl,{children:[u.jsx("div",{className:"text-2xl font-bold",children:e.filter(e=>new Date(e.createdAt)>new Date((new Date).getTime()-864e5)).length}),u.jsx("p",{className:"text-xs text-gray-500",children:"Last 24 hours"})]})]}),u.jsxs(Gl,{children:[u.jsxs(Jl,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[u.jsx(Yl,{className:"text-sm font-medium",children:"System Health"}),u.jsx(X,{className:"h-4 w-4 text-purple-600"})]}),u.jsx(Xl,{children:u.jsx("div",{className:"text-2xl font-bold text-green-600",children:"Healthy"})})]})]})]})}function hg(){var e,t,n,a,r,i,o,l;const[c,d]=s.useState(null),[h,m]=s.useState(!0),[p,f]=s.useState("30d");s.useEffect(()=>{g()},[p]);const g=async()=>{try{m(!0);const e=await bc.adminService.getAnalytics(p);e.success&&d(e.data)}catch(e){}finally{m(!1)}};return h?u.jsx("div",{className:"flex items-center justify-center h-64",children:u.jsx(L,{className:"h-8 w-8 animate-spin text-blue-600"})}):u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Analytics"}),u.jsxs("div",{className:"flex space-x-2",children:[u.jsxs(Fh,{value:p,onValueChange:f,children:[u.jsx(zh,{className:"w-32",children:u.jsx(qh,{})}),u.jsxs(Hh,{children:[u.jsx(Kh,{value:"7d",children:"7 Days"}),u.jsx(Kh,{value:"30d",children:"30 Days"}),u.jsx(Kh,{value:"90d",children:"90 Days"})]})]}),u.jsx(Hl,{onClick:g,variant:"outline",size:"sm",children:u.jsx(L,{className:"h-4 w-4"})}),u.jsxs(Hl,{variant:"outline",size:"sm",children:[u.jsx(M,{className:"h-4 w-4 mr-2"}),"Export"]})]})]}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[u.jsxs(Gl,{children:[u.jsxs(Jl,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[u.jsx(Yl,{className:"text-sm font-medium",children:"User Growth"}),u.jsx(k,{className:"h-4 w-4 text-blue-600"})]}),u.jsxs(Xl,{children:[u.jsx("div",{className:"text-2xl font-bold",children:(null==(e=null==c?void 0:c.userGrowth)?void 0:e.length)||0}),u.jsx("p",{className:"text-xs text-green-600",children:"+12% from last period"})]})]}),u.jsxs(Gl,{children:[u.jsxs(Jl,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[u.jsx(Yl,{className:"text-sm font-medium",children:"Payment Volume"}),u.jsx(A,{className:"h-4 w-4 text-green-600"})]}),u.jsxs(Xl,{children:[u.jsx("div",{className:"text-2xl font-bold",children:(null==(t=null==c?void 0:c.paymentTrends)?void 0:t.length)||0}),u.jsx("p",{className:"text-xs text-green-600",children:"+8% from last period"})]})]}),u.jsxs(Gl,{children:[u.jsxs(Jl,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[u.jsx(Yl,{className:"text-sm font-medium",children:"Conversion Rate"}),u.jsx(le,{className:"h-4 w-4 text-purple-600"})]}),u.jsxs(Xl,{children:[u.jsx("div",{className:"text-2xl font-bold",children:"3.2%"}),u.jsx("p",{className:"text-xs text-green-600",children:"+0.5% from last period"})]})]}),u.jsxs(Gl,{children:[u.jsxs(Jl,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[u.jsx(Yl,{className:"text-sm font-medium",children:"Active Period"}),u.jsx(D,{className:"h-4 w-4 text-orange-600"})]}),u.jsxs(Xl,{children:[u.jsx("div",{className:"text-2xl font-bold",children:p}),u.jsx("p",{className:"text-xs text-gray-500",children:"Current analysis period"})]})]})]}),u.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[u.jsxs(Gl,{children:[u.jsx(Jl,{children:u.jsxs(Yl,{className:"flex items-center",children:[u.jsx(E,{className:"mr-2 h-5 w-5"}),"User Growth Trend"]})}),u.jsx(Xl,{children:u.jsx("div",{className:"h-64 flex items-center justify-center border-2 border-dashed border-gray-200 rounded-lg",children:u.jsxs("div",{className:"text-center text-gray-500",children:[u.jsx(E,{className:"mx-auto h-12 w-12 mb-2"}),u.jsx("p",{children:"Chart visualization would be here"}),u.jsxs("p",{className:"text-sm",children:["Data points: ",(null==(n=null==c?void 0:c.userGrowth)?void 0:n.length)||0]})]})})})]}),u.jsxs(Gl,{children:[u.jsx(Jl,{children:u.jsxs(Yl,{className:"flex items-center",children:[u.jsx(le,{className:"mr-2 h-5 w-5"}),"Payment Trends"]})}),u.jsx(Xl,{children:u.jsx("div",{className:"h-64 flex items-center justify-center border-2 border-dashed border-gray-200 rounded-lg",children:u.jsxs("div",{className:"text-center text-gray-500",children:[u.jsx(le,{className:"mx-auto h-12 w-12 mb-2"}),u.jsx("p",{children:"Payment chart would be here"}),u.jsxs("p",{className:"text-sm",children:["Data points: ",(null==(a=null==c?void 0:c.paymentTrends)?void 0:a.length)||0]})]})})})]})]}),u.jsxs(Gl,{children:[u.jsx(Jl,{children:u.jsx(Yl,{children:"Top Products"})}),u.jsx(Xl,{children:u.jsxs("div",{className:"space-y-4",children:[null==(r=null==c?void 0:c.topProducts)?void 0:r.slice(0,5).map((e,t)=>u.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[u.jsxs("div",{children:[u.jsx("p",{className:"font-medium",children:e.name}),u.jsx("p",{className:"text-sm text-gray-500",children:e.category})]}),u.jsxs("div",{className:"text-right",children:[u.jsxs("div",{className:"font-medium",children:["#",t+1]}),u.jsx("div",{className:"text-sm text-gray-500",children:"Popular"})]})]},t)),(!(null==c?void 0:c.topProducts)||0===c.topProducts.length)&&u.jsx("div",{className:"text-center py-8 text-gray-500",children:"No product data available for the selected period"})]})})]}),u.jsxs(Gl,{children:[u.jsx(Jl,{children:u.jsx(Yl,{children:"Period Summary"})}),u.jsx(Xl,{children:u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[u.jsxs("div",{className:"text-center p-4 bg-blue-50 rounded-lg",children:[u.jsx("div",{className:"text-2xl font-bold text-blue-600",children:(null==(i=null==c?void 0:c.userGrowth)?void 0:i.length)||0}),u.jsx("div",{className:"text-sm text-blue-600",children:"New Users"})]}),u.jsxs("div",{className:"text-center p-4 bg-green-50 rounded-lg",children:[u.jsx("div",{className:"text-2xl font-bold text-green-600",children:(null==(o=null==c?void 0:c.paymentTrends)?void 0:o.length)||0}),u.jsx("div",{className:"text-sm text-green-600",children:"Transactions"})]}),u.jsxs("div",{className:"text-center p-4 bg-purple-50 rounded-lg",children:[u.jsx("div",{className:"text-2xl font-bold text-purple-600",children:(null==(l=null==c?void 0:c.topProducts)?void 0:l.length)||0}),u.jsx("div",{className:"text-sm text-purple-600",children:"Active Products"})]})]})})]})]})}function mg(){const[e,t]=s.useState({siteName:"Galloways Insurance",supportEmail:"support@galloways.co.ke",maintenanceMode:!1,allowRegistration:!0,emailNotifications:!0,maxFileSize:10,allowedFileTypes:["pdf","jpg","png","docx","xlsx"],backupEnabled:!0,autoBackupInterval:"daily",sessionTimeout:60,twoFactorRequired:!1,passwordMinLength:8,systemHealth:{database:"healthy",email:"healthy",storage:"warning",api:"healthy",realtime:"healthy"}}),[n,a]=s.useState(!1),[r,i]=s.useState(!1),[o,l]=s.useState("2024-08-22 10:30:00"),[c,d]=s.useState({totalUsers:0,totalClaims:0,storageUsed:"2.4 GB",storageTotal:"10 GB",uptime:"99.9%",lastRestart:"2024-08-20 14:30:00"});s.useEffect(()=>{h(),m()},[]);const h=async()=>{try{a(!0);try{const e=await yc.getSystemSettings();e.data&&(t(e.data),Ss.success("Settings loaded successfully"))}catch(e){Ss.info("Using default settings")}}catch(e){Ss.error("Failed to load settings")}finally{a(!1)}},m=async()=>{try{const e=await yc.getUserStats(),t=await yc.getClaimsStats();e.success&&d(t=>{var s;return{...t,totalUsers:(null==(s=e.data)?void 0:s.totalUsers)||0}}),t.success&&d(e=>{var s;return{...e,totalClaims:(null==(s=t.data)?void 0:s.totalClaims)||0}})}catch(e){}},p=(e,s)=>{t(t=>({...t,[e]:s}))},f=(e,s)=>{t(t=>({...t,systemHealth:{...t.systemHealth,[e]:s}}))},g=async()=>{try{Ss.loading("Sending test email..."),await new Promise(e=>setTimeout(e,2e3)),Ss.success("Test email sent successfully!")}catch(e){Ss.error("Failed to send test email")}},x=e=>{switch(e){case"healthy":return u.jsx(V,{className:"h-4 w-4 text-green-600"});case"warning":return u.jsx(be,{className:"h-4 w-4 text-yellow-600"});case"error":return u.jsx(G,{className:"h-4 w-4 text-red-600"});default:return u.jsx(re,{className:"h-4 w-4 text-gray-400"})}},y=e=>{switch(e){case"healthy":return"bg-green-100 text-green-800";case"warning":return"bg-yellow-100 text-yellow-800";case"error":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}};return n?u.jsxs("div",{className:"flex items-center justify-center h-64",children:[u.jsx(L,{className:"h-8 w-8 animate-spin text-blue-600"}),u.jsx("span",{className:"ml-2 text-lg",children:"Loading settings..."})]}):u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"System Settings"}),u.jsxs("div",{className:"flex space-x-2",children:[u.jsxs(Hl,{onClick:h,variant:"outline",size:"sm",disabled:n,children:[u.jsx(L,{className:"h-4 w-4 mr-2 "+(n?"animate-spin":"")}),"Refresh"]}),u.jsxs(Hl,{onClick:async()=>{try{const t={settings:e,systemStats:c,lastBackup:o,exportDate:(new Date).toISOString(),version:"2.0"},s=new Blob([JSON.stringify(t,null,2)],{type:"application/json"}),n=window.URL.createObjectURL(s),a=document.createElement("a");a.href=n,a.download=`system-settings-${(new Date).toISOString().split("T")[0]}.json`,document.body.appendChild(a),a.click(),document.body.removeChild(a),window.URL.revokeObjectURL(n),Ss.success("Settings exported successfully!")}catch(t){Ss.error("Failed to export settings")}},variant:"outline",size:"sm",children:[u.jsx(M,{className:"h-4 w-4 mr-2"}),"Export"]}),u.jsxs(Hl,{onClick:async()=>{try{i(!0),await yc.updateSystemSettings(e),Ss.success("Settings saved successfully!")}catch(t){Ss.error("Failed to save settings")}finally{i(!1)}},disabled:r,size:"sm",children:[u.jsx(he,{className:"h-4 w-4 mr-2"}),r?"Saving...":"Save Settings"]})]})]}),u.jsx(Gl,{className:"bg-gradient-to-r from-blue-50 to-purple-50",children:u.jsx(Xl,{className:"p-4",children:u.jsxs("div",{className:"flex flex-wrap gap-3 items-center",children:[u.jsxs(Hl,{onClick:async()=>{try{Ss.loading("Creating system backup..."),await new Promise(e=>setTimeout(e,3e3));const e=(new Date).toISOString().replace("T"," ").split(".")[0];l(e),Ss.success("System backup completed successfully!")}catch(e){Ss.error("Backup failed")}},variant:"outline",size:"sm",children:[u.jsx(me,{className:"h-4 w-4 mr-2"}),"Backup Now"]}),u.jsxs(Hl,{onClick:async()=>{if(confirm("Are you sure you want to restore from the last backup? This will overwrite current data."))try{Ss.loading("Restoring from backup..."),await new Promise(e=>setTimeout(e,4e3)),Ss.success("System restored from backup successfully!")}catch(e){Ss.error("Restore failed")}},variant:"outline",size:"sm",children:[u.jsx(pe,{className:"h-4 w-4 mr-2"}),"Restore"]}),u.jsxs(Hl,{onClick:async()=>{try{Ss.loading("Clearing system cache..."),await new Promise(e=>setTimeout(e,1500)),Ss.success("System cache cleared!")}catch(e){Ss.error("Failed to clear cache")}},variant:"outline",size:"sm",children:[u.jsx(W,{className:"h-4 w-4 mr-2"}),"Clear Cache"]}),u.jsxs(Hl,{onClick:async()=>{if(confirm("Are you sure you want to restart system services? This may cause brief downtime."))try{Ss.loading("Restarting system services..."),await new Promise(e=>setTimeout(e,5e3));const e=(new Date).toISOString().replace("T"," ").split(".")[0];d(t=>({...t,lastRestart:e})),Ss.success("System services restarted successfully!")}catch(e){Ss.error("Failed to restart services")}},variant:"outline",size:"sm",children:[u.jsx(L,{className:"h-4 w-4 mr-2"}),"Restart Services"]}),u.jsxs(Hl,{onClick:g,variant:"outline",size:"sm",children:[u.jsx(v,{className:"h-4 w-4 mr-2"}),"Test Email"]}),u.jsxs(Hl,{onClick:async()=>{try{Ss.loading("Testing notification system..."),await new Promise(e=>setTimeout(e,1500)),Ss.success("Notifications are working correctly!"),setTimeout(()=>{Ss.info("This is a test info notification")},1e3),setTimeout(()=>{Ss("This is a test warning notification",{description:"System notifications are functioning properly"})},2e3)}catch(e){Ss.error("Notification test failed")}},variant:"outline",size:"sm",children:[u.jsx(X,{className:"h-4 w-4 mr-2"}),"Test Notifications"]})]})})}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[u.jsx(Gl,{children:u.jsx(Xl,{className:"p-4",children:u.jsxs("div",{className:"flex items-center space-x-3",children:[u.jsx(k,{className:"h-8 w-8 text-blue-600"}),u.jsxs("div",{children:[u.jsx("p",{className:"text-2xl font-bold",children:c.totalUsers}),u.jsx("p",{className:"text-sm text-gray-500",children:"Total Users"})]})]})})}),u.jsx(Gl,{children:u.jsx(Xl,{className:"p-4",children:u.jsxs("div",{className:"flex items-center space-x-3",children:[u.jsx(N,{className:"h-8 w-8 text-green-600"}),u.jsxs("div",{children:[u.jsx("p",{className:"text-2xl font-bold",children:c.totalClaims}),u.jsx("p",{className:"text-sm text-gray-500",children:"Total Claims"})]})]})})}),u.jsx(Gl,{children:u.jsx(Xl,{className:"p-4",children:u.jsxs("div",{className:"flex items-center space-x-3",children:[u.jsx(fe,{className:"h-8 w-8 text-purple-600"}),u.jsxs("div",{children:[u.jsx("p",{className:"text-2xl font-bold",children:c.storageUsed}),u.jsxs("p",{className:"text-sm text-gray-500",children:["of ",c.storageTotal]})]})]})})}),u.jsx(Gl,{children:u.jsx(Xl,{className:"p-4",children:u.jsxs("div",{className:"flex items-center space-x-3",children:[u.jsx(ce,{className:"h-8 w-8 text-yellow-600"}),u.jsxs("div",{children:[u.jsx("p",{className:"text-2xl font-bold",children:c.uptime}),u.jsx("p",{className:"text-sm text-gray-500",children:"System Uptime"})]})]})})})]}),u.jsxs(Gl,{children:[u.jsx(Jl,{children:u.jsxs(Yl,{className:"flex items-center",children:[u.jsx(Z,{className:"mr-2 h-5 w-5"}),"General Settings"]})}),u.jsxs(Xl,{className:"space-y-4",children:[u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium mb-1",children:"Site Name"}),u.jsx(Zl,{value:e.siteName,onChange:e=>p("siteName",e.target.value),placeholder:"Enter site name..."})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium mb-1",children:"Support Email"}),u.jsx(Zl,{type:"email",value:e.supportEmail,onChange:e=>p("supportEmail",e.target.value),placeholder:"support@example.com"})]})]}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[u.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[u.jsxs("div",{children:[u.jsxs("label",{className:"text-sm font-medium flex items-center",children:[e.maintenanceMode?u.jsx(ge,{className:"h-4 w-4 mr-2 text-red-500"}):u.jsx(xe,{className:"h-4 w-4 mr-2 text-green-500"}),"Maintenance Mode"]}),u.jsx("p",{className:"text-sm text-gray-500",children:"Enable to show maintenance page to users"})]}),u.jsx(tg,{checked:e.maintenanceMode,onCheckedChange:e=>p("maintenanceMode",e)})]}),u.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[u.jsxs("div",{children:[u.jsxs("label",{className:"text-sm font-medium flex items-center",children:[u.jsx(k,{className:"h-4 w-4 mr-2 text-blue-500"}),"Allow Registration"]}),u.jsx("p",{className:"text-sm text-gray-500",children:"Allow new users to register"})]}),u.jsx(tg,{checked:e.allowRegistration,onCheckedChange:e=>p("allowRegistration",e)})]})]})]})]}),u.jsxs(Gl,{children:[u.jsx(Jl,{children:u.jsxs(Yl,{className:"flex items-center",children:[u.jsx(v,{className:"mr-2 h-5 w-5"}),"Email & Notifications"]})}),u.jsx(Xl,{className:"space-y-4",children:u.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[u.jsxs("div",{children:[u.jsxs("label",{className:"text-sm font-medium flex items-center",children:[u.jsx(X,{className:"h-4 w-4 mr-2 text-blue-500"}),"Email Notifications"]}),u.jsx("p",{className:"text-sm text-gray-500",children:"Send system notifications via email"})]}),u.jsxs("div",{className:"flex items-center space-x-2",children:[u.jsx(Hl,{onClick:g,variant:"outline",size:"sm",children:"Test"}),u.jsx(tg,{checked:e.emailNotifications,onCheckedChange:e=>p("emailNotifications",e)})]})]})})]}),u.jsxs(Gl,{children:[u.jsx(Jl,{children:u.jsxs(Yl,{className:"flex items-center",children:[u.jsx(T,{className:"mr-2 h-5 w-5"}),"Security Settings"]})}),u.jsxs(Xl,{className:"space-y-4",children:[u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium mb-1",children:"Max File Size (MB)"}),u.jsxs(Fh,{value:e.maxFileSize.toString(),onValueChange:e=>p("maxFileSize",parseInt(e)),children:[u.jsx(zh,{children:u.jsx(qh,{})}),u.jsxs(Hh,{children:[u.jsx(Kh,{value:"5",children:"5 MB"}),u.jsx(Kh,{value:"10",children:"10 MB"}),u.jsx(Kh,{value:"25",children:"25 MB"}),u.jsx(Kh,{value:"50",children:"50 MB"})]})]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium mb-1",children:"Session Timeout (minutes)"}),u.jsxs(Fh,{value:e.sessionTimeout.toString(),onValueChange:e=>p("sessionTimeout",parseInt(e)),children:[u.jsx(zh,{children:u.jsx(qh,{})}),u.jsxs(Hh,{children:[u.jsx(Kh,{value:"30",children:"30 minutes"}),u.jsx(Kh,{value:"60",children:"1 hour"}),u.jsx(Kh,{value:"120",children:"2 hours"}),u.jsx(Kh,{value:"240",children:"4 hours"})]})]})]})]}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[u.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[u.jsxs("div",{children:[u.jsxs("label",{className:"text-sm font-medium flex items-center",children:[u.jsx(ve,{className:"h-4 w-4 mr-2 text-purple-500"}),"Two-Factor Authentication"]}),u.jsx("p",{className:"text-sm text-gray-500",children:"Require 2FA for admin accounts"})]}),u.jsx(tg,{checked:e.twoFactorRequired,onCheckedChange:e=>p("twoFactorRequired",e)})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium mb-1",children:"Password Min Length"}),u.jsxs(Fh,{value:e.passwordMinLength.toString(),onValueChange:e=>p("passwordMinLength",parseInt(e)),children:[u.jsx(zh,{children:u.jsx(qh,{})}),u.jsxs(Hh,{children:[u.jsx(Kh,{value:"6",children:"6 characters"}),u.jsx(Kh,{value:"8",children:"8 characters"}),u.jsx(Kh,{value:"10",children:"10 characters"}),u.jsx(Kh,{value:"12",children:"12 characters"})]})]})]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium mb-2",children:"Allowed File Types"}),u.jsx("div",{className:"flex flex-wrap gap-2",children:e.allowedFileTypes.map(e=>u.jsxs("span",{className:"px-3 py-1 bg-blue-100 text-blue-800 rounded-full text-sm",children:[".",e]},e))})]})]})]}),u.jsxs(Gl,{children:[u.jsx(Jl,{children:u.jsxs(Yl,{className:"flex items-center",children:[u.jsx(ye,{className:"mr-2 h-5 w-5"}),"System Management"]})}),u.jsxs(Xl,{className:"space-y-4",children:[u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[u.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[u.jsxs("div",{children:[u.jsxs("label",{className:"text-sm font-medium flex items-center",children:[u.jsx(me,{className:"h-4 w-4 mr-2 text-green-500"}),"Auto Backup"]}),u.jsx("p",{className:"text-sm text-gray-500",children:"Automatic database backups"})]}),u.jsx(tg,{checked:e.backupEnabled,onCheckedChange:e=>p("backupEnabled",e)})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium mb-1",children:"Backup Frequency"}),u.jsxs(Fh,{value:e.autoBackupInterval,onValueChange:e=>p("autoBackupInterval",e),children:[u.jsx(zh,{children:u.jsx(qh,{})}),u.jsxs(Hh,{children:[u.jsx(Kh,{value:"hourly",children:"Hourly"}),u.jsx(Kh,{value:"daily",children:"Daily"}),u.jsx(Kh,{value:"weekly",children:"Weekly"}),u.jsx(Kh,{value:"monthly",children:"Monthly"})]})]})]})]}),u.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[u.jsxs("div",{className:"flex items-center justify-between mb-2",children:[u.jsx("span",{className:"text-sm font-medium",children:"Last Backup"}),u.jsx("span",{className:"text-sm text-gray-600",children:o})]}),u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("span",{className:"text-sm font-medium",children:"Last System Restart"}),u.jsx("span",{className:"text-sm text-gray-600",children:c.lastRestart})]})]})]})]}),u.jsxs(Gl,{children:[u.jsx(Jl,{children:u.jsxs(Yl,{className:"flex items-center",children:[u.jsx(re,{className:"mr-2 h-5 w-5"}),"System Health Monitor"]})}),u.jsx(Xl,{children:u.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:Object.entries(e.systemHealth).map(([e,t])=>u.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg hover:bg-gray-50 transition-colors",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[x(t),u.jsxs("div",{children:[u.jsx("span",{className:"font-medium capitalize",children:e.replace("_"," ")}),u.jsxs("div",{className:"flex gap-2 mt-1",children:[u.jsx(Hl,{onClick:()=>f(e,"healthy"),variant:"outline",size:"sm",className:"healthy"===t?"bg-green-50 text-green-700":"",children:"Healthy"}),u.jsx(Hl,{onClick:()=>f(e,"warning"),variant:"outline",size:"sm",className:"warning"===t?"bg-yellow-50 text-yellow-700":"",children:"Warning"}),u.jsx(Hl,{onClick:()=>f(e,"error"),variant:"outline",size:"sm",className:"error"===t?"bg-red-50 text-red-700":"",children:"Error"})]})]})]}),u.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${y(t)}`,children:"healthy"===t?"Operational":"warning"===t?"Warning":"Error"})]},e))})})]})]})}s.forwardRef(({className:e,...t},s)=>u.jsx("caption",{ref:s,className:hs("mt-4 text-sm text-muted-foreground",e),...t})).displayName="TableCaption";const pg=Ul("https://wctkikgmncnunntsiqdu.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6IndjdGtpa2dtbmNudW5udHNpcWR1Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3MzUzMDYyMjAsImV4cCI6MjA1MDg4MjIyMH0.C3_pEe3yOI0-eMTgejBDr_R4HJH6lAXdcMmBJUgYCmw",{auth:{persistSession:!1,autoRefreshToken:!1}});const fg=new class{constructor(){t(this,"channels",new Map),t(this,"listeners",new Map),t(this,"isConnected",!1)}connect(){return this.isConnected||(this.setupDashboardChannel(),this.setupClaimsChannel(),this.setupConsultationsChannel(),this.setupPaymentsChannel(),this.setupUsersChannel(),this.isConnected=!0),!0}disconnect(){for(const[,e]of this.channels)pg.removeChannel(e);this.channels.clear(),this.listeners.clear(),this.isConnected=!1}setupDashboardChannel(){const e=pg.channel("dashboard-changes").on("postgres_changes",{event:"*",schema:"public",table:"activities"},e=>{this.notifyListeners("dashboard-update",e),this.notifyListeners("recent-activity",e)}).subscribe();this.channels.set("dashboard",e)}setupClaimsChannel(){const e=pg.channel("claims-changes").on("postgres_changes",{event:"*",schema:"public",table:"claims"},e=>{this.notifyListeners("claims-data",e),this.notifyListeners("claim-update",e),this.notifyListeners("data-change",{type:"claims",...e})}).subscribe();this.channels.set("claims",e)}setupConsultationsChannel(){const e=pg.channel("consultations-changes").on("postgres_changes",{event:"*",schema:"public",table:"consultations"},e=>{this.notifyListeners("consultations-data",e),this.notifyListeners("consultation-update",e),this.notifyListeners("data-change",{type:"consultations",...e})}).subscribe();this.channels.set("consultations",e)}setupPaymentsChannel(){const e=pg.channel("payments-changes").on("postgres_changes",{event:"*",schema:"public",table:"payments"},e=>{this.notifyListeners("payments-data",e),this.notifyListeners("payment-update",e),this.notifyListeners("data-change",{type:"payments",...e})}).subscribe();this.channels.set("payments",e)}setupUsersChannel(){const e=pg.channel("users-changes").on("postgres_changes",{event:"*",schema:"public",table:"users"},e=>{this.notifyListeners("users-data",e),this.notifyListeners("data-change",{type:"users",...e})}).subscribe();this.channels.set("users",e)}subscribe(e,t){var s;this.listeners.has(e)||this.listeners.set(e,[]),null==(s=this.listeners.get(e))||s.push(t)}unsubscribe(e,t){const s=this.listeners.get(e);if(s){const e=s.indexOf(t);e>-1&&s.splice(e,1)}}notifyListeners(e,t){const s=this.listeners.get(e);s&&s.forEach(e=>e(t))}requestDashboardData(){this.notifyListeners("dashboard-data",{message:"Real-time dashboard monitoring active"})}requestClaimsData(){this.notifyListeners("claims-data",{message:"Real-time claims monitoring active"})}requestConsultationsData(){this.notifyListeners("consultations-data",{message:"Real-time consultations monitoring active"})}requestUsersData(){this.notifyListeners("users-data",{message:"Real-time users monitoring active"})}requestPaymentsData(){this.notifyListeners("payments-data",{message:"Real-time payments monitoring active"})}};function gg(){var e,t,n;const[a,r]=s.useState([]),[i,o]=s.useState(!0),[l,c]=s.useState(null),[d,h]=s.useState(!1),[m,p]=s.useState(""),[f,g]=s.useState(""),[x,v]=s.useState(1),[y,b]=s.useState(1),{toast:w}=De(),j=s.useCallback(e=>{r(e.claims||[]),o(!1)},[]),S=s.useCallback(e=>{r(t=>t.map(t=>t.id===e.id?{...t,...e}:t)),w({title:"Claim Updated",description:`Claim ${e.id} has been updated.`})},[w]);s.useEffect(()=>(fg.connect(),fg.subscribe("claims-data",j),fg.subscribe("claim-update",S),fg.requestClaimsData(),()=>{fg.unsubscribe("claims-data",j),fg.unsubscribe("claim-update",S)}),[j,S]);const _=async()=>{var e;try{o(!0);const t="all"===f?void 0:f,s=await yc.getAllClaims(x,20,t,m||void 0);s.success?(r(s.data.claims||[]),b((null==(e=s.data.pagination)?void 0:e.totalPages)||1),fg.requestClaimsData()):r([])}catch(t){r([]),w({title:"Error",description:"Failed to fetch claims data.",variant:"destructive"})}finally{o(!1)}},k=async(e="csv")=>{try{w({title:"Export Started",description:`Exporting claims data as ${e.toUpperCase()}...`}),await new Promise(e=>setTimeout(e,1500));const t={claims:a.map(e=>{var t,s,n;return{id:e.id,policyNumber:e.policyNumber,claimType:e.claimType,claimant:(null==(t=e.user)?void 0:t.name)||"N/A",email:(null==(s=e.user)?void 0:s.email)||"N/A",estimatedLoss:e.estimatedLoss,status:e.status,incidentDate:e.incidentDate,createdAt:e.createdAt,documentCount:(null==(n=e.documents)?void 0:n.length)||0}}),timestamp:(new Date).toISOString(),format:e};let s="",n=`claims-export-${(new Date).toISOString().split("T")[0]}`,r="text/plain";if("json"===e)s=JSON.stringify(t,null,2),n+=".json",r="application/json";else if("csv"===e){s="ID,Policy Number,Claim Type,Claimant,Email,Amount,Status,Incident Date,Created At,Documents\n"+t.claims.map(e=>`${e.id},"${e.policyNumber}","${e.claimType}","${e.claimant}","${e.email}",${e.estimatedLoss},"${e.status}","${e.incidentDate}","${e.createdAt}",${e.documentCount}`).join("\n"),n+=".csv",r="text/csv"}const i=new Blob([s],{type:r}),o=window.URL.createObjectURL(i),l=document.createElement("a");l.href=o,l.download=n,document.body.appendChild(l),l.click(),document.body.removeChild(l),window.URL.revokeObjectURL(o),w({title:"Export Complete",description:`Claims data exported as ${e.toUpperCase()}`})}catch(t){w({title:"Export Failed",description:"Failed to export claims data",variant:"destructive"})}},C=e=>{switch(e.toLowerCase()){case"pending":return"bg-yellow-100 text-yellow-800";case"approved":return"bg-green-100 text-green-800";case"rejected":return"bg-red-100 text-red-800";case"processing":return"bg-blue-100 text-blue-800";default:return"bg-gray-100 text-gray-800"}},E=e=>new Date(e).toLocaleDateString(),T=e=>new Intl.NumberFormat("en-KE",{style:"currency",currency:"KES"}).format(e),R=e=>{if(0===e)return"0 Bytes";const t=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,t)).toFixed(2))+" "+["Bytes","KB","MB","GB"][t]};return s.useEffect(()=>{_()},[x,m,f]),i?u.jsx("div",{className:"flex items-center justify-center h-64",children:u.jsx("div",{className:"text-lg",children:"Loading claims..."})}):u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"flex justify-between items-center",children:[u.jsx("h1",{className:"text-3xl font-bold",children:"Claims Management"}),u.jsxs("div",{className:"flex gap-2",children:[u.jsxs(Hl,{onClick:_,variant:"outline",size:"sm",disabled:i,children:[u.jsx(L,{className:"h-4 w-4 mr-2 "+(i?"animate-spin":"")}),"Refresh"]}),u.jsxs(Hl,{onClick:()=>k("csv"),variant:"outline",size:"sm",children:[u.jsx(M,{className:"h-4 w-4 mr-2"}),"Export CSV"]}),u.jsxs(Hl,{onClick:()=>k("json"),variant:"outline",size:"sm",children:[u.jsx(M,{className:"h-4 w-4 mr-2"}),"Export JSON"]})]})]}),u.jsx(Gl,{children:u.jsx(Xl,{className:"p-4",children:u.jsxs("div",{className:"flex gap-4 items-center",children:[u.jsxs("div",{className:"relative flex-1",children:[u.jsx(q,{className:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),u.jsx(Zl,{placeholder:"Search claims...",value:m,onChange:e=>p(e.target.value),className:"pl-10"})]}),u.jsxs(Fh,{value:f,onValueChange:g,children:[u.jsx(zh,{className:"w-48",children:u.jsx(qh,{placeholder:"Filter by status"})}),u.jsxs(Hh,{children:[u.jsx(Kh,{value:"all",children:"All Statuses"}),u.jsx(Kh,{value:"pending",children:"Pending"}),u.jsx(Kh,{value:"processing",children:"Processing"}),u.jsx(Kh,{value:"approved",children:"Approved"}),u.jsx(Kh,{value:"rejected",children:"Rejected"})]})]}),u.jsx(Hl,{variant:"outline",size:"icon",children:u.jsx(F,{className:"h-4 w-4"})})]})})}),u.jsxs(Gl,{children:[u.jsx(Jl,{children:u.jsxs(Yl,{children:["Claims List (",a.length," records)"]})}),u.jsxs(Xl,{children:[u.jsx("div",{className:"overflow-x-auto",children:u.jsxs("table",{className:"w-full border-collapse",children:[u.jsx("thead",{children:u.jsxs("tr",{className:"border-b",children:[u.jsx("th",{className:"text-left p-3 font-medium",children:"Policy #"}),u.jsx("th",{className:"text-left p-3 font-medium",children:"Claimant"}),u.jsx("th",{className:"text-left p-3 font-medium",children:"Type"}),u.jsx("th",{className:"text-left p-3 font-medium",children:"Amount"}),u.jsx("th",{className:"text-left p-3 font-medium",children:"Date"}),u.jsx("th",{className:"text-left p-3 font-medium",children:"Status"}),u.jsx("th",{className:"text-left p-3 font-medium",children:"Documents"}),u.jsx("th",{className:"text-left p-3 font-medium",children:"Actions"})]})}),u.jsx("tbody",{children:a.length>0?a.map(e=>{var t;return u.jsxs("tr",{className:"border-b hover:bg-gray-50",children:[u.jsx("td",{className:"p-3 font-mono text-sm",children:e.policyNumber}),u.jsx("td",{className:"p-3",children:u.jsxs("div",{children:[u.jsxs("div",{className:"font-medium",children:[e.firstName," ",e.lastName]}),u.jsx("div",{className:"text-sm text-gray-500",children:e.email}),u.jsx("div",{className:"text-sm text-gray-500",children:e.phone})]})}),u.jsx("td",{className:"p-3",children:e.claimType}),u.jsx("td",{className:"p-3 font-medium",children:T(e.estimatedLoss)}),u.jsx("td",{className:"p-3",children:E(e.incidentDate)}),u.jsx("td",{className:"p-3",children:u.jsx(bu,{className:C(e.status),children:e.status})}),u.jsx("td",{className:"p-3",children:u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx(N,{className:"h-4 w-4 text-gray-400"}),u.jsxs("span",{className:"text-sm",children:[(null==(t=e.documents)?void 0:t.length)||0," files"]})]})}),u.jsx("td",{className:"p-3",children:u.jsxs("div",{className:"flex gap-2",children:[u.jsx(Hl,{variant:"outline",size:"sm",onClick:()=>(async e=>{try{const t=await yc.getClaimById(e);t.success?(c(t.data),h(!0)):w({title:"Error",description:t.message||"Failed to fetch claim details.",variant:"destructive"})}catch(t){w({title:"Error",description:"Failed to fetch claim details.",variant:"destructive"})}})(e.id),children:u.jsx(B,{className:"h-4 w-4"})}),u.jsxs(Fh,{onValueChange:t=>(async(e,t)=>{try{const s=await yc.updateClaimStatus(e,t);s.success?(_(),l&&l.id===e&&c({...l,status:t}),w({title:"Success",description:"Claim status updated successfully."})):w({title:"Error",description:s.message||"Failed to update claim status.",variant:"destructive"})}catch(s){w({title:"Error",description:"Failed to update claim status.",variant:"destructive"})}})(e.id,t),children:[u.jsx(zh,{className:"w-32",children:u.jsx(qh,{placeholder:"Update"})}),u.jsxs(Hh,{children:[u.jsx(Kh,{value:"pending",children:"Pending"}),u.jsx(Kh,{value:"processing",children:"Processing"}),u.jsx(Kh,{value:"approved",children:"Approved"}),u.jsx(Kh,{value:"rejected",children:"Rejected"})]})]})]})})]},e.id)}):u.jsx("tr",{children:u.jsx("td",{colSpan:8,className:"text-center py-12",children:u.jsxs("div",{className:"text-gray-500",children:[u.jsx(N,{className:"h-12 w-12 mx-auto mb-4 text-gray-300"}),u.jsx("h3",{className:"text-lg font-medium mb-2",children:"No claims found"}),u.jsx("p",{children:"No claims match your current filters."})]})})})})]})}),y>1&&u.jsxs("div",{className:"flex justify-center gap-2 mt-4",children:[u.jsx(Hl,{variant:"outline",disabled:1===x,onClick:()=>v(x-1),children:"Previous"}),u.jsxs("span",{className:"flex items-center px-4",children:["Page ",x," of ",y]}),u.jsx(Hl,{variant:"outline",disabled:x===y,onClick:()=>v(x+1),children:"Next"})]})]})]}),u.jsx(hu,{open:d,onOpenChange:h,children:u.jsxs(gu,{className:"max-w-4xl max-h-[80vh] overflow-y-auto",children:[u.jsx(xu,{children:u.jsx(vu,{children:"Claim Details"})}),l&&u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[u.jsxs(Gl,{children:[u.jsx(Jl,{children:u.jsxs(Yl,{className:"text-lg flex items-center gap-2",children:[u.jsx(N,{className:"h-5 w-5"}),"Claim Information"]})}),u.jsxs(Xl,{className:"space-y-3",children:[u.jsxs("div",{children:[u.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Policy Number"}),u.jsx("p",{className:"font-mono",children:l.policyNumber})]}),u.jsxs("div",{children:[u.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Claim Type"}),u.jsx("p",{children:l.claimType})]}),u.jsxs("div",{children:[u.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Estimated Loss"}),u.jsx("p",{className:"font-medium",children:T(l.estimatedLoss)})]}),u.jsxs("div",{children:[u.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Incident Date"}),u.jsx("p",{children:E(l.incidentDate)})]}),u.jsxs("div",{children:[u.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Status"}),u.jsx(bu,{className:C(l.status),children:l.status})]})]})]}),u.jsxs(Gl,{children:[u.jsx(Jl,{children:u.jsxs(Yl,{className:"text-lg flex items-center gap-2",children:[u.jsx(H,{className:"h-5 w-5"}),"Claimant Information"]})}),u.jsxs(Xl,{className:"space-y-3",children:[u.jsxs("div",{children:[u.jsx("label",{className:"text-sm font-medium text-gray-500",children:"First Name"}),u.jsx("p",{children:l.firstName})]}),u.jsxs("div",{children:[u.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Last Name"}),u.jsx("p",{children:l.lastName})]}),u.jsxs("div",{children:[u.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Email"}),u.jsx("p",{children:l.email})]}),u.jsxs("div",{children:[u.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Phone"}),u.jsx("p",{children:l.phone})]}),u.jsxs("div",{children:[u.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Submitted"}),u.jsx("p",{children:E(l.createdAt)})]})]})]})]}),u.jsxs(Gl,{children:[u.jsx(Jl,{children:u.jsx(Yl,{className:"text-lg",children:"Description"})}),u.jsx(Xl,{children:u.jsx("p",{className:"text-gray-700 whitespace-pre-wrap",children:l.description})})]}),u.jsxs(Gl,{children:[u.jsx(Jl,{children:u.jsxs(Yl,{className:"text-lg flex items-center gap-2",children:[u.jsx(N,{className:"h-5 w-5"}),"Attached Documents (",(null==(e=l.documents)?void 0:e.length)||0,")"]})}),u.jsx(Xl,{children:((null==(t=l.documents)?void 0:t.length)||0)>0?u.jsx("div",{className:"grid gap-3",children:null==(n=l.documents)?void 0:n.map(e=>u.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx(N,{className:"h-5 w-5 text-gray-400"}),u.jsxs("div",{children:[u.jsx("p",{className:"font-medium",children:e.originalName}),u.jsxs("p",{className:"text-sm text-gray-500",children:[R(e.size),"  ",E(e.createdAt)]})]})]}),u.jsx(Hl,{variant:"outline",size:"sm",onClick:()=>(async(e,t)=>{try{const s=await yc.downloadDocument(e,t);s.success?w({title:"Success",description:s.message||"Document download started."}):w({title:"Error",description:s.message||"Failed to download document.",variant:"destructive"})}catch(s){w({title:"Error",description:"Failed to download document.",variant:"destructive"})}})(e.id,e.originalName),children:u.jsx(M,{className:"h-4 w-4"})})]},e.id))}):u.jsx("p",{className:"text-gray-500 text-center py-4",children:"No documents attached"})})]})]})]})})]})}function xg(){const[e,t]=s.useState([]),[n,a]=s.useState(!0),[r,i]=s.useState(null),[o,l]=s.useState(!1),[c,d]=s.useState(!1),[h,m]=s.useState(!1),[p,f]=s.useState(""),[g,y]=s.useState(""),[b,w]=s.useState(1),[j,N]=s.useState(1),[S,_]=s.useState({meetingDate:"",meetingTime:"",meetingType:"online",meetingLink:"",notes:"",duration:"60"}),{toast:k}=De(),C=s.useCallback(e=>{t(e.consultations||[]),a(!1)},[]),E=s.useCallback(e=>{t(t=>t.map(t=>t.id===e.id?{...t,...e}:t)),k({title:"Consultation Updated",description:`Consultation ${e.id} has been updated.`})},[k]),T=s.useCallback(e=>{k({title:"Using Demo Data",description:e.message,variant:"default"})},[k]);s.useEffect(()=>(fg.connect(),fg.subscribe("consultations-data",C),fg.subscribe("consultation-update",E),fg.subscribe("mock-data-warning",T),P(),()=>{fg.unsubscribe("consultations-data",C),fg.unsubscribe("consultation-update",E),fg.unsubscribe("mock-data-warning",T)}),[C,E,T]),s.useEffect(()=>{P()},[b,g,p]);const P=async()=>{var e;try{a(!0);const s="all"===g?void 0:g,n=await yc.getAllConsultations(b,20,s,p||void 0);n.success?(t(n.data.consultations||[]),N((null==(e=n.data.pagination)?void 0:e.totalPages)||1),fg.requestConsultationsData()):t([])}catch(s){t([]),k({title:"Error",description:"Failed to fetch consultations data.",variant:"destructive"})}finally{a(!1)}},A=async(e,t)=>{try{const s=await yc.updateConsultationStatus(e,t);s.success?(P(),r&&r.id===e&&i({...r,status:t}),k({title:"Success",description:"Consultation status updated successfully."})):k({title:"Error",description:s.message||"Failed to update consultation status.",variant:"destructive"})}catch(s){k({title:"Error",description:"Failed to update consultation status.",variant:"destructive"})}},I=e=>{switch(e.toLowerCase()){case"pending":return"bg-yellow-100 text-yellow-800";case"contacted":return"bg-orange-100 text-orange-800";case"scheduled":return"bg-blue-100 text-blue-800";case"completed":return"bg-green-100 text-green-800";case"cancelled":return"bg-red-100 text-red-800";case"confirmed":return"bg-purple-100 text-purple-800";default:return"bg-gray-100 text-gray-800"}};return s.useEffect(()=>{P()},[b,p,g]),n?u.jsx("div",{className:"flex items-center justify-center h-64",children:u.jsx("div",{className:"text-lg",children:"Loading consultations..."})}):u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"flex justify-between items-center",children:[u.jsx("h1",{className:"text-3xl font-bold",children:"Consultations Management"}),u.jsxs(Hl,{onClick:P,variant:"outline",size:"sm",disabled:n,children:[u.jsx(L,{className:"h-4 w-4 mr-2 "+(n?"animate-spin":"")}),"Refresh"]})]}),u.jsx(Gl,{children:u.jsx(Xl,{className:"p-4",children:u.jsxs("div",{className:"flex gap-4 items-center",children:[u.jsxs("div",{className:"relative flex-1",children:[u.jsx(q,{className:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),u.jsx(Zl,{placeholder:"Search consultations...",value:p,onChange:e=>f(e.target.value),className:"pl-10"})]}),u.jsxs(Fh,{value:g,onValueChange:y,children:[u.jsx(zh,{className:"w-48",children:u.jsx(qh,{placeholder:"Filter by status"})}),u.jsxs(Hh,{children:[u.jsx(Kh,{value:"all",children:"All Statuses"}),u.jsx(Kh,{value:"pending",children:"Pending"}),u.jsx(Kh,{value:"contacted",children:"Contacted"}),u.jsx(Kh,{value:"confirmed",children:"Confirmed"}),u.jsx(Kh,{value:"scheduled",children:"Scheduled"}),u.jsx(Kh,{value:"completed",children:"Completed"}),u.jsx(Kh,{value:"cancelled",children:"Cancelled"})]})]}),u.jsx(Hl,{variant:"outline",size:"icon",children:u.jsx(F,{className:"h-4 w-4"})})]})})}),u.jsxs(Gl,{children:[u.jsx(Jl,{children:u.jsxs(Yl,{children:["Consultations List (",e.length," records)"]})}),u.jsxs(Xl,{children:[u.jsx("div",{className:"overflow-x-auto",children:u.jsxs("table",{className:"w-full border-collapse",children:[u.jsx("thead",{children:u.jsxs("tr",{className:"border-b",children:[u.jsx("th",{className:"text-left p-3 font-medium",children:"Client"}),u.jsx("th",{className:"text-left p-3 font-medium",children:"Service Type"}),u.jsx("th",{className:"text-left p-3 font-medium",children:"Scheduled"}),u.jsx("th",{className:"text-left p-3 font-medium",children:"Country"}),u.jsx("th",{className:"text-left p-3 font-medium",children:"Status"}),u.jsx("th",{className:"text-left p-3 font-medium",children:"Requested"}),u.jsx("th",{className:"text-left p-3 font-medium",children:"Actions"})]})}),u.jsx("tbody",{children:e.length>0?e.map(e=>{return u.jsxs("tr",{className:"border-b hover:bg-gray-50",children:[u.jsx("td",{className:"p-3",children:u.jsxs("div",{children:[u.jsx("div",{className:"font-medium",children:e.name}),u.jsx("div",{className:"text-sm text-gray-500",children:e.email}),e.company&&u.jsx("div",{className:"text-xs text-gray-400",children:e.company})]})}),u.jsx("td",{className:"p-3",children:e.serviceType}),u.jsx("td",{className:"p-3",children:u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx(D,{className:"h-4 w-4 text-gray-400"}),u.jsxs("div",{children:[u.jsx("div",{className:"text-sm",children:e.consultationDate}),u.jsx("div",{className:"text-xs text-gray-500",children:e.consultationTime})]})]})}),u.jsx("td",{className:"p-3",children:u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx(O,{className:"h-4 w-4 text-gray-400"}),u.jsx("span",{children:e.country||"N/A"})]})}),u.jsx("td",{className:"p-3",children:u.jsx(bu,{className:I(e.status),children:e.status})}),u.jsx("td",{className:"p-3",children:(t=e.createdAt,new Date(t).toLocaleDateString())}),u.jsx("td",{className:"p-3",children:u.jsxs("div",{className:"flex gap-2",children:[u.jsx(Hl,{variant:"outline",size:"sm",onClick:()=>(async e=>{try{const t=await yc.getConsultationById(e);t.success?(i(t.data),l(!0)):k({title:"Error",description:t.message||"Failed to fetch consultation details.",variant:"destructive"})}catch(t){k({title:"Error",description:"Failed to fetch consultation details.",variant:"destructive"})}})(e.id),children:u.jsx(B,{className:"h-4 w-4"})}),u.jsxs(Fh,{onValueChange:t=>A(e.id,t),children:[u.jsx(zh,{className:"w-32",children:u.jsx(qh,{placeholder:"Update"})}),u.jsxs(Hh,{children:[u.jsx(Kh,{value:"pending",children:"Pending"}),u.jsx(Kh,{value:"contacted",children:"Contacted"}),u.jsx(Kh,{value:"confirmed",children:"Confirmed"}),u.jsx(Kh,{value:"scheduled",children:"Scheduled"}),u.jsx(Kh,{value:"completed",children:"Completed"}),u.jsx(Kh,{value:"cancelled",children:"Cancelled"})]})]})]})})]},e.id);var t}):u.jsx("tr",{children:u.jsx("td",{colSpan:7,className:"text-center py-12",children:u.jsxs("div",{className:"text-gray-500",children:[u.jsx(D,{className:"h-12 w-12 mx-auto mb-4 text-gray-300"}),u.jsx("h3",{className:"text-lg font-medium mb-2",children:"No consultations found"}),u.jsx("p",{children:"No consultations match your current filters."})]})})})})]})}),j>1&&u.jsxs("div",{className:"flex justify-center gap-2 mt-4",children:[u.jsx(Hl,{variant:"outline",disabled:1===b,onClick:()=>w(b-1),children:"Previous"}),u.jsxs("span",{className:"flex items-center px-4",children:["Page ",b," of ",j]}),u.jsx(Hl,{variant:"outline",disabled:b===j,onClick:()=>w(b+1),children:"Next"})]})]})]}),u.jsx(hu,{open:o,onOpenChange:l,children:u.jsxs(gu,{className:"max-w-4xl max-h-[80vh] overflow-y-auto",children:[u.jsx(xu,{children:u.jsx(vu,{children:"Consultation Details"})}),r&&u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[u.jsxs(Gl,{children:[u.jsx(Jl,{children:u.jsxs(Yl,{className:"text-lg flex items-center gap-2",children:[u.jsx(H,{className:"h-5 w-5"}),"Client Information"]})}),u.jsxs(Xl,{className:"space-y-3",children:[u.jsxs("div",{children:[u.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Name"}),u.jsx("p",{children:r.name})]}),u.jsxs("div",{children:[u.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Email"}),u.jsxs("p",{className:"flex items-center gap-2",children:[u.jsx(v,{className:"h-4 w-4 text-gray-400"}),r.email]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Phone"}),u.jsxs("p",{className:"flex items-center gap-2",children:[u.jsx(x,{className:"h-4 w-4 text-gray-400"}),r.phone]})]}),r.company&&u.jsxs("div",{children:[u.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Company"}),u.jsx("p",{children:r.company})]}),r.country&&u.jsxs("div",{children:[u.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Country"}),u.jsxs("p",{className:"flex items-center gap-2",children:[u.jsx(O,{className:"h-4 w-4 text-gray-400"}),r.country]})]})]})]}),u.jsxs(Gl,{children:[u.jsx(Jl,{children:u.jsxs(Yl,{className:"text-lg flex items-center gap-2",children:[u.jsx(D,{className:"h-5 w-5"}),"Consultation Details"]})}),u.jsxs(Xl,{className:"space-y-3",children:[u.jsxs("div",{children:[u.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Service Type"}),u.jsx("p",{children:r.serviceType})]}),u.jsxs("div",{children:[u.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Preferred Date"}),u.jsx("p",{children:r.consultationDate})]}),u.jsxs("div",{children:[u.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Preferred Time"}),u.jsxs("p",{className:"flex items-center gap-2",children:[u.jsx($,{className:"h-4 w-4 text-gray-400"}),r.consultationTime]})]}),r.timezone&&u.jsxs("div",{children:[u.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Timezone"}),u.jsx("p",{children:r.timezone})]}),u.jsxs("div",{children:[u.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Status"}),u.jsx(bu,{className:I(r.status),children:r.status})]}),u.jsxs("div",{children:[u.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Requested On"}),u.jsx("p",{children:(M=r.createdAt,new Date(M).toLocaleString())})]})]})]})]}),u.jsxs(Gl,{children:[u.jsx(Jl,{children:u.jsx(Yl,{className:"text-lg",children:"Client Message"})}),u.jsx(Xl,{children:u.jsx("p",{className:"text-gray-700 whitespace-pre-wrap bg-gray-50 p-4 rounded-lg",children:r.message||"No message provided"})})]}),u.jsxs(Gl,{children:[u.jsx(Jl,{children:u.jsx(Yl,{className:"text-lg",children:"Quick Actions"})}),u.jsx(Xl,{children:u.jsxs("div",{className:"flex gap-3 flex-wrap",children:[u.jsxs(Hl,{onClick:()=>window.open(`mailto:${r.email}`,"_blank"),variant:"outline",children:[u.jsx(v,{className:"h-4 w-4 mr-2"}),"Send Email"]}),u.jsxs(Hl,{onClick:()=>(e=>{var t,s;let n=e.phone||(null==(s=null==(t=e.user)?void 0:t.profile)?void 0:s.phone);if(!n)return void k({title:"Error",description:"No phone number found for this client.",variant:"destructive"});n=n.replace(/\s+/g,"").replace(/[-()]/g,""),n.startsWith("0")?n="+254"+n.slice(1):n.startsWith("254")?n="+"+n:n.startsWith("+")||(n="+254"+n);const a=encodeURIComponent(`Hello ${e.name}, this is regarding your consultation request for ${e.serviceType}. We would like to discuss the details of your consultation scheduled for ${e.consultationDate} at ${e.consultationTime}. Please let us know if you have any questions or need to reschedule. Best regards, Galloways Kenya Team.`);window.open(`https://wa.me/${n.replace("+","")}?text=${a}`,"_blank"),k({title:"WhatsApp Message Sent",description:`Message sent to ${e.name} at ${n}`}),A(e.id,"contacted")})(r),variant:"outline",className:"bg-green-50 hover:bg-green-100 border-green-200",children:[u.jsx(R,{className:"h-4 w-4 mr-2"}),"WhatsApp Client"]}),u.jsxs(Hl,{onClick:()=>(e=>{i(e),m(!1);let t="";if(e.consultationDate){const s=e.consultationDate;try{if(s.includes("/")){const e=s.split("/");if(3===e.length){const s=new Date(`${e[2]}-${e[0].padStart(2,"0")}-${e[1].padStart(2,"0")}`),n=new Date(`${e[2]}-${e[1].padStart(2,"0")}-${e[0].padStart(2,"0")}`),a=isNaN(s.getTime())?n:s;isNaN(a.getTime())||(t=a.toISOString().split("T")[0])}}else if(s.includes("-")){const e=new Date(s);isNaN(e.getTime())||(t=e.toISOString().split("T")[0])}else{const e=new Date(s);isNaN(e.getTime())||(t=e.toISOString().split("T")[0])}}catch(n){}}let s="";if(e.consultationTime){const t=e.consultationTime;try{if(t.includes("AM")||t.includes("PM")){const[e,n]=t.split(" "),[a,r]=e.split(":");let i=parseInt(a);"PM"===n&&12!==i&&(i+=12),"AM"===n&&12===i&&(i=0),s=`${i.toString().padStart(2,"0")}:${r||"00"}`}else{const[e,n]=t.split(":");s=`${e.padStart(2,"0")}:${n||"00"}`}}catch(n){}}_({meetingDate:t,meetingTime:s,meetingType:"online",meetingLink:"",notes:"",duration:"60"}),d(!0)})(r),className:"bg-blue-600 hover:bg-blue-700",children:[u.jsx(we,{className:"h-4 w-4 mr-2"}),"Schedule Meeting"]}),u.jsxs(Hl,{onClick:()=>window.open(`tel:${r.phone}`,"_blank"),variant:"outline",children:[u.jsx(x,{className:"h-4 w-4 mr-2"}),"Call Client"]})]})})]})]})]})}),u.jsx(hu,{open:c,onOpenChange:d,children:u.jsxs(gu,{className:"max-w-2xl",children:[u.jsx(xu,{children:u.jsx(vu,{children:"Schedule Meeting"})}),r&&u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[u.jsxs("h4",{className:"font-medium text-blue-900",children:["Client: ",r.name]}),u.jsxs("p",{className:"text-sm text-blue-700",children:[r.email,"  ",r.phone]}),u.jsxs("p",{className:"text-sm text-blue-600",children:["Service: ",r.serviceType]})]}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[u.jsxs("div",{className:"space-y-2",children:[u.jsx(ac,{htmlFor:"meetingDate",children:"Meeting Date *"}),u.jsx(Zl,{id:"meetingDate",type:"date",value:S.meetingDate,onChange:e=>{_({...S,meetingDate:e.target.value})},min:(new Date).toISOString().split("T")[0],required:!0,className:S.meetingDate?"border-green-300":"border-amber-300"}),S.meetingDate&&u.jsx("p",{className:"text-xs text-green-600",children:" Date selected"})]}),u.jsxs("div",{className:"space-y-2",children:[u.jsx(ac,{htmlFor:"meetingTime",children:"Meeting Time *"}),u.jsx(Zl,{id:"meetingTime",type:"time",value:S.meetingTime,onChange:e=>{_({...S,meetingTime:e.target.value})},required:!0,className:S.meetingTime?"border-green-300":"border-amber-300"}),S.meetingTime&&u.jsx("p",{className:"text-xs text-green-600",children:" Time selected"})]}),u.jsxs("div",{className:"space-y-2",children:[u.jsx(ac,{htmlFor:"meetingType",children:"Meeting Type *"}),u.jsxs(Fh,{value:S.meetingType,onValueChange:e=>_({...S,meetingType:e}),children:[u.jsx(zh,{children:u.jsx(qh,{placeholder:"Select meeting type"})}),u.jsxs(Hh,{children:[u.jsx(Kh,{value:"online",children:"Online (Zoom/Teams/Meet)"}),u.jsx(Kh,{value:"phone",children:"Phone Call"}),u.jsx(Kh,{value:"in-person",children:"In-Person Meeting"}),u.jsx(Kh,{value:"whatsapp",children:"WhatsApp Video Call"})]})]})]}),u.jsxs("div",{className:"space-y-2",children:[u.jsx(ac,{htmlFor:"duration",children:"Duration (minutes) *"}),u.jsxs(Fh,{value:S.duration,onValueChange:e=>_({...S,duration:e}),children:[u.jsx(zh,{children:u.jsx(qh,{placeholder:"Select duration"})}),u.jsxs(Hh,{children:[u.jsx(Kh,{value:"30",children:"30 minutes"}),u.jsx(Kh,{value:"60",children:"60 minutes"}),u.jsx(Kh,{value:"90",children:"90 minutes"}),u.jsx(Kh,{value:"120",children:"2 hours"})]})]})]})]}),"online"===S.meetingType&&u.jsxs("div",{className:"space-y-2",children:[u.jsx(ac,{htmlFor:"meetingLink",children:"Meeting Link"}),u.jsx(Zl,{id:"meetingLink",type:"url",placeholder:"https://zoom.us/j/... or https://teams.microsoft.com/...",value:S.meetingLink,onChange:e=>_({...S,meetingLink:e.target.value})}),u.jsx("p",{className:"text-sm text-gray-500",children:"If no link is provided, we'll create a Zoom meeting automatically."})]}),u.jsxs("div",{className:"space-y-2",children:[u.jsx(ac,{htmlFor:"notes",children:"Additional Notes"}),u.jsx(ec,{id:"notes",placeholder:"Any specific agenda items, preparation requirements, or special instructions...",value:S.notes,onChange:e=>_({...S,notes:e.target.value}),rows:3})]}),u.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[u.jsxs("div",{className:"flex items-center gap-2 text-green-800",children:[u.jsx(R,{className:"h-4 w-4"}),u.jsx("span",{className:"font-medium",children:"WhatsApp Confirmation"})]}),u.jsx("p",{className:"text-sm text-green-700 mt-1",children:"After scheduling, a WhatsApp confirmation message will be automatically sent to the client with all meeting details."})]}),u.jsxs("div",{className:"bg-blue-50 p-3 rounded-lg border border-blue-200",children:[u.jsx("p",{className:"text-sm font-medium text-blue-800 mb-2",children:"Debug Info:"}),u.jsxs("div",{className:"text-xs text-blue-700 space-y-1",children:[u.jsxs("p",{children:['Meeting Date: "',S.meetingDate,'" (Length: ',S.meetingDate.length,")"]}),u.jsxs("p",{children:['Meeting Time: "',S.meetingTime,'" (Length: ',S.meetingTime.length,")"]}),u.jsxs("p",{children:["Button Enabled: ",S.meetingDate&&S.meetingTime?"YES":"NO"]})]})]}),u.jsxs("div",{className:"flex flex-col gap-3",children:[(!S.meetingDate||!S.meetingTime)&&u.jsxs("p",{className:"text-sm text-amber-600 bg-amber-50 p-2 rounded-md border border-amber-200",children:[u.jsx(be,{className:"h-4 w-4 inline mr-1"}),"Please fill in both meeting date and time to enable scheduling."]}),u.jsxs("div",{className:"flex flex-col gap-3",children:[u.jsxs("div",{className:"flex gap-3 justify-end",children:[u.jsx(Hl,{variant:"outline",onClick:()=>{d(!1),i(null),m(!1)},children:h?"Close":"Cancel"}),!h&&u.jsxs(Hl,{onClick:async()=>{if(r)try{const e=await yc.scheduleMeeting(r.id,S);if(!e.success)throw new Error(e.message||"Failed to schedule meeting");m(!0),k({title:"Meeting Scheduled Successfully",description:e.message||`Meeting scheduled for ${S.meetingDate} at ${S.meetingTime}. Use the button below to send WhatsApp details.`}),P()}catch(e){k({title:"Error",description:e.message||"Failed to schedule meeting. Please try again.",variant:"destructive"})}},disabled:!S.meetingDate||!S.meetingTime,className:""+(S.meetingDate&&S.meetingTime?"bg-blue-600 hover:bg-blue-700 text-white":"bg-gray-300 text-gray-500 cursor-not-allowed hover:bg-gray-300"),children:[u.jsx(we,{className:"h-4 w-4 mr-2"}),"Schedule Meeting"]})]}),h&&u.jsx("div",{className:"border-t pt-3",children:u.jsxs("div",{className:"flex items-center justify-between p-4 bg-green-50 rounded-lg border border-green-200",children:[u.jsxs("div",{children:[u.jsx("p",{className:"text-sm font-semibold text-green-800",children:" Meeting Successfully Scheduled!"}),u.jsxs("p",{className:"text-xs text-green-600 mt-1",children:[" ",S.meetingDate," at ",S.meetingTime]}),u.jsx("p",{className:"text-xs text-green-600",children:"Click below to send meeting details to client via WhatsApp"})]}),u.jsxs(Hl,{onClick:async()=>{if(r)try{const e=await yc.sendWhatsAppMeetingDetails(r.id,{includeLink:!!S.meetingLink,message:void 0});if(!e.success)throw new Error(e.message||"Failed to send WhatsApp details");k({title:"WhatsApp Details Sent Successfully",description:`Meeting details sent to ${r.name}`}),d(!1),i(null),m(!1)}catch(e){k({title:"Error",description:e.message||"Failed to send WhatsApp details. Please try again.",variant:"destructive"})}else k({title:"Error",description:"No consultation selected.",variant:"destructive"})},className:"bg-green-600 hover:bg-green-700 text-white",size:"sm",children:[u.jsx(R,{className:"h-4 w-4 mr-2"}),"Send WhatsApp Details"]})]})})]})]})]})]})})]});var M}const vg=Object.freeze(Object.defineProperty({__proto__:null,default:function(){const[e,t]=s.useState("dashboard"),[n,a]=s.useState(!0),[r,i]=s.useState(!1);return s.useEffect(()=>{localStorage.setItem("admin_token","admin-access-token")},[]),u.jsxs("div",{className:"flex h-screen bg-gradient-to-br from-slate-50 via-blue-50/30 to-indigo-50/50 overflow-hidden",children:[u.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-blue-600/5 via-purple-600/5 to-indigo-600/5 pointer-events-none"}),u.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(ellipse_at_top,_var(--tw-gradient-stops))] from-blue-100/20 via-transparent to-transparent pointer-events-none"}),u.jsx($m,{activeTab:e,setActiveTab:s=>{s!==e&&(i(!0),setTimeout(()=>{t(s),i(!1)},150))},isOpen:n,toggleSidebar:()=>a(!n)}),u.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden relative",children:[u.jsx(zf,{toggleSidebar:()=>a(!n)}),u.jsxs("main",{className:`\n          flex-1 overflow-auto p-6 relative\n          transition-all duration-300 ease-in-out\n          ${r?"opacity-60 scale-98":"opacity-100 scale-100"}\n        `,children:[u.jsx("div",{className:"relative z-10 h-full",children:(()=>{switch(e){case"dashboard":default:return u.jsx(sg,{});case"users":return u.jsx(cg,{});case"claims":return u.jsx(gg,{});case"consultations":return u.jsx(xg,{});case"payments":return u.jsx(dg,{});case"notifications":return u.jsx(ug,{});case"analytics":return u.jsx(hg,{});case"settings":return u.jsx(mg,{});case"quotes":return u.jsx(Om,{});case"diaspora":return u.jsx(Im,{});case"outsourcing":return u.jsx(Mm,{})}})()}),u.jsx("div",{className:"absolute top-0 left-0 w-32 h-32 bg-blue-400/10 rounded-full blur-3xl animate-pulse"}),u.jsx("div",{className:"absolute bottom-0 right-0 w-40 h-40 bg-purple-400/10 rounded-full blur-3xl animate-pulse delay-1000"}),u.jsx("div",{className:"absolute top-1/3 right-1/4 w-24 h-24 bg-indigo-400/10 rounded-full blur-2xl animate-pulse delay-500"})]})]}),r&&u.jsx("div",{className:"absolute inset-0 bg-white/30 backdrop-blur-sm z-50 flex items-center justify-center pointer-events-none",children:u.jsx("div",{className:"w-8 h-8 border-2 border-blue-600 border-t-transparent rounded-full animate-spin"})}),u.jsx(Ds,{position:"top-right",richColors:!0,closeButton:!0,theme:"light",className:"z-[9999]",toastOptions:{style:{background:"rgba(255, 255, 255, 0.95)",backdropFilter:"blur(12px)",border:"1px solid rgba(255, 255, 255, 0.2)",boxShadow:"0 10px 40px rgba(0, 0, 0, 0.1)"}}})]})}},Symbol.toStringTag,{value:"Module"}));export{Ds as $,Ga as A,Hl as B,Gl as C,et as D,pt as E,Ya as F,Be as G,Bl as H,Zl as I,Kl as J,Vl as K,ac as L,Ql as M,Pe as N,hc as O,Ke as P,hu as Q,at as R,Fe as S,ec as T,mu as U,mt as V,gu as W,fc as X,bu as Y,gc as Z,Ne as _,Xl as a,Su as a0,Ea as a1,em as a2,Nu as a3,cm as a4,dm as a5,pc as a6,Tm as a7,Rm as a8,Pm as a9,Dm as aa,uc as ab,Am as ac,vg as ad,Jl as b,hs as c,Yl as d,Fh as e,zh as f,qh as g,Hh as h,Kh as i,mc as j,He as k,Le as l,Me as m,rt as n,ut as o,lt as p,Ge as q,xc as r,Ae as s,ot as t,De as u,it as v,Ve as w,yt as x,Pa as y,Ja as z};
