import{m as e,a as o,r,j as t,b as n,g as s,o as a,P as u,d as c}from"./index-CzeFNnHZ.js";import{u as i}from"./index-S_eeaI2i.js";import{u as l}from"./index-bDmxw3cC.js";var f="rovingFocusGroup.onEntryFocus",d={bubbles:!1,cancelable:!0},p="RovingFocusGroup",[v,m,b]=e(p),[w,g]=o(p,[b]),[F,I]=w(p),h=r.forwardRef((e,o)=>t.jsx(v.Provider,{scope:e.__scopeRovingFocusGroup,children:t.jsx(v.Slot,{scope:e.__scopeRovingFocusGroup,children:t.jsx(R,{...e,ref:o})})}));h.displayName=p;var R=r.forwardRef((e,o)=>{const{__scopeRovingFocusGroup:i,orientation:v,loop:b=!1,dir:w,currentTabStopId:g,defaultCurrentTabStopId:I,onCurrentTabStopIdChange:h,onEntryFocus:R,preventScrollOnEntryFocus:x=!1,...y}=e,S=r.useRef(null),A=n(o,S),E=l(w),[j,D]=s({prop:g,defaultProp:I??null,onChange:h,caller:p}),[C,_]=r.useState(!1),G=a(R),K=m(i),L=r.useRef(!1),[k,P]=r.useState(0);return r.useEffect(()=>{const e=S.current;if(e)return e.addEventListener(f,G),()=>e.removeEventListener(f,G)},[G]),t.jsx(F,{scope:i,orientation:v,dir:E,loop:b,currentTabStopId:j,onItemFocus:r.useCallback(e=>D(e),[D]),onItemShiftTab:r.useCallback(()=>_(!0),[]),onFocusableItemAdd:r.useCallback(()=>P(e=>e+1),[]),onFocusableItemRemove:r.useCallback(()=>P(e=>e-1),[]),children:t.jsx(u.div,{tabIndex:C||0===k?-1:0,"data-orientation":v,...y,ref:A,style:{outline:"none",...e.style},onMouseDown:c(e.onMouseDown,()=>{L.current=!0}),onFocus:c(e.onFocus,e=>{const o=!L.current;if(e.target===e.currentTarget&&o&&!C){const o=new CustomEvent(f,d);if(e.currentTarget.dispatchEvent(o),!o.defaultPrevented){const e=K().filter(e=>e.focusable);T([e.find(e=>e.active),e.find(e=>e.id===j),...e].filter(Boolean).map(e=>e.ref.current),x)}}L.current=!1}),onBlur:c(e.onBlur,()=>_(!1))})})}),x="RovingFocusGroupItem",y=r.forwardRef((e,o)=>{const{__scopeRovingFocusGroup:n,focusable:s=!0,active:a=!1,tabStopId:l,children:f,...d}=e,p=i(),b=l||p,w=I(x,n),g=w.currentTabStopId===b,F=m(n),{onFocusableItemAdd:h,onFocusableItemRemove:R,currentTabStopId:y}=w;return r.useEffect(()=>{if(s)return h(),()=>R()},[s,h,R]),t.jsx(v.ItemSlot,{scope:n,id:b,focusable:s,active:a,children:t.jsx(u.span,{tabIndex:g?0:-1,"data-orientation":w.orientation,...d,ref:o,onMouseDown:c(e.onMouseDown,e=>{s?w.onItemFocus(b):e.preventDefault()}),onFocus:c(e.onFocus,()=>w.onItemFocus(b)),onKeyDown:c(e.onKeyDown,e=>{if("Tab"===e.key&&e.shiftKey)return void w.onItemShiftTab();if(e.target!==e.currentTarget)return;const o=function(e,o,r){const t=function(e,o){return"rtl"!==o?e:"ArrowLeft"===e?"ArrowRight":"ArrowRight"===e?"ArrowLeft":e}(e.key,r);return"vertical"===o&&["ArrowLeft","ArrowRight"].includes(t)||"horizontal"===o&&["ArrowUp","ArrowDown"].includes(t)?void 0:S[t]}(e,w.orientation,w.dir);if(void 0!==o){if(e.metaKey||e.ctrlKey||e.altKey||e.shiftKey)return;e.preventDefault();let n=F().filter(e=>e.focusable).map(e=>e.ref.current);if("last"===o)n.reverse();else if("prev"===o||"next"===o){"prev"===o&&n.reverse();const s=n.indexOf(e.currentTarget);n=w.loop?(t=s+1,(r=n).map((e,o)=>r[(t+o)%r.length])):n.slice(s+1)}setTimeout(()=>T(n))}var r,t}),children:"function"==typeof f?f({isCurrentTabStop:g,hasTabStop:null!=y}):f})})});y.displayName=x;var S={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function T(e,o=!1){const r=document.activeElement;for(const t of e){if(t===r)return;if(t.focus({preventScroll:o}),document.activeElement!==r)return}}var A=h,E=y;export{E as I,A as R,g as c};
